module.exports=[77402,(a,b,c)=>{"use strict";b.exports=a.r(15178).vendored["react-ssr"].ReactServerDOMTurbopackClient},13247,a=>{"use strict";var b=a.i(37037);a.s(["default",0,()=>(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-600"})})])},379,a=>{"use strict";var b=a.i(37037),c=a.i(68426),d=a.i(66733),e=a.i(8315),f=a.i(4839);a.s(["default",0,({user:a,logout:g})=>{let h,i=(0,d.usePathname)(),[j,k]=(0,f.useState)(!1),l=[{href:"/doctor/dashboard",label:"Dashboard",icon:e.FiHome},{href:"/doctor/appointments",label:"Appointments",icon:e.FiCalendar},{href:"/doctor/patients",label:"My Patients",icon:e.FiUsers},{href:"/doctor/prescriptions",label:"Prescriptions",icon:e.FiFileText},{href:"/doctor/chat",label:"Chats",icon:e.FiMessageCircle},{href:"/doctor/profile",label:"My Profile",icon:e.FiUser}];return(0,b.jsx)("div",{className:`${j?"w-16":"w-64"} bg-teal-600 text-white transition-all duration-300 fixed left-0 top-0 h-full z-20`,children:(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsx)("button",{onClick:()=>k(!j),className:"w-full flex items-center justify-center p-2 hover:bg-teal-700 rounded-lg transition-colors mb-4",children:(0,b.jsx)(e.FiChevronRight,{className:`text-xl transform transition-transform ${j?"":"rotate-180"}`})}),!j&&(0,b.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-2xl",children:"ðŸ©º"}),(0,b.jsx)("span",{className:"text-xl font-bold",children:"MediWise"})]})}),!j&&(0,b.jsx)("div",{className:"mb-6 pb-6 border-b border-teal-500",children:(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-white bg-opacity-20 flex items-center justify-center text-sm font-semibold",children:(h=a?.name||"D",h?.split(" ")?.map(a=>a[0])?.join("")?.toUpperCase()?.slice(0,2)||"D")}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("p",{className:"text-sm font-semibold truncate",children:["Dr. ",a?.name]}),(0,b.jsx)("p",{className:"text-xs text-teal-200 capitalize",children:"Doctor"})]})]})}),(0,b.jsx)("nav",{className:"space-y-1",children:l.map(a=>{let d=a.icon,e=i===a.href;return(0,b.jsxs)(c.default,{href:a.href,className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e?"bg-teal-700 text-white font-semibold":"text-teal-100 hover:bg-teal-700 hover:text-white"}`,children:[(0,b.jsx)(d,{className:"text-xl flex-shrink-0"}),!j&&(0,b.jsx)("span",{className:"text-sm",children:a.label})]},a.href)})}),(0,b.jsx)("div",{className:"absolute bottom-4 left-4 right-4",children:(0,b.jsxs)("button",{onClick:g,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-teal-100 hover:bg-teal-700 hover:text-white",children:[(0,b.jsx)(e.FiLogOut,{className:"text-xl flex-shrink-0"}),!j&&(0,b.jsx)("span",{className:"text-sm",children:"Logout"})]})})]})})}])},22227,a=>{"use strict";var b=a.i(21580),c=a.i(37530),d=a.i(36233),e=a.i(84262),f=a.i(64551),g=a.i(25778);function h(a,b){let c=(0,g.toDate)(a)-(0,g.toDate)(b);return c<0?-1:c>0?1:c}var i=a.i(58101);function j(a,j){return function(a,b,j){var k;let l,m=(0,d.getDefaultOptions)(),n=j?.locale??m.locale??c.defaultLocale,o=h(a,b);if(isNaN(o))throw RangeError("Invalid time value");let p=Object.assign({},j,{addSuffix:j?.addSuffix,comparison:o}),[q,r]=(0,f.normalizeDates)(j?.in,...o>0?[b,a]:[a,b]),s=(k=void 0,a=>{let b=(k?Math[k]:Math.trunc)(a);return 0===b?0:b})(((0,g.toDate)(r)-(0,g.toDate)(q))/1e3),t=Math.round((s-((0,e.getTimezoneOffsetInMilliseconds)(r)-(0,e.getTimezoneOffsetInMilliseconds)(q))/1e3)/60);if(t<2)if(j?.includeSeconds)if(s<5)return n.formatDistance("lessThanXSeconds",5,p);else if(s<10)return n.formatDistance("lessThanXSeconds",10,p);else if(s<20)return n.formatDistance("lessThanXSeconds",20,p);else if(s<40)return n.formatDistance("halfAMinute",0,p);else if(s<60)return n.formatDistance("lessThanXMinutes",1,p);else return n.formatDistance("xMinutes",1,p);else if(0===t)return n.formatDistance("lessThanXMinutes",1,p);else return n.formatDistance("xMinutes",t,p);if(t<45)return n.formatDistance("xMinutes",t,p);if(t<90)return n.formatDistance("aboutXHours",1,p);if(t<i.minutesInDay){let a=Math.round(t/60);return n.formatDistance("aboutXHours",a,p)}if(t<2520)return n.formatDistance("xDays",1,p);else if(t<i.minutesInMonth){let a=Math.round(t/i.minutesInDay);return n.formatDistance("xDays",a,p)}else if(t<2*i.minutesInMonth)return l=Math.round(t/i.minutesInMonth),n.formatDistance("aboutXMonths",l,p);if((l=function(a,b,c){var d,e;let i,j,k,l,[m,n,o]=(0,f.normalizeDates)(void 0,a,a,b),p=h(n,o),q=Math.abs(function(a,b,c){let[d,e]=(0,f.normalizeDates)(void 0,a,b);return 12*(d.getFullYear()-e.getFullYear())+(d.getMonth()-e.getMonth())}(n,o));if(q<1)return 0;1===n.getMonth()&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-p*q);let r=h(n,o)===-p;+(i=(0,g.toDate)(m,void 0),d=void 0,(j=(0,g.toDate)(i,d?.in)).setHours(23,59,59,999),j)==+(e=void 0,l=(k=(0,g.toDate)(i,e?.in)).getMonth(),k.setFullYear(k.getFullYear(),l+1,0),k.setHours(23,59,59,999),k)&&1===q&&1===h(m,o)&&(r=!1);let s=p*(q-r);return 0===s?0:s}(r,q))<12){let a=Math.round(t/i.minutesInMonth);return n.formatDistance("xMonths",a,p)}{let a=l%12,b=Math.trunc(l/12);return a<3?n.formatDistance("aboutXYears",b,p):a<9?n.formatDistance("overXYears",b,p):n.formatDistance("almostXYears",b+1,p)}}(a,(0,b.constructFrom)(a,Date.now()),j)}a.s(["formatDistanceToNow",()=>j],22227)},21491,a=>{"use strict";var b=a.i(37037),c=a.i(4839),d=a.i(99752),e=a.i(25941),f=a.i(66733),g=a.i(13247),h=a.i(379),i=a.i(97005),j=a.i(35557),k=a.i(22227),l=a.i(8315);function m(){let{user:a,loading:m,logout:n}=(0,d.useAuth)(),{showNotification:o}=(0,e.useNotification)(),p=(0,f.useRouter)();(0,f.usePathname)();let[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(!0),[C,D]=(0,c.useState)(0),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(!1),I=(0,c.useRef)(null);(0,c.useRef)(null),(0,c.useEffect)(()=>{m||a&&"doctor"===a.role||p.push("/login")},[a,m,p]),(0,c.useEffect)(()=>{a&&"doctor"===a.role&&(K(),L(),N())},[a]),(0,c.useEffect)(()=>{if(a&&"doctor"===a.role){let a=setInterval(()=>{K(),L(),N(),u&&M(u.id)},2e3);return()=>{clearInterval(a)}}},[a,u]),(0,c.useEffect)(()=>{J()},[w]);let J=()=>{I.current?.scrollIntoView({behavior:"smooth"})},K=async()=>{try{let a=await i.default.get("/chat/users");r(a.data.users||[])}catch(a){console.error("Error fetching chat users:",a)}},L=async()=>{try{let a=await i.default.get("/chat/conversations");t(a.data.conversations||[])}catch(a){console.error("Error fetching conversations:",a)}finally{B(!1)}},M=async a=>{try{let b=await i.default.get(`/chat/messages/${a}`);x(b.data.messages||[])}catch(a){console.error("Error fetching messages:",a)}},N=async()=>{try{let a=await i.default.get("/chat/unread-count");D(a.data.count||0)}catch(a){console.error("Error fetching unread count:",a)}},O=a=>{let b=s.find(b=>b.id===a.id);if(b)v(b),M(b.id),F(""),H(!1);else v({id:a.id,name:a.name,email:a.email,role:a.role,phone:a.phone,lastMessage:a.lastMessage||"No messages yet",lastMessageTime:a.lastMessageTime||new Date,unreadCount:a.unreadCount||0}),x([]);F(""),H(!1)},P=q.filter(a=>a.name.toLowerCase().includes(E.toLowerCase())||a.email.toLowerCase().includes(E.toLowerCase())),Q=async a=>{if(a.preventDefault(),y.trim()&&u)try{await i.default.post("/chat/send",{receiverId:u.id,content:y.trim()}),z(""),setTimeout(()=>{M(u.id),L(),K(),N()},100)}catch(a){console.error("Error sending message:",a),o("Failed to send message","error")}},R=a=>a?.split(" ")?.map(a=>a[0])?.join("")?.toUpperCase()?.slice(0,2)||"U";return m||A?(0,b.jsx)(g.default,{}):a&&"doctor"===a.role?(0,b.jsxs)("div",{className:"flex min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors",children:[(0,b.jsx)(h.default,{user:a,logout:n}),(0,b.jsxs)("main",{className:"ml-64 flex-1 flex h-screen transition-all duration-300",children:[(0,b.jsxs)("div",{className:"w-1/3 border-r border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 flex flex-col",children:[(0,b.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"Messages"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"text",value:E,onChange:a=>{F(a.target.value),H(a.target.value.length>0)},onFocus:()=>{E.length>0&&H(!0)},onBlur:()=>{setTimeout(()=>H(!1),200)},placeholder:"Search by name or email...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),G&&P.length>0&&(0,b.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:P.slice(0,5).map(a=>(0,b.jsx)("div",{onMouseDown:b=>{b.preventDefault(),O(a)},className:"px-4 py-3 hover:bg-blue-50 cursor-pointer border-b border-gray-100 last:border-0",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white font-bold text-sm",children:R(a.name)}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-800",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-gray-600 capitalize",children:a.role}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["ID: ",a.id.slice(0,8),"..."]})]}),a.unreadCount>0&&(0,b.jsx)("span",{className:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full",children:a.unreadCount})]})},a.id))})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===q.length?(0,b.jsx)("div",{className:"p-8 text-center text-gray-500",children:(0,b.jsx)("p",{children:"No users available"})}):q.map(a=>{let c=s.find(b=>b.id===a.id),d=u?.id===a.id,e=c||a;return(0,b.jsx)("div",{onClick:()=>O(a),className:`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors ${d?"bg-blue-50":""}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white font-bold",children:R(a.name)}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-800 truncate",children:a.name}),e.lastMessageTime&&(0,b.jsx)("span",{className:"text-xs text-gray-500",children:(0,k.formatDistanceToNow)(new Date(e.lastMessageTime),{addSuffix:!0})})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 truncate mt-1",children:e.lastMessage||"No messages yet"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["ID: ",a.id.slice(0,8),"..."]}),(0,b.jsx)("span",{className:"text-xs text-gray-400",children:"â€¢"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:a.role})]})]}),a.unreadCount>0&&(0,b.jsx)("span",{className:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full",children:a.unreadCount})]})},a.id)})})]}),(0,b.jsx)("div",{className:"flex-1 flex flex-col bg-gray-50",children:u?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"bg-white border-b border-gray-200 p-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white font-bold",children:R(u.name)}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-800",children:u.name}),(0,b.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:u.role})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[u.phone&&(0,b.jsx)("a",{href:`tel:${u.phone}`,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:`Call ${u.phone}`,children:(0,b.jsx)(l.FiPhone,{className:"text-xl text-gray-600"})}),(0,b.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,b.jsx)(l.FiMoreVertical,{className:"text-xl text-gray-600"})})]})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[w.map(c=>{let d=c.senderId===a.id;return(0,b.jsx)("div",{className:`flex ${d?"justify-end":"justify-start"}`,children:(0,b.jsxs)("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-2xl ${d?"bg-blue-600 text-white":"bg-white text-gray-800 border border-gray-200"}`,children:[!d&&(0,b.jsx)("p",{className:"text-xs font-semibold mb-1 opacity-75",children:c.sender.name}),(0,b.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:c.content}),(0,b.jsxs)("div",{className:`flex items-center gap-1 mt-1 ${d?"justify-end":"justify-start"}`,children:[(0,b.jsx)("p",{className:`text-xs ${d?"text-blue-100":"text-gray-500"}`,children:(0,j.format)(new Date(c.createdAt),"h:mm a")}),d&&(0,b.jsx)("div",{className:"flex items-center",children:c.isRead?(0,b.jsxs)("span",{className:"text-blue-300 text-xs ml-1 flex items-center gap-0.5",children:[(0,b.jsxs)("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,b.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}),(0,b.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})]}),(0,b.jsx)("span",{className:"text-[10px]",children:"Seen"})]}):(0,b.jsx)("span",{className:"text-gray-300 text-xs ml-1",children:(0,b.jsx)("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})]})]})},c.id)}),(0,b.jsx)("div",{ref:I})]}),(0,b.jsx)("div",{className:"bg-white border-t border-gray-200 p-4",children:(0,b.jsxs)("form",{onSubmit:Q,className:"flex items-center gap-2",children:[(0,b.jsx)("button",{type:"button",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,b.jsx)(l.FiPaperclip,{className:"text-xl text-gray-600"})}),(0,b.jsx)("input",{type:"text",value:y,onChange:a=>z(a.target.value),placeholder:"Type a message...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,b.jsx)("button",{type:"submit",disabled:!y.trim(),className:"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,b.jsx)(l.FiSend,{className:"text-xl"})})]})})]}):(0,b.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(l.FiMessageCircle,{className:"text-6xl text-gray-300 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-500 text-lg",children:"Select a conversation to start chatting"})]})})})]})]}):null}a.s(["default",()=>m])}];

//# sourceMappingURL=OneDrive_Desktop_mediwise_frontend_d9fe80c5._.js.map