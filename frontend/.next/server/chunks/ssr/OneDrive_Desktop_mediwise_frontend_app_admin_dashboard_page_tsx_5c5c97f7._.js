module.exports=[6396,a=>{"use strict";var b=a.i(37037),c=a.i(4839),d=a.i(99752),e=a.i(25941),f=a.i(5072),g=a.i(66733),h=a.i(13247),i=a.i(97005),j=a.i(8315),k=a.i(35557),l=a.i(9807),m=a.i(22227),n=a.i(5711),o=a.i(42006);function p(){let{user:a,loading:m,logout:p}=(0,d.useAuth)(),{showNotification:w}=(0,e.useNotification)(),{t:x}=(0,f.useLanguage)(),y=(0,g.useRouter)(),z=(0,g.usePathname)(),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(!0),[E,F]=(0,c.useState)("/admin/dashboard"),[G,H]=(0,c.useState)(""),I=(0,c.useRef)(null),J=(0,c.useRef)(null),K=(0,c.useRef)(null);(0,c.useEffect)(()=>{z&&("/admin/dashboard"===z||"/admin/appointments"===z||"/admin/users"===z||"/admin/doctors"===z||"/admin/prescriptions"===z||"/admin/ads"===z||"/admin/chats"===z)?F(z):z&&z.startsWith("/admin/")&&F(z)},[z]),(0,c.useEffect)(()=>{m||a?a&&"admin"!==a.role?"patient"===a.role?y.push("/patient/dashboard"):"doctor"===a.role?y.push("/doctor/dashboard"):y.push("/dashboard"):a&&"admin"===a.role&&L():y.push("/login")},[a,m,y]);let L=async()=>{try{D(!0);let[a,b,c]=await Promise.all([i.default.get("/admin/dashboard"),i.default.get("/doctors/admin/pending"),i.default.get("/admin/top-doctors?limit=5")]);B({...a.data,pendingDoctors:b.data.doctors||[],topDoctors:c.data.topDoctors||[]})}catch(a){console.error("Error fetching dashboard data:",a),B({stats:{totalUsers:0,totalDoctors:0,totalAppointments:0,pendingDoctors:0},appointments:[],prescriptions:[],pendingDoctors:[],topDoctors:[]})}finally{D(!1)}},M=a=>{F(a),y.push(a)};return m||C?(0,b.jsx)(h.default,{}):a&&"admin"===a.role?(0,b.jsxs)("div",{className:"flex min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors",children:[(0,b.jsx)(n.default,{activeSection:E,onSectionChange:M}),(0,b.jsxs)("main",{className:"ml-64 flex-1 bg-gray-50 dark:bg-gray-900 transition-colors",children:[(0,b.jsx)(o.default,{title:(()=>{switch(E){case"/admin/dashboard":default:return"Dashboard";case"/admin/appointments":return"Appointments";case"/admin/users":return"Users";case"/admin/doctors":return"Doctors";case"/admin/prescriptions":return"Prescriptions";case"/admin/ads":return"Advertisements";case"/admin/chats":return"Chats"}})(),onSearch:"/admin/users"===E?a=>{H(a)}:void 0,searchPlaceholder:"/admin/users"===E?"Search users by name, email, or phone...":void 0,onQuickAdd:{onAddUser:()=>{M("/admin/users"),setTimeout(()=>{I.current?.openCreateModal&&I.current.openCreateModal()},100)},onAddDoctor:()=>{M("/admin/doctors"),w("Navigate to Doctors section to review pending doctor applications","info")},onAddAppointment:()=>{M("/admin/appointments"),setTimeout(()=>{J.current?.openCreateModal&&J.current.openCreateModal()},100)},onAddAdvertisement:()=>{M("/admin/ads"),setTimeout(()=>{K.current?.openCreateModal&&K.current.openCreateModal()},100)}}}),(0,b.jsxs)("div",{className:"p-8",children:[("/admin/dashboard"===E||"/dashboard"===E)&&A&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:[x("welcome_back"),", ",a.name,"!"]}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:x("dashboard_overview")||"Here's an overview of your system"})]}),(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:x("total_users")}),(0,b.jsx)("p",{className:"text-3xl font-bold text-teal-600 dark:text-teal-400 mt-2",children:A.stats?.totalUsers||0})]}),(0,b.jsx)(j.FiUser,{className:"text-4xl text-teal-600 dark:text-teal-400"})]})}),(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:x("total_doctors")}),(0,b.jsx)("p",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400 mt-2",children:A.stats?.totalDoctors||0})]}),(0,b.jsx)(j.FiUser,{className:"text-4xl text-indigo-600 dark:text-indigo-400"})]})}),(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:x("total_appointments")}),(0,b.jsx)("p",{className:"text-3xl font-bold text-teal-600 dark:text-teal-400 mt-2",children:A.stats?.totalAppointments||0})]}),(0,b.jsx)(j.FiCalendar,{className:"text-4xl text-teal-600 dark:text-teal-400"})]})}),(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:x("pending_doctors")}),(0,b.jsx)("p",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400 mt-2",children:A.stats?.pendingDoctors||0})]}),(0,b.jsx)(j.FiClock,{className:"text-4xl text-orange-600 dark:text-orange-400"})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[A.recentAppointments&&A.recentAppointments.length>0&&(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:x("recent_appointments")}),(0,b.jsxs)("button",{onClick:()=>M("/admin/appointments"),className:"text-teal-600 dark:text-teal-400 hover:text-teal-700 dark:hover:text-teal-300 text-sm font-medium",children:[x("view_all")," →"]})]}),(0,b.jsx)("div",{className:"space-y-3",children:A.recentAppointments.slice(0,5).map(a=>(0,b.jsxs)("div",{className:"flex justify-between items-center p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-md transition-shadow bg-white dark:bg-gray-700",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:[a.patient?.name||"Patient"," - Dr. ",a.doctor?.user?.name||"Doctor"]}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[(0,k.format)((0,l.parseISO)(a.appointmentDate),"MM/dd/yyyy")," at ",a.appointmentTime]}),a.reason&&(0,b.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1",children:a.reason})]}),(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${"confirmed"===a.status?"bg-green-100 text-green-800":"pending"===a.status?"bg-yellow-100 text-yellow-800":"completed"===a.status?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:a.status})]},a.id))})]}),A.topDoctors&&A.topDoctors.length>0&&(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:x("top_doctors")}),(0,b.jsxs)("button",{onClick:()=>M("/admin/doctors"),className:"text-teal-600 dark:text-teal-400 hover:text-teal-700 dark:hover:text-teal-300 text-sm font-medium",children:[x("view_all")," →"]})]}),(0,b.jsx)("div",{className:"space-y-3",children:A.topDoctors.map((a,c)=>(0,b.jsxs)("div",{className:"flex justify-between items-center p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-md transition-shadow bg-white dark:bg-gray-700",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white font-bold text-lg",children:c+1}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:["Dr. ",a.name]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:a.specialization}),(0,b.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:a.email})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-teal-600 dark:text-teal-400",children:a.patientCount}),(0,b.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Patients"})]})]},a.id))})]})]}),A.pendingDoctors&&A.pendingDoctors.length>0&&(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"Pending Doctor Approvals"}),(0,b.jsx)("button",{onClick:()=>F("/admin/doctors"),className:"text-teal-600 hover:text-teal-700 text-sm font-medium",children:"View All →"})]}),(0,b.jsx)("div",{className:"space-y-3",children:A.pendingDoctors.slice(0,5).map(a=>(0,b.jsxs)("div",{className:"flex justify-between items-center p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-md transition-shadow bg-white dark:bg-gray-800",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:a.user?.name||"Doctor"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:a.specialization||"N/A"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:a.department?.name||"No Department"})]}),(0,b.jsx)("button",{onClick:()=>F("/admin/doctors"),className:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors text-sm font-medium",children:"Review"})]},a.id))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,b.jsxs)("button",{onClick:()=>F("/admin/doctors"),className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg transition-all flex items-center gap-4 text-left",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center",children:(0,b.jsx)(j.FiUser,{className:"text-2xl text-indigo-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Manage Doctors"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Approve pending doctors"}),A.stats?.pendingDoctors>0&&(0,b.jsxs)("p",{className:"text-xs text-orange-600 mt-1 font-medium",children:[A.stats.pendingDoctors," pending approval"]})]})]}),(0,b.jsxs)("button",{onClick:()=>F("/admin/appointments"),className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg transition-all flex items-center gap-4 text-left",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-teal-100 flex items-center justify-center",children:(0,b.jsx)(j.FiCalendar,{className:"text-2xl text-teal-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"View Appointments"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manage all appointments"})]})]}),(0,b.jsxs)("button",{onClick:()=>F("/admin/users"),className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg transition-all flex items-center gap-4 text-left",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:(0,b.jsx)(j.FiUser,{className:"text-2xl text-blue-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Manage Users"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"View all users"})]})]})]})]})]}),"/admin/users"===E&&(0,b.jsx)(q,{ref:I,onSectionChange:F,searchQuery:G}),"/admin/doctors"===E&&(0,b.jsx)(r,{onSectionChange:F}),"/admin/appointments"===E&&(0,b.jsx)(s,{ref:J}),"/admin/chats"===E&&(0,b.jsx)(v,{}),"/admin/prescriptions"===E&&(0,b.jsx)(t,{}),"/admin/ads"===E&&(0,b.jsx)(u,{ref:K})]})]})]}):null}let q=c.default.forwardRef(({onSectionChange:a,searchQuery:d},f)=>{let{showNotification:g}=(0,e.useNotification)(),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(!0),[q,r]=(0,c.useState)("all"),s=d||"",[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)("name"),[x,y]=(0,c.useState)("asc"),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)({}),[L,M]=(0,c.useState)({name:"",email:"",password:"",phone:"",role:"patient",address:""});(0,c.useImperativeHandle)(f,()=>({openCreateModal:()=>{M({name:"",email:"",password:"",phone:"",role:"patient",address:""}),I(!0),G(!1),C(null),E(!0)}})),(0,c.useEffect)(()=>{N()},[]),(0,c.useEffect)(()=>{O()},[k,q,s,v,x]);let N=async()=>{try{p(!0);let a=await i.default.get("/admin/users?limit=100");l(a.data.users||[]),n(a.data.users||[])}catch(a){console.error("Error fetching users:",a)}finally{p(!1)}},O=()=>{let a=[...k];if("all"!==q&&(a=a.filter(a=>a.role===q.slice(0,-1))),s.trim()){let b=s.toLowerCase();a=a.filter(a=>a.name?.toLowerCase().includes(b)||a.email?.toLowerCase().includes(b)||a.phone?.toLowerCase().includes(b))}a.sort((a,b)=>{let c=a[v]||"",d=b[v]||"";return("string"==typeof c&&(c=c.toLowerCase(),d=d.toLowerCase()),"asc"===x)?c>d?1:-1:c<d?1:-1}),n(a)},P=a=>{v===a?y("asc"===x?"desc":"asc"):(w(a),y("asc"))},Q=async(a,b)=>{if(confirm(`Are you sure you want to delete ${b}? This action cannot be undone.`))try{await i.default.delete(`/admin/users/${a}`),g("User deleted successfully","success"),A(null),N()}catch(a){g(a.response?.data?.message||"Failed to delete user","error")}},R=async()=>{if(0===t.length)return void g("Please select users to delete","warning");if(confirm(`Are you sure you want to delete ${t.length} user(s)? This action cannot be undone.`))try{await i.default.delete("/admin/users",{data:{userIds:t}}),g(`${t.length} user(s) deleted successfully`,"success"),u([]),N()}catch(a){g(a.response?.data?.message||"Failed to delete users","error")}},S=async(a,b=!1)=>{try{let c=(await i.default.get(`/users/${a.id}`)).data.user;C(c),K({name:c.name||"",email:c.email||"",phone:c.phone||"",address:c.address||"",role:c.role||"",dateOfBirth:c.dateOfBirth?new Date(c.dateOfBirth).toISOString().split("T")[0]:"",weight:c.weight||"",height:c.height||"",homePhone:c.homePhone||"",workPhone:c.workPhone||"",allergies:Array.isArray(c.allergies)?c.allergies:[],bloodPressure:c.bloodPressure||"",pulse:c.pulse||""}),G(b),E(!0),A(null)}catch(a){g(a.response?.data?.message||"Failed to fetch user details","error")}},T=async()=>{try{if(!L.name||!L.email||!L.password)return void g("Name, email, and password are required","error");await i.default.post("/auth/register",{name:L.name,email:L.email,password:L.password,phone:L.phone||null,role:L.role,address:L.address||null}),g("User created successfully","success"),I(!1),E(!1),M({name:"",email:"",password:"",phone:"",role:"patient",address:""}),N()}catch(a){g(a.response?.data?.message||"Failed to create user","error")}},U=async()=>{try{let a={...J,allergies:Array.isArray(J.allergies)?J.allergies:[]};await i.default.put(`/admin/users/${B.id}`,a),g("User updated successfully","success"),G(!1),E(!1),C(null),N()}catch(a){g(a.response?.data?.message||"Failed to update user","error")}};if(o)return(0,b.jsx)(h.default,{});let V=m.length,W=k.length;return(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-6 border-b border-gray-200 dark:border-gray-700",children:[(0,b.jsxs)("button",{onClick:()=>r("all"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"all"===q?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["All Users (",W,")"]}),(0,b.jsxs)("button",{onClick:()=>r("patients"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"patients"===q?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Patients (",k.filter(a=>"patient"===a.role).length,")"]}),(0,b.jsxs)("button",{onClick:()=>r("doctors"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"doctors"===q?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Doctors (",k.filter(a=>"doctor"===a.role).length,")"]}),(0,b.jsxs)("button",{onClick:()=>r("admins"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"admins"===q?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Admins (",k.filter(a=>"admin"===a.role).length,")"]})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[V," users"]}),t.length>0&&(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.length," selected"]}),(0,b.jsx)("button",{onClick:R,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Delete Selected"})]})]}),(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden transition-colors",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left",children:(0,b.jsx)("input",{type:"checkbox",checked:t.length===m.length&&m.length>0,onChange:a=>{a.target.checked?u(m.map(a=>a.id)):u([])},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>P("name"),children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:["Name","name"===v&&(0,b.jsx)(j.FiChevronDown,{className:`text-xs transform ${"desc"===x?"rotate-180":""}`})]})}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>P("email"),children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:["Email","email"===v&&(0,b.jsx)(j.FiChevronDown,{className:`text-xs transform ${"desc"===x?"rotate-180":""}`})]})}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Phone"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>P("role"),children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:["Role","role"===v&&(0,b.jsx)(j.FiChevronDown,{className:`text-xs transform ${"desc"===x?"rotate-180":""}`})]})}),(0,b.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-800",children:0===m.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:"No users found"})}):m.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("input",{type:"checkbox",checked:t.includes(a.id),onChange:()=>{var b;return b=a.id,void(t.includes(b)?u(t.filter(a=>a!==b)):u([...t,b]))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white text-xs font-bold",children:a.name?.charAt(0)?.toUpperCase()||"U"}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:a.name||"N/A"})]})}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:a.email||"N/A"}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:a.phone||"-"}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-semibold ${(a=>{switch(a){case"admin":return"bg-purple-100 text-purple-800";case"doctor":return"bg-blue-100 text-blue-800";case"patient":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(a.role)}`,children:a.role||"N/A"})}),(0,b.jsxs)("td",{className:"px-6 py-4 text-right relative",children:[(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),A(z===a.id?null:a.id)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,b.jsx)(j.FiMoreVertical,{className:"text-gray-600"})}),z===a.id&&(0,b.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-2 z-50 transition-colors",children:[(0,b.jsxs)("button",{onClick:b=>{b.stopPropagation(),S(a,!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 transition-colors",children:[(0,b.jsx)(j.FiEye,{className:"text-base"}),"View Details"]}),(0,b.jsxs)("button",{onClick:b=>{b.stopPropagation(),S(a,!0)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 transition-colors",children:[(0,b.jsx)(j.FiEdit,{className:"text-base"}),"Edit"]}),(0,b.jsx)("div",{className:"border-t border-gray-200 my-2"}),(0,b.jsxs)("button",{onClick:b=>{b.stopPropagation(),Q(a.id,a.name)},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[(0,b.jsx)(j.FiTrash2,{className:"text-base"}),"Delete"]})]})]})]},a.id))})]})})}),z&&(0,b.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>A(null)}),D&&(B||H)&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col transition-colors",children:[(0,b.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-teal-50 to-indigo-50 dark:from-gray-800 dark:to-gray-800",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:H?"Create New User":F?"Edit User":"User Details"}),(0,b.jsx)("button",{onClick:()=>{E(!1),C(null),G(!1),I(!1)},className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,b.jsx)(j.FiX,{className:"text-xl text-gray-600 dark:text-gray-300"})})]})}),(0,b.jsx)("div",{className:"overflow-y-auto flex-1 p-6",children:H?(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name *"}),(0,b.jsx)("input",{type:"text",value:L.name,onChange:a=>M({...L,name:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),(0,b.jsx)("input",{type:"email",value:L.email,onChange:a=>M({...L,email:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password *"}),(0,b.jsx)("input",{type:"password",value:L.password,onChange:a=>M({...L,password:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone"}),(0,b.jsx)("input",{type:"tel",value:L.phone,onChange:a=>M({...L,phone:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role *"}),(0,b.jsxs)("select",{value:L.role,onChange:a=>M({...L,role:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors",children:[(0,b.jsx)("option",{value:"patient",children:"Patient"}),(0,b.jsx)("option",{value:"doctor",children:"Doctor"}),(0,b.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Address"}),(0,b.jsx)("textarea",{value:L.address,onChange:a=>M({...L,address:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors",rows:2})]})]}):(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),F?(0,b.jsx)("input",{type:"text",value:J.name,onChange:a=>K({...J,name:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors"}):(0,b.jsx)("p",{className:"text-gray-800 dark:text-gray-200",children:B?.name||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),F?(0,b.jsx)("input",{type:"email",value:J.email,onChange:a=>K({...J,email:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors"}):(0,b.jsx)("p",{className:"text-gray-800 dark:text-gray-200",children:B?.email||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone"}),F?(0,b.jsx)("input",{type:"tel",value:J.phone,onChange:a=>K({...J,phone:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors"}):(0,b.jsx)("p",{className:"text-gray-800 dark:text-gray-200",children:B?.phone||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role"}),F?(0,b.jsxs)("select",{value:J.role,onChange:a=>K({...J,role:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors",children:[(0,b.jsx)("option",{value:"patient",children:"Patient"}),(0,b.jsx)("option",{value:"doctor",children:"Doctor"}),(0,b.jsx)("option",{value:"admin",children:"Admin"})]}):(0,b.jsx)("p",{className:"text-gray-800 dark:text-gray-200",children:B?.role||"N/A"})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Address"}),F?(0,b.jsx)("textarea",{value:J.address,onChange:a=>K({...J,address:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors",rows:2}):(0,b.jsx)("p",{className:"text-gray-800 dark:text-gray-200",children:B?.address||"N/A"})]}),B&&"patient"===B.role&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date of Birth"}),F?(0,b.jsx)("input",{type:"date",value:J.dateOfBirth,onChange:a=>K({...J,dateOfBirth:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}):(0,b.jsx)("p",{className:"text-gray-800",children:B.dateOfBirth?new Date(B.dateOfBirth).toLocaleDateString():"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Weight"}),F?(0,b.jsx)("input",{type:"text",value:J.weight,onChange:a=>K({...J,weight:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}):(0,b.jsx)("p",{className:"text-gray-800",children:B.weight||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Height"}),F?(0,b.jsx)("input",{type:"text",value:J.height,onChange:a=>K({...J,height:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}):(0,b.jsx)("p",{className:"text-gray-800",children:B.height||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Blood Pressure"}),F?(0,b.jsx)("input",{type:"text",value:J.bloodPressure,onChange:a=>K({...J,bloodPressure:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}):(0,b.jsx)("p",{className:"text-gray-800",children:B.bloodPressure||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Pulse"}),F?(0,b.jsx)("input",{type:"text",value:J.pulse,onChange:a=>K({...J,pulse:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}):(0,b.jsx)("p",{className:"text-gray-800",children:B.pulse||"N/A"})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Allergies"}),F?(0,b.jsxs)("div",{className:"space-y-2",children:[J.allergies.map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:a,onChange:a=>{let b=[...J.allergies];b[c]=a.target.value,K({...J,allergies:b})},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}),(0,b.jsx)("button",{onClick:()=>{K({...J,allergies:J.allergies.filter((a,b)=>b!==c)})},className:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:(0,b.jsx)(j.FiX,{})})]},c)),(0,b.jsxs)("button",{onClick:()=>{K({...J,allergies:[...J.allergies,""]})},className:"px-3 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 text-sm",children:[(0,b.jsx)(j.FiPlus,{className:"inline mr-1"})," Add Allergy"]})]}):(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:Array.isArray(B.allergies)&&B.allergies.length>0?B.allergies.map((a,c)=>(0,b.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-sm",children:a},c)):(0,b.jsx)("p",{className:"text-gray-800",children:"None"})})]})]})]})}),(0,b.jsx)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex gap-4 transition-colors",children:H?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>{E(!1),I(!1),M({name:"",email:"",password:"",phone:"",role:"patient",address:""})},className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 font-medium text-gray-700 dark:text-gray-300 transition-colors",children:"Cancel"}),(0,b.jsx)("button",{onClick:T,className:"flex-1 px-4 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 font-medium transition-colors",children:"Create User"})]}):F?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>G(!1),className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 font-medium text-gray-700 dark:text-gray-300 transition-colors",children:"Cancel"}),(0,b.jsx)("button",{onClick:U,className:"flex-1 px-4 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 font-medium transition-colors",children:"Save Changes"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>{E(!1),C(null)},className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 font-medium text-gray-700 dark:text-gray-300 transition-colors",children:"Close"}),(0,b.jsx)("button",{onClick:()=>G(!0),className:"flex-1 px-4 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 font-medium transition-colors",children:"Edit"})]})})]})})]})});q.displayName="UsersManagementView";let r=({onSectionChange:a})=>{let{showNotification:d}=(0,e.useNotification)(),[f,g]=(0,c.useState)([]),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)("approved"),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)({}),[G,H]=(0,c.useState)([]);(0,c.useEffect)(()=>{J(),K(),I()},[]),(0,c.useEffect)(()=>{"approved"===o&&K()},[o]);let I=async()=>{try{let a=await i.default.get("/departments");H(a.data.departments||[])}catch(a){console.error("Error fetching departments:",a)}},J=async()=>{try{let a=await i.default.get("/doctors/admin/pending");g(a.data.doctors||[])}catch(a){console.error("Error fetching pending doctors:",a)}},K=async()=>{try{n(!0);let a=await i.default.get("/doctors/admin/approved?limit=100");l(a.data.doctors||[])}catch(a){console.error("Error fetching approved doctors:",a)}finally{n(!1)}},L=async a=>{try{await i.default.put(`/doctors/admin/${a}/approve`,{notes:u}),t(!1),r(null),v(""),z("Doctor approved successfully!"),x(!0),J(),K(),d("Doctor approved successfully!","success"),setTimeout(()=>{x(!1)},3e3)}catch(a){d(a.response?.data?.message||"Failed to approve doctor","error")}},M=async a=>{if(!u.trim())return void d("Please provide a reason for rejection","warning");if(confirm("Are you sure you want to reject this doctor application?"))try{await i.default.put(`/doctors/admin/${a}/reject`,{notes:u}),d("Doctor application rejected","info"),t(!1),r(null),v(""),J()}catch(a){d(a.response?.data?.message||"Failed to reject doctor","error")}},N=(a,b=!1)=>{let c={...a};if(c.availableDays&&"string"==typeof c.availableDays)try{c.availableDays=JSON.parse(c.availableDays)}catch(a){c.availableDays=[]}if(c.previousJobs&&"string"==typeof c.previousJobs)try{c.previousJobs=JSON.parse(c.previousJobs)}catch(a){c.previousJobs=[]}if(c.education&&"string"==typeof c.education)try{c.education=JSON.parse(c.education)}catch(a){c.education=[]}r({...c,_isApproved:b}),b&&F({departmentId:c.departmentId||"",specialization:c.specialization||"",experience:c.experience?.toString()||"",qualification:c.qualification||"",bio:c.bio||"",consultationFee:c.consultationFee?.toString()||"",availableFrom:c.availableFrom||"",availableTo:c.availableTo||"",availableDays:Array.isArray(c.availableDays)?c.availableDays:[],previousJobs:Array.isArray(c.previousJobs)?c.previousJobs:[],education:Array.isArray(c.education)?c.education:[]}),D(!1),t(!0)},O=async()=>{try{let a={...E,availableDays:JSON.stringify(E.availableDays),previousJobs:JSON.stringify(E.previousJobs),education:JSON.stringify(E.education)};await i.default.put(`/doctors/${q.id}`,a),d("Doctor updated successfully","success"),D(!1),t(!1),r(null),K()}catch(a){d(a.response?.data?.message||"Failed to update doctor","error")}};return m&&0===k.length?(0,b.jsx)(h.default,{}):(0,b.jsxs)("div",{className:"relative",children:[w&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-2xl p-8 max-w-md w-full mx-4 transform transition-all",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(j.FiCheck,{className:"text-3xl text-green-600"})}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Success!"}),(0,b.jsx)("p",{className:"text-lg text-gray-600 mb-6",children:y}),(0,b.jsx)("button",{onClick:()=>x(!1),className:"px-6 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors font-medium",children:"OK"})]})})}),(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-6 border-b border-gray-200 dark:border-gray-700",children:[(0,b.jsxs)("button",{onClick:()=>p("approved"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"approved"===o?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Approved Doctors (",k.length,")"]}),(0,b.jsxs)("button",{onClick:()=>p("pending"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"pending"===o?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Pending Doctors (",f.length,")"]})]})}),"pending"===o&&0===f.length&&(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center transition-colors",children:(0,b.jsx)("p",{className:"text-gray-600 text-lg",children:"No pending doctor applications"})}),"pending"===o&&f.length>0&&(0,b.jsx)("div",{className:"space-y-4",children:f.map(a=>(0,b.jsx)("div",{onClick:()=>N(a),className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg transition-all cursor-pointer text-gray-900 dark:text-gray-100",children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{className:"flex items-start gap-4 flex-1",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white text-xl font-bold overflow-hidden",children:a.profileImage?(0,b.jsx)("img",{src:`data:${a.profileImageMimeType||"image/jpeg"};base64,${a.profileImage}`,alt:a.user?.name,className:"w-full h-full rounded-full object-cover"}):a.user?.name?.charAt(0)?.toUpperCase()||"D"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:a.user?.name}),(0,b.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-semibold",children:"Pending"})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:a.specialization}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a.department?.name}),(0,b.jsxs)("div",{className:"flex gap-4 mt-3 text-xs text-gray-500",children:[(0,b.jsxs)("span",{children:[a.experience||0," years exp"]}),(0,b.jsx)("span",{children:"•"}),(0,b.jsxs)("span",{children:["BDT ",a.consultationFee||0," fee"]}),(0,b.jsx)("span",{children:"•"}),(0,b.jsx)("span",{children:a.user?.email})]})]})]}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),N(a)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors ml-4",children:"View Details"})]})},a.id))}),"approved"===o&&0===k.length&&(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center transition-colors",children:(0,b.jsx)("p",{className:"text-gray-600 text-lg",children:"No approved doctors yet"})}),"approved"===o&&k.length>0&&(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden transition-colors",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Doctor Name"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Specialization"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Department"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Email"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Phone"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Experience"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Consultation Fee"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-800",children:k.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white text-xs font-bold",children:a.user?.name?.charAt(0)?.toUpperCase()||"D"}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-900",children:a.user?.name||"N/A"})]})}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:a.specialization||"N/A"}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:a.department?.name||"N/A"}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:a.user?.email||"N/A"}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:a.user?.phone||"-"}),(0,b.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-600",children:[a.experience||0," years"]}),(0,b.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-600",children:["BDT ",a.consultationFee||0]}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:"Approved"})}),(0,b.jsxs)("td",{className:"px-6 py-4 text-right relative",children:[(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),B(A===a.id?null:a.id)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,b.jsx)(j.FiMoreVertical,{className:"text-gray-600"})}),A===a.id&&(0,b.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-2 z-50 transition-colors",children:[(0,b.jsxs)("button",{onClick:b=>{b.stopPropagation(),N(a,!0),B(null)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 transition-colors",children:[(0,b.jsx)(j.FiEye,{className:"text-base"}),"View Details"]}),(0,b.jsxs)("button",{onClick:b=>{b.stopPropagation();let c={...a};if(c.availableDays&&"string"==typeof c.availableDays)try{c.availableDays=JSON.parse(c.availableDays)}catch(a){c.availableDays=[]}if(c.previousJobs&&"string"==typeof c.previousJobs)try{c.previousJobs=JSON.parse(c.previousJobs)}catch(a){c.previousJobs=[]}if(c.education&&"string"==typeof c.education)try{c.education=JSON.parse(c.education)}catch(a){c.education=[]}N(c,!0),D(!0),B(null)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 transition-colors",children:[(0,b.jsx)(j.FiEdit,{className:"text-base"}),"Edit"]}),(0,b.jsx)("div",{className:"border-t border-gray-200 my-2"}),(0,b.jsxs)("button",{onClick:b=>{b.stopPropagation(),confirm(`Are you sure you want to delete ${a.user?.name}?`)&&d("Delete functionality coming soon","info"),B(null)},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[(0,b.jsx)(j.FiTrash2,{className:"text-base"}),"Delete"]})]})]})]},a.id))})]})})}),A&&(0,b.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>B(null)}),s&&q&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col transition-colors",children:[(0,b.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-teal-50 to-indigo-50 dark:from-gray-800 dark:to-gray-800",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:C?"Edit Doctor Profile":q._isApproved?"Doctor Details":"Review Doctor Application"}),(0,b.jsx)("button",{onClick:()=>{t(!1),r(null),v("")},className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:(0,b.jsx)(j.FiX,{className:"text-xl text-gray-600"})})]})}),(0,b.jsxs)("div",{className:"overflow-y-auto flex-1 p-6",children:[(0,b.jsxs)("div",{className:"flex items-start gap-6 mb-6 pb-6 border-b border-gray-200",children:[(0,b.jsx)("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white text-3xl font-bold overflow-hidden",children:q.profileImage?(0,b.jsx)("img",{src:`data:${q.profileImageMimeType||"image/jpeg"};base64,${q.profileImage}`,alt:q.user?.name,className:"w-full h-full rounded-full object-cover"}):q.user?.name?.charAt(0)?.toUpperCase()||"D"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("h3",{className:"text-3xl font-bold text-gray-800",children:q.user?.name}),q._isApproved?(0,b.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-semibold",children:"Approved"}):(0,b.jsx)("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-semibold",children:"Pending Approval"})]}),(0,b.jsx)("p",{className:"text-lg text-gray-600 mb-1",children:q.specialization}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[q.department?.icon," ",q.department?.name]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6 mb-6 pb-6 border-b border-gray-200",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),(0,b.jsx)("p",{className:"font-semibold text-gray-800",children:q.user?.email})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Phone"}),(0,b.jsx)("p",{className:"font-semibold text-gray-800",children:q.user?.phone||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-500 mb-1",children:"Department"}),C&&q._isApproved?(0,b.jsxs)("select",{value:E.departmentId,onChange:a=>F({...E,departmentId:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500",children:[(0,b.jsx)("option",{value:"",children:"Select Department"}),G.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.icon," ",a.name]},a.id))]}):(0,b.jsxs)("p",{className:"font-semibold text-gray-800",children:[q.department?.icon," ",q.department?.name||"N/A"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-500 mb-1",children:"Specialization"}),C&&q._isApproved?(0,b.jsx)("input",{type:"text",value:E.specialization,onChange:a=>F({...E,specialization:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}):(0,b.jsx)("p",{className:"font-semibold text-gray-800",children:q.specialization||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-500 mb-1",children:"Experience"}),C&&q._isApproved?(0,b.jsx)("input",{type:"number",value:E.experience,onChange:a=>F({...E,experience:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}):(0,b.jsxs)("p",{className:"font-semibold text-gray-800",children:[q.experience||0," years"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-500 mb-1",children:"Consultation Fee"}),C&&q._isApproved?(0,b.jsx)("input",{type:"number",value:E.consultationFee,onChange:a=>F({...E,consultationFee:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}):(0,b.jsxs)("p",{className:"font-semibold text-gray-800",children:["BDT ",q.consultationFee||0]})]})]}),(0,b.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[(0,b.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Qualifications"}),C&&q._isApproved?(0,b.jsx)("textarea",{value:E.qualification,onChange:a=>F({...E,qualification:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500",rows:4}):(0,b.jsx)("p",{className:"text-gray-700 whitespace-pre-line",children:q.qualification||"N/A"})]}),(0,b.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[(0,b.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Bio"}),C&&q._isApproved?(0,b.jsx)("textarea",{value:E.bio,onChange:a=>F({...E,bio:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500",rows:4}):(0,b.jsx)("p",{className:"text-gray-700",children:q.bio||"N/A"})]}),(0,b.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[(0,b.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Previous Jobs"}),C&&q._isApproved?(0,b.jsxs)("div",{className:"space-y-3",children:[(E.previousJobs||[]).map((a,c)=>(0,b.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[(0,b.jsx)("input",{type:"text",value:a.position||"",onChange:a=>{let b=[...E.previousJobs||[]];b[c]={...b[c],position:a.target.value},F({...E,previousJobs:b})},placeholder:"Position",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}),(0,b.jsx)("input",{type:"text",value:a.hospital||"",onChange:a=>{let b=[...E.previousJobs||[]];b[c]={...b[c],hospital:a.target.value},F({...E,previousJobs:b})},placeholder:"Hospital",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}),(0,b.jsx)("input",{type:"text",value:a.years||"",onChange:a=>{let b=[...E.previousJobs||[]];b[c]={...b[c],years:a.target.value},F({...E,previousJobs:b})},placeholder:"Years",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}),(0,b.jsxs)("button",{type:"button",onClick:()=>{F({...E,previousJobs:(E.previousJobs||[]).filter((a,b)=>b!==c)})},className:"text-red-600 hover:text-red-700 text-sm",children:[(0,b.jsx)(j.FiX,{className:"inline mr-1"})," Remove"]})]},c)),(0,b.jsxs)("button",{type:"button",onClick:()=>{F({...E,previousJobs:[...E.previousJobs||[],{position:"",hospital:"",years:""}]})},className:"px-3 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 text-sm",children:[(0,b.jsx)(j.FiPlus,{className:"inline mr-1"})," Add Job"]})]}):(0,b.jsx)("div",{className:"space-y-3",children:q.previousJobs&&Array.isArray(q.previousJobs)&&q.previousJobs.length>0?q.previousJobs.map((a,c)=>(0,b.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-800",children:a.position}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.hospital}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:a.years})]},c)):(0,b.jsx)("p",{className:"text-gray-500",children:"No previous jobs listed"})})]}),(0,b.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[(0,b.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Education"}),C&&q._isApproved?(0,b.jsxs)("div",{className:"space-y-3",children:[(E.education||[]).map((a,c)=>(0,b.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[(0,b.jsx)("input",{type:"text",value:a.degree||"",onChange:a=>{let b=[...E.education||[]];b[c]={...b[c],degree:a.target.value},F({...E,education:b})},placeholder:"Degree",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}),(0,b.jsx)("input",{type:"text",value:a.institution||"",onChange:a=>{let b=[...E.education||[]];b[c]={...b[c],institution:a.target.value},F({...E,education:b})},placeholder:"Institution",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}),(0,b.jsx)("input",{type:"text",value:a.year||"",onChange:a=>{let b=[...E.education||[]];b[c]={...b[c],year:a.target.value},F({...E,education:b})},placeholder:"Year",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}),(0,b.jsxs)("button",{type:"button",onClick:()=>{F({...E,education:(E.education||[]).filter((a,b)=>b!==c)})},className:"text-red-600 hover:text-red-700 text-sm",children:[(0,b.jsx)(j.FiX,{className:"inline mr-1"})," Remove"]})]},c)),(0,b.jsxs)("button",{type:"button",onClick:()=>{F({...E,education:[...E.education||[],{degree:"",institution:"",year:""}]})},className:"px-3 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 text-sm",children:[(0,b.jsx)(j.FiPlus,{className:"inline mr-1"})," Add Education"]})]}):(0,b.jsx)("div",{className:"space-y-3",children:q.education&&Array.isArray(q.education)&&q.education.length>0?q.education.map((a,c)=>(0,b.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-800",children:a.degree}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.institution}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:a.year})]},c)):(0,b.jsx)("p",{className:"text-gray-500",children:"No education listed"})})]}),(0,b.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[(0,b.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Availability"}),C&&q._isApproved?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-500 mb-2",children:"Available Days:"}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:(E.availableDays||[]).includes(a),onChange:b=>{let c=E.availableDays||[];b.target.checked?F({...E,availableDays:[...c,a]}):F({...E,availableDays:c.filter(b=>b!==a)})},className:"rounded border-gray-300 text-teal-600 focus:ring-teal-500"}),(0,b.jsx)("span",{className:"text-sm text-gray-700",children:a})]},a))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-500 mb-1",children:"From"}),(0,b.jsx)("input",{type:"time",value:E.availableFrom||"",onChange:a=>F({...E,availableFrom:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-500 mb-1",children:"To"}),(0,b.jsx)("input",{type:"time",value:E.availableTo||"",onChange:a=>F({...E,availableTo:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"})]})]})]}):(0,b.jsxs)(b.Fragment,{children:[q.availableDays&&Array.isArray(q.availableDays)&&q.availableDays.length>0&&(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Available Days:"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:q.availableDays.map((a,c)=>(0,b.jsx)("span",{className:"px-3 py-1 bg-teal-100 text-teal-800 rounded-full text-sm font-medium",children:a},c))})]}),q.availableFrom&&q.availableTo&&(0,b.jsxs)("p",{className:"font-semibold text-gray-800",children:["Time: ",q.availableFrom," - ",q.availableTo]}),(!q.availableDays||0===q.availableDays.length)&&!q.availableFrom&&(0,b.jsx)("p",{className:"text-gray-500",children:"No availability set"})]})]}),(q.hasCV||q.cvResume)&&(0,b.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[(0,b.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"CV/Resume"}),(0,b.jsxs)("a",{href:`${process.env.NEXT_PUBLIC_API_URL||"http://localhost:5000"}/api/doctors/${q.id}/cv`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors font-medium",children:[(0,b.jsx)(j.FiFileText,{className:"text-lg"}),"Download CV/Resume ",q.cvResumeFileName&&`(${q.cvResumeFileName})`]})]}),!q._isApproved&&(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Notes (Optional for approval, Required for rejection)"}),(0,b.jsx)("textarea",{value:u,onChange:a=>v(a.target.value),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"Add any notes or comments about this doctor application..."})]})]}),(0,b.jsx)("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex gap-4",children:q._isApproved?C?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>{D(!1)},className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-100 font-medium text-gray-700 transition-colors",children:"Cancel"}),(0,b.jsx)("button",{onClick:O,className:"flex-1 px-4 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 font-medium transition-colors",children:"Save Changes"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>{t(!1),r(null),v(""),D(!1)},className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-100 font-medium text-gray-700 transition-colors",children:"Close"}),(0,b.jsx)("button",{onClick:()=>D(!0),className:"flex-1 px-4 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 font-medium transition-colors",children:"Edit"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>{t(!1),r(null),v("")},className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-100 font-medium text-gray-700 transition-colors",children:"Close"}),(0,b.jsxs)("button",{onClick:()=>M(q.id),className:"flex-1 px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center justify-center gap-2 font-medium transition-colors",children:[(0,b.jsx)(j.FiX,{className:"text-lg"}),"Reject Application"]}),(0,b.jsxs)("button",{onClick:()=>L(q.id),className:"flex-1 px-4 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 flex items-center justify-center gap-2 font-medium transition-colors",children:[(0,b.jsx)(j.FiCheck,{className:"text-lg"}),"Approve Doctor"]})]})})]})})]})},s=c.default.forwardRef((a,d)=>{let{showNotification:f}=(0,e.useNotification)(),[g,m]=(0,c.useState)([]),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)("all"),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)([]),[F,G]=(0,c.useState)({patientId:"",doctorId:"",appointmentDate:"",appointmentTime:"",reason:"",status:"pending"});(0,c.useImperativeHandle)(d,()=>({openCreateModal:async()=>{try{let[a,b]=await Promise.all([i.default.get("/admin/users?limit=1000"),i.default.get("/doctors?limit=1000")]);C(a.data.users?.filter(a=>"patient"===a.role)||[]),E(b.data.doctors||[])}catch(a){console.error("Error fetching users/doctors:",a)}G({patientId:"",doctorId:"",appointmentDate:"",appointmentTime:"",reason:"",status:"pending"}),A(!0)}})),(0,c.useEffect)(()=>{H()},[]),(0,c.useEffect)(()=>{I()},[g,r,t]);let H=async()=>{try{q(!0);let a=await i.default.get("/appointments?limit=1000");m(a.data.appointments||[]),o(a.data.appointments||[])}catch(a){console.error("Error fetching appointments:",a),f("Failed to fetch appointments","error")}finally{q(!1)}},I=()=>{let a=[...g];if("all"!==r&&(a=a.filter(a=>a.status===r)),t.trim()){let b=t.toLowerCase();a=a.filter(a=>a.patient?.name?.toLowerCase().includes(b)||a.doctor?.user?.name?.toLowerCase().includes(b)||a.patient?.email?.toLowerCase().includes(b)||a.reason?.toLowerCase().includes(b))}o(a)},J=async(a,b)=>{try{await i.default.put(`/appointments/${a}/status`,{status:b}),f("Appointment status updated successfully","success"),H(),y(!1)}catch(a){f(a.response?.data?.message||"Failed to update appointment status","error")}},K=a=>{switch(a){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return p?(0,b.jsx)(h.default,{}):(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"mb-6 flex gap-4",children:(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("input",{type:"text",placeholder:"Search by patient name, doctor name, or email...",value:t,onChange:a=>u(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"})})}),(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-6 border-b border-gray-200 dark:border-gray-700",children:[(0,b.jsxs)("button",{onClick:()=>s("all"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"all"===r?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["All (",g.length,")"]}),(0,b.jsxs)("button",{onClick:()=>s("pending"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"pending"===r?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Pending (",g.filter(a=>"pending"===a.status).length,")"]}),(0,b.jsxs)("button",{onClick:()=>s("confirmed"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"confirmed"===r?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Confirmed (",g.filter(a=>"confirmed"===a.status).length,")"]}),(0,b.jsxs)("button",{onClick:()=>s("completed"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"completed"===r?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Completed (",g.filter(a=>"completed"===a.status).length,")"]}),(0,b.jsxs)("button",{onClick:()=>s("cancelled"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"cancelled"===r?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Cancelled (",g.filter(a=>"cancelled"===a.status).length,")"]})]})}),(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden transition-colors",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Patient"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Doctor"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Date & Time"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Reason"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-800",children:0===n.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:"No appointments found"})}):n.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:a.patient?.name||"N/A"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a.patient?.email||"N/A"})]})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("p",{className:"text-sm text-gray-900",children:["Dr. ",a.doctor?.user?.name||"N/A"]})}),(0,b.jsxs)("td",{className:"px-6 py-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-900",children:(0,k.format)((0,l.parseISO)(a.appointmentDate),"MMM dd, yyyy")}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a.appointmentTime})]}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("p",{className:"text-sm text-gray-900",children:a.reason||"-"})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-semibold ${K(a.status)}`,children:a.status||"N/A"})}),(0,b.jsx)("td",{className:"px-6 py-4 text-right",children:(0,b.jsx)("button",{onClick:()=>{w(a),y(!0)},className:"px-3 py-1 text-sm text-teal-600 hover:text-teal-700 font-medium",children:"View Details"})})]},a.id))})]})})}),x&&v&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col transition-colors",children:[(0,b.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-teal-50 to-indigo-50 dark:from-gray-800 dark:to-gray-800",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Appointment Details"}),(0,b.jsx)("button",{onClick:()=>{y(!1),w(null)},className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:(0,b.jsx)(j.FiX,{className:"text-xl text-gray-600"})})]})}),(0,b.jsx)("div",{className:"overflow-y-auto flex-1 p-6",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Patient Name"}),(0,b.jsx)("p",{className:"font-semibold text-gray-800",children:v.patient?.name||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Patient Email"}),(0,b.jsx)("p",{className:"font-semibold text-gray-800",children:v.patient?.email||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Doctor Name"}),(0,b.jsxs)("p",{className:"font-semibold text-gray-800",children:["Dr. ",v.doctor?.user?.name||"N/A"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Date"}),(0,b.jsx)("p",{className:"font-semibold text-gray-800",children:(0,k.format)((0,l.parseISO)(v.appointmentDate),"MMMM dd, yyyy")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Time"}),(0,b.jsx)("p",{className:"font-semibold text-gray-800",children:v.appointmentTime||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),(0,b.jsx)("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-semibold ${K(v.status)}`,children:v.status||"N/A"})]})]}),v.reason&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Reason"}),(0,b.jsx)("p",{className:"font-semibold text-gray-800",children:v.reason})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Update Status"}),(0,b.jsx)("div",{className:"flex gap-2 flex-wrap",children:["pending","confirmed","completed","cancelled"].map(a=>(0,b.jsx)("button",{onClick:()=>J(v.id,a),disabled:v.status===a,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${v.status===a?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-teal-600 text-white hover:bg-teal-700"}`,children:a.charAt(0).toUpperCase()+a.slice(1)},a))})]})]})}),(0,b.jsx)("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:(0,b.jsx)("button",{onClick:()=>{y(!1),w(null)},className:"w-full px-4 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 font-medium transition-colors",children:"Close"})})]})})]})});s.displayName="AppointmentsManagementView";let t=()=>{let{showNotification:a}=(0,e.useNotification)(),[d,f]=(0,c.useState)([]),[g,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(!1);(0,c.useEffect)(()=>{v()},[]),(0,c.useEffect)(()=>{w()},[d,p]);let v=async()=>{try{o(!0);let a=await i.default.get("/prescriptions?limit=1000");f(a.data.prescriptions||[]),m(a.data.prescriptions||[])}catch(b){console.error("Error fetching prescriptions:",b),a("Failed to fetch prescriptions","error")}finally{o(!1)}},w=()=>{let a=[...d];if(p.trim()){let b=p.toLowerCase();a=a.filter(a=>a.patient?.name?.toLowerCase().includes(b)||a.patient?.email?.toLowerCase().includes(b)||a.doctor?.user?.name?.toLowerCase().includes(b)||a.diagnosis?.toLowerCase().includes(b))}m(a)};return n?(0,b.jsx)(h.default,{}):(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)("input",{type:"text",placeholder:"Search by patient name, doctor name, email, or diagnosis...",value:p,onChange:a=>q(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"})}),(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden transition-colors",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Patient"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Doctor"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Diagnosis"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Medicines"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),(0,b.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-800",children:0===g.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:"No prescriptions found"})}):g.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:a.patient?.name||"N/A"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a.patient?.email||"N/A"})]})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("p",{className:"text-sm text-gray-900",children:["Dr. ",a.doctor?.user?.name||"N/A"]})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("p",{className:"text-sm text-gray-900",children:a.diagnosis||"-"})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.medicines&&Array.isArray(a.medicines)?`${a.medicines.length} medicine(s)`:"N/A"})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("p",{className:"text-sm text-gray-900",children:a.createdAt?(0,k.format)((0,l.parseISO)(a.createdAt),"MMM dd, yyyy"):"N/A"})}),(0,b.jsx)("td",{className:"px-6 py-4 text-right",children:(0,b.jsx)("button",{onClick:()=>{s(a),u(!0)},className:"px-3 py-1 text-sm text-teal-600 hover:text-teal-700 font-medium",children:"View Details"})})]},a.id))})]})})}),t&&r&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col transition-colors",children:[(0,b.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-teal-50 to-indigo-50 dark:from-gray-800 dark:to-gray-800",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Prescription Details"}),(0,b.jsx)("button",{onClick:()=>{u(!1),s(null)},className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:(0,b.jsx)(j.FiX,{className:"text-xl text-gray-600"})})]})}),(0,b.jsx)("div",{className:"overflow-y-auto flex-1 p-6",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Patient Name"}),(0,b.jsx)("p",{className:"font-semibold text-gray-800",children:r.patient?.name||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Patient Email"}),(0,b.jsx)("p",{className:"font-semibold text-gray-800",children:r.patient?.email||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Doctor Name"}),(0,b.jsxs)("p",{className:"font-semibold text-gray-800",children:["Dr. ",r.doctor?.user?.name||"N/A"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Date"}),(0,b.jsx)("p",{className:"font-semibold text-gray-800",children:r.createdAt?(0,k.format)((0,l.parseISO)(r.createdAt),"MMMM dd, yyyy"):"N/A"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Diagnosis"}),(0,b.jsx)("p",{className:"font-semibold text-gray-800",children:r.diagnosis||"N/A"})]}),r.medicines&&Array.isArray(r.medicines)&&r.medicines.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Medicines"}),(0,b.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:r.medicines.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsxs)("span",{className:"text-teal-600 font-semibold",children:[c+1,"."]}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-800",children:a.name||"N/A"}),(a.dosage||a.frequency)&&(0,b.jsxs)("p",{className:"text-xs text-gray-600",children:[a.dosage&&`Dosage: ${a.dosage}`,a.dosage&&a.frequency&&" • ",a.frequency&&`Frequency: ${a.frequency}`]})]})]},c))})]}),r.tests&&Array.isArray(r.tests)&&r.tests.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Tests"}),(0,b.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:r.tests.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsxs)("span",{className:"text-teal-600 font-semibold",children:[c+1,"."]}),(0,b.jsx)("p",{className:"text-sm text-gray-800",children:a.name||"N/A"})]},c))})]}),r.rules&&Array.isArray(r.rules)&&r.rules.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Rules"}),(0,b.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:r.rules.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsxs)("span",{className:"text-teal-600 font-semibold",children:[c+1,"."]}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-800",children:a.title||"N/A"}),a.description&&(0,b.jsx)("p",{className:"text-xs text-gray-600",children:a.description})]})]},c))})]}),r.instructions&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Instructions"}),(0,b.jsx)("p",{className:"text-sm text-gray-800 whitespace-pre-line",children:r.instructions})]})]})}),(0,b.jsx)("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:(0,b.jsx)("button",{onClick:()=>{u(!1),s(null)},className:"w-full px-4 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 font-medium transition-colors",children:"Close"})})]})})]})},u=c.default.forwardRef((a,d)=>{let{showNotification:f}=(0,e.useNotification)(),[g,m]=(0,c.useState)([]),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)("all"),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)({title:"",description:"",imageUrl:"",link:"",targetAudience:"all",isActive:!0,startDate:"",endDate:""});(0,c.useImperativeHandle)(d,()=>({openCreateModal:()=>{E({title:"",description:"",imageUrl:"",link:"",targetAudience:"all",isActive:!0,startDate:"",endDate:""}),C(!1),w(null),A(!0)}})),(0,c.useEffect)(()=>{F()},[]),(0,c.useEffect)(()=>{G()},[g,t,r]);let F=async()=>{try{q(!0);let a=await i.default.get("/admin/ads?limit=1000");m(a.data.ads||[]),o(a.data.ads||[])}catch(a){console.error("Error fetching ads:",a),f("Failed to fetch advertisements","error")}finally{q(!1)}},G=()=>{let a=[...g];if("active"===t?a=a.filter(a=>!0===a.isActive):"inactive"===t&&(a=a.filter(a=>!1===a.isActive)),r.trim()){let b=r.toLowerCase();a=a.filter(a=>a.title?.toLowerCase().includes(b)||a.description?.toLowerCase().includes(b))}o(a)},H=async()=>{try{await i.default.post("/ads",D),f("Advertisement created successfully","success"),A(!1),E({title:"",description:"",imageUrl:"",link:"",targetAudience:"all",isActive:!0,startDate:"",endDate:""}),F()}catch(a){f(a.response?.data?.message||"Failed to create advertisement","error")}},I=async()=>{try{await i.default.put(`/ads/${v.id}`,D),f("Advertisement updated successfully","success"),y(!1),C(!1),w(null),F()}catch(a){f(a.response?.data?.message||"Failed to update advertisement","error")}},J=async a=>{if(confirm("Are you sure you want to delete this advertisement?"))try{await i.default.delete(`/ads/${a}`),f("Advertisement deleted successfully","success"),F()}catch(a){f(a.response?.data?.message||"Failed to delete advertisement","error")}};return p?(0,b.jsx)(h.default,{}):(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("input",{type:"text",placeholder:"Search advertisements by title or description...",value:r,onChange:a=>s(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"})}),(0,b.jsxs)("button",{onClick:()=>{E({title:"",description:"",imageUrl:"",link:"",targetAudience:"all",isActive:!0,startDate:"",endDate:""}),A(!0)},className:"ml-4 px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors font-medium flex items-center gap-2",children:[(0,b.jsx)(j.FiPlus,{className:"text-lg"}),"Create Ad"]})]}),(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-6 border-b border-gray-200 dark:border-gray-700",children:[(0,b.jsxs)("button",{onClick:()=>u("all"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"all"===t?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["All (",g.length,")"]}),(0,b.jsxs)("button",{onClick:()=>u("active"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"active"===t?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Active (",g.filter(a=>a.isActive).length,")"]}),(0,b.jsxs)("button",{onClick:()=>u("inactive"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"inactive"===t?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Inactive (",g.filter(a=>!a.isActive).length,")"]})]})}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:0===n.length?(0,b.jsx)("div",{className:"col-span-full bg-white rounded-lg shadow-md p-8 text-center",children:(0,b.jsx)("p",{className:"text-gray-600 text-lg",children:"No advertisements found"})}):n.map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[a.imageUrl&&(0,b.jsx)("div",{className:"w-full h-48 bg-gray-200 overflow-hidden",children:(0,b.jsx)("img",{src:a.imageUrl,alt:a.title,className:"w-full h-full object-cover",onError:a=>{a.target.style.display="none"}})}),(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-800 flex-1",children:a.title}),(0,b.jsx)("span",{className:`ml-2 px-2 py-1 rounded-full text-xs font-semibold ${a.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:a.isActive?"Active":"Inactive"})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:a.description}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-3",children:[(0,b.jsxs)("span",{children:["Target: ",a.targetAudience||"all"]}),(0,b.jsxs)("span",{children:["Clicks: ",a.clickCount||0]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>{w(a),E({title:a.title||"",description:a.description||"",imageUrl:a.imageUrl||"",link:a.link||"",targetAudience:a.targetAudience||"all",isActive:void 0===a.isActive||a.isActive,startDate:a.startDate?(0,k.format)((0,l.parseISO)(a.startDate),"yyyy-MM-dd"):"",endDate:a.endDate?(0,k.format)((0,l.parseISO)(a.endDate),"yyyy-MM-dd"):""}),C(!0),y(!0)},className:"flex-1 px-3 py-2 text-sm bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>J(a.id),className:"px-3 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:(0,b.jsx)(j.FiTrash2,{})})]})]})]},a.id))}),(z||x)&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col transition-colors",children:[(0,b.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-teal-50 to-indigo-50 dark:from-gray-800 dark:to-gray-800",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:B?"Edit Advertisement":"Create Advertisement"}),(0,b.jsx)("button",{onClick:()=>{y(!1),A(!1),C(!1),w(null)},className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:(0,b.jsx)(j.FiX,{className:"text-xl text-gray-600"})})]})}),(0,b.jsx)("div",{className:"overflow-y-auto flex-1 p-6",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title *"}),(0,b.jsx)("input",{type:"text",value:D.title,onChange:a=>E({...D,title:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500",placeholder:"Enter advertisement title"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),(0,b.jsx)("textarea",{value:D.description,onChange:a=>E({...D,description:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500",rows:3,placeholder:"Enter advertisement description"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Image URL"}),(0,b.jsx)("input",{type:"url",value:D.imageUrl,onChange:a=>E({...D,imageUrl:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500",placeholder:"https://example.com/image.jpg"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Link URL"}),(0,b.jsx)("input",{type:"url",value:D.link,onChange:a=>E({...D,link:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500",placeholder:"https://example.com"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Target Audience"}),(0,b.jsxs)("select",{value:D.targetAudience,onChange:a=>E({...D,targetAudience:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500",children:[(0,b.jsx)("option",{value:"all",children:"All"}),(0,b.jsx)("option",{value:"patient",children:"Patients"}),(0,b.jsx)("option",{value:"doctor",children:"Doctors"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),(0,b.jsxs)("select",{value:D.isActive?"true":"false",onChange:a=>E({...D,isActive:"true"===a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500",children:[(0,b.jsx)("option",{value:"true",children:"Active"}),(0,b.jsx)("option",{value:"false",children:"Inactive"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Date"}),(0,b.jsx)("input",{type:"date",value:D.startDate,onChange:a=>E({...D,startDate:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"End Date"}),(0,b.jsx)("input",{type:"date",value:D.endDate,onChange:a=>E({...D,endDate:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"})]})]})]})}),(0,b.jsxs)("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex gap-4",children:[(0,b.jsx)("button",{onClick:()=>{y(!1),A(!1),C(!1),w(null)},className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-100 font-medium text-gray-700 transition-colors",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>{B?I():H()},disabled:!D.title.trim(),className:`flex-1 px-4 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 font-medium transition-colors ${!D.title.trim()?"opacity-50 cursor-not-allowed":""}`,children:B?"Update":"Create"})]})]})})]})});u.displayName="AdsManagementView";let v=()=>{let{user:a}=(0,d.useAuth)(),{showNotification:f}=(0,e.useNotification)(),[g,l]=(0,c.useState)([]),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)(0),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(!1),D=(0,c.useRef)(null),E=(0,c.useRef)(null);(0,c.useEffect)(()=>{a&&"admin"===a.role&&(F(),G(),I())},[a]),(0,c.useEffect)(()=>{if(a&&"admin"===a.role){let a=setInterval(()=>{F(),G(),p&&H(p.id),I()},2e3);return()=>clearInterval(a)}},[a,p]),(0,c.useEffect)(()=>(p&&(E.current&&clearInterval(E.current),E.current=setInterval(()=>{H(p.id),G(),I()},2e3)),()=>{E.current&&clearInterval(E.current)}),[p]),(0,c.useEffect)(()=>{D.current?.scrollIntoView({behavior:"smooth"})},[r]);let F=async()=>{try{let a=await i.default.get("/chat/users");l(a.data.users||[])}catch(a){console.error("Error fetching chat users:",a)}},G=async()=>{try{let a=await i.default.get("/chat/conversations");o(a.data.conversations||[])}catch(a){console.error("Error fetching conversations:",a)}},H=async a=>{try{let b=await i.default.get(`/chat/messages/${a}`);s(b.data.messages||[])}catch(a){console.error("Error fetching messages:",a)}},I=async()=>{try{let a=await i.default.get("/chat/unread-count");y(a.data.unreadCount||0)}catch(a){console.error("Error fetching unread count:",a)}finally{w(!1)}},J=a=>{let b=n.find(b=>b.id===a.id);if(b)q(b),H(b.id),A(""),C(!1);else q({id:a.id,name:a.name,email:a.email,role:a.role,phone:a.phone,lastMessage:a.lastMessage||"No messages yet",lastMessageTime:a.lastMessageTime||new Date,unreadCount:a.unreadCount||0}),s([]);A(""),C(!1)},K=g.filter(a=>{let b=z.toLowerCase();return a.name.toLowerCase().includes(b)||a.email.toLowerCase().includes(b)||a.id.toLowerCase().includes(b)||a.phone&&a.phone.includes(b)||a.role.toLowerCase().includes(b)}),L=async a=>{if(a.preventDefault(),t.trim()&&p)try{await i.default.post("/chat/send",{receiverId:p.id,content:t.trim()}),u(""),setTimeout(()=>{H(p.id),G(),F(),I()},100)}catch(a){console.error("Error sending message:",a),f(a.response?.data?.message||"Failed to send message","error")}},M=a=>a?.split(" ")?.map(a=>a[0])?.join("")?.toUpperCase()?.slice(0,2)||"U";return v?(0,b.jsx)(h.default,{}):(0,b.jsx)("div",{className:"flex flex-col h-[calc(100vh-200px)] bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden transition-colors",children:(0,b.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,b.jsxs)("div",{className:"w-1/3 border-r border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 flex flex-col transition-colors",children:[(0,b.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-3",children:["All Users ",x>0&&`(${x})`]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(j.FiSearch,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,b.jsx)("input",{type:"text",value:z,onChange:a=>{A(a.target.value),C(a.target.value.length>0)},onFocus:()=>{z.length>0&&C(!0)},onBlur:()=>{setTimeout(()=>C(!1),200)},placeholder:"Search by ID, name, email...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors"}),B&&K.length>0&&(0,b.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-60 overflow-y-auto transition-colors",children:K.slice(0,5).map(a=>(0,b.jsx)("div",{onMouseDown:b=>{b.preventDefault(),J(a)},className:"px-4 py-3 hover:bg-teal-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-0 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white font-bold text-sm",children:M(a.name)}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 capitalize",children:a.role}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["ID: ",a.id.slice(0,8),"..."]})]}),a.unreadCount>0&&(0,b.jsx)("span",{className:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full",children:a.unreadCount})]})},a.id))})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===g.length?(0,b.jsx)("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:(0,b.jsx)("p",{children:"No users available"})}):K.map(a=>{let c=n.find(b=>b.id===a.id),d=p?.id===a.id,e=c||a;return(0,b.jsx)("div",{onClick:()=>J(a),className:`p-4 border-b border-gray-100 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${d?"bg-teal-50 dark:bg-gray-700 border-l-4 border-teal-600":""}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white font-bold",children:M(a.name)}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-100 truncate",children:a.name}),e.lastMessageTime&&(0,b.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:(0,m.formatDistanceToNow)(new Date(e.lastMessageTime),{addSuffix:!0})})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate mt-1",children:e.lastMessage||"No messages yet"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["ID: ",a.id.slice(0,8),"..."]}),(0,b.jsx)("span",{className:"text-xs text-gray-400",children:"•"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:a.role})]})]}),a.unreadCount>0&&(0,b.jsx)("span",{className:"bg-teal-600 text-white text-xs px-2 py-1 rounded-full",children:a.unreadCount})]})},a.id)})})]}),(0,b.jsx)("div",{className:"flex-1 flex flex-col bg-gray-50 dark:bg-gray-900 transition-colors",children:p?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 flex items-center justify-between transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white font-bold",children:M(p.name)}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-100",children:p.name}),(0,b.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:p.role}),(0,b.jsxs)("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["ID: ",p.id.slice(0,8),"..."]})]})]})}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.map(c=>{let d=c.senderId===a?.id;return(0,b.jsx)("div",{className:`flex ${d?"justify-end":"justify-start"}`,children:(0,b.jsxs)("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-2xl ${d?"bg-teal-600 text-white":"bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 border border-gray-200 dark:border-gray-600"} transition-colors`,children:[!d&&(0,b.jsx)("p",{className:"text-xs font-semibold mb-1 opacity-75",children:c.sender.name}),(0,b.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:c.content}),(0,b.jsxs)("div",{className:`flex items-center gap-1 mt-1 ${d?"justify-end":"justify-start"}`,children:[(0,b.jsx)("p",{className:`text-xs ${d?"text-blue-100":"text-gray-500 dark:text-gray-400"}`,children:(0,k.format)(new Date(c.createdAt),"h:mm a")}),d&&(0,b.jsx)("div",{className:"flex items-center",children:c.isRead?(0,b.jsxs)("span",{className:"text-blue-300 text-xs ml-1 flex items-center gap-0.5",children:[(0,b.jsxs)("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,b.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}),(0,b.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})]}),(0,b.jsx)("span",{className:"text-[10px]",children:"Seen"})]}):(0,b.jsx)("span",{className:"text-gray-300 text-xs ml-1",children:(0,b.jsx)("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})]})]})},c.id)}),(0,b.jsx)("div",{ref:D})]}),(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-4 transition-colors",children:(0,b.jsxs)("form",{onSubmit:L,className:"flex items-center gap-2",children:[(0,b.jsx)("button",{type:"button",className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,b.jsx)(j.FiPaperclip,{className:"text-xl text-gray-600 dark:text-gray-300"})}),(0,b.jsx)("input",{type:"text",value:t,onChange:a=>u(a.target.value),placeholder:"Type a message...",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-full focus:ring-2 focus:ring-teal-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors"}),(0,b.jsx)("button",{type:"submit",disabled:!t.trim(),className:"p-2 bg-teal-600 text-white rounded-full hover:bg-teal-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,b.jsx)(j.FiSend,{className:"text-xl"})})]})})]}):(0,b.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(j.FiMessageCircle,{className:"text-6xl text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"Select a user to start chatting"}),(0,b.jsx)("p",{className:"text-gray-400 dark:text-gray-500 text-sm mt-2",children:"Search by ID, name, email, or phone"})]})})})]})})};a.s(["default",()=>p])}];

//# sourceMappingURL=OneDrive_Desktop_mediwise_frontend_app_admin_dashboard_page_tsx_5c5c97f7._.js.map