{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/components/Loading.tsx"],"sourcesContent":["const Loading = () => {\r\n  return (\r\n    <div className=\"flex items-center justify-center min-h-screen\">\r\n      <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-600\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loading;\r\n\r\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,UAAU;IACd,qBACE,6RAAC;QAAI,WAAU;kBACb,cAAA,6RAAC;YAAI,WAAU;;;;;;;;;;;AAGrB;uCAEe","debugId":null}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/components/PatientSidebar.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { useAuth } from '@/context/AuthContext';\nimport { \n  FiChevronRight,\n  FiHome, \n  FiUser, \n  FiCalendar, \n  FiFileText, \n  FiUsers, \n  FiMessageCircle,\n  FiLogOut,\n  FiX,\n  FiMenu\n} from 'react-icons/fi';\nimport { useState, useEffect } from 'react';\n\ninterface PatientSidebarProps {\n  user: any;\n  logout: () => void;\n}\n\nconst PatientSidebar = ({ user, logout }: PatientSidebarProps) => {\n  const pathname = usePathname();\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n\n  const getInitials = (name: string) => {\n    return name\n      ?.split(' ')\n      ?.map((n: string) => n[0])\n      ?.join('')\n      ?.toUpperCase()\n      ?.slice(0, 2) || 'U';\n  };\n\n  const menu = [\n    { href: '/patient/dashboard', label: 'Dashboard', icon: FiHome },\n    { href: '/patient/doctors', label: 'Doctors', icon: FiUsers },\n    { href: '/patient/appointments', label: 'Appointments', icon: FiCalendar },\n    { href: '/patient/chat', label: 'Chats', icon: FiMessageCircle },\n    { href: '/patient/prescriptions', label: 'Prescriptions', icon: FiFileText },\n    { href: '/patient/profile', label: 'My Profile', icon: FiUser },\n  ];\n\n  // Close mobile menu when route changes\n  useEffect(() => {\n    setMobileMenuOpen(false);\n  }, [pathname]);\n\n  return (\n    <>\n      {/* Mobile Menu Button */}\n      <button\n        onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\n        className=\"lg:hidden fixed top-4 left-4 z-50 p-2 bg-teal-600 text-white rounded-lg shadow-lg\"\n      >\n        {mobileMenuOpen ? <FiX className=\"text-2xl\" /> : <FiMenu className=\"text-2xl\" />}\n      </button>\n\n      {/* Mobile Overlay */}\n      {mobileMenuOpen && (\n        <div\n          className=\"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40\"\n          onClick={() => setMobileMenuOpen(false)}\n        />\n      )}\n\n      {/* Sidebar */}\n      <div className={`\n        ${mobileMenuOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'}\n        ${sidebarCollapsed ? 'w-16' : 'w-64'} \n        bg-teal-600 text-white transition-all duration-300 \n        fixed left-0 top-0 h-full z-40 lg:z-20\n      `}>\n        <div className=\"p-4 h-full flex flex-col overflow-y-auto\">\n          {/* Collapse/Expand Button - Desktop only */}\n          <button\n            onClick={() => setSidebarCollapsed(!sidebarCollapsed)}\n            className=\"hidden lg:flex w-full items-center justify-center p-2 hover:bg-teal-700 rounded-lg transition-colors mb-4\"\n          >\n            <FiChevronRight className={`text-xl transform transition-transform ${sidebarCollapsed ? '' : 'rotate-180'}`} />\n          </button>\n\n          {/* Close Button - Mobile only */}\n          <button\n            onClick={() => setMobileMenuOpen(false)}\n            className=\"lg:hidden w-full flex items-center justify-end p-2 hover:bg-teal-700 rounded-lg transition-colors mb-4\"\n          >\n            <FiX className=\"text-xl\" />\n          </button>\n\n        {/* Logo */}\n        {!sidebarCollapsed && (\n          <div className=\"flex items-center justify-center mb-6\">\n            <div className=\"flex items-center gap-2\">\n              <img src=\"/logo.png\" alt=\"MediWise Logo\" className=\"w-10 h-10 object-contain\" onError={(e) => {\n                const target = e.target as HTMLImageElement;\n                target.style.display = 'none';\n              }} />\n              <span className=\"text-xl font-bold\">MediWise</span>\n            </div>\n          </div>\n        )}\n        {sidebarCollapsed && (\n          <div className=\"flex items-center justify-center mb-6\">\n            <img src=\"/logo.png\" alt=\"MediWise Logo\" className=\"w-10 h-10 object-contain\" onError={(e) => {\n              const target = e.target as HTMLImageElement;\n              target.style.display = 'none';\n            }} />\n          </div>\n        )}\n\n        {/* Patient Profile Section */}\n        {!sidebarCollapsed && (\n          <div className=\"mb-6 pb-6 border-b border-teal-500\">\n            <div className=\"flex items-center gap-3 mb-3\">\n              <div className=\"w-10 h-10 rounded-full bg-white bg-opacity-20 flex items-center justify-center text-sm font-semibold\">\n                {getInitials(user?.name || 'P')}\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-semibold truncate\">{user?.name}</p>\n                <p className=\"text-xs text-teal-200 capitalize\">Patient</p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Navigation Links */}\n        <nav className=\"space-y-1 flex-1\">\n          {menu.map((item) => {\n            const Icon = item.icon;\n            const isActive = pathname === item.href;\n            return (\n              <Link\n                key={item.href}\n                href={item.href}\n                className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${\n                  isActive\n                    ? 'bg-teal-700 text-white font-semibold'\n                    : 'text-teal-100 hover:bg-teal-700 hover:text-white'\n                }`}\n              >\n                <Icon className=\"text-xl flex-shrink-0\" />\n                {!sidebarCollapsed && <span className=\"text-sm\">{item.label}</span>}\n              </Link>\n            );\n          })}\n        </nav>\n\n        {/* Logout Button - Bottom and Centered */}\n        {!sidebarCollapsed && (\n          <div className=\"mt-auto pt-4 pb-4\">\n            <button \n              onClick={logout}\n              className=\"w-full flex items-center justify-center gap-3 px-4 py-3 rounded-lg text-teal-100 hover:bg-teal-700 transition-colors\"\n            >\n              <FiLogOut className=\"text-xl\" />\n              <span className=\"text-sm font-semibold\">LOGOUT</span>\n            </button>\n          </div>\n        )}\n        {sidebarCollapsed && (\n          <div className=\"mt-auto pt-4 pb-4\">\n            <button \n              onClick={logout}\n              className=\"w-full flex items-center justify-center p-3 rounded-lg text-teal-100 hover:bg-teal-700 transition-colors\"\n            >\n              <FiLogOut className=\"text-xl\" />\n            </button>\n          </div>\n        )}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default PatientSidebar;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 377, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/app/patient/chat/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState, useRef, useCallback, useMemo } from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useNotification } from '@/context/NotificationContext';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport Loading from '@/components/Loading';\nimport PatientSidebar from '@/components/PatientSidebar';\nimport api from '@/lib/api';\nimport { format, formatDistanceToNow } from 'date-fns';\nimport { FiSend, FiPaperclip, FiMessageCircle, FiSearch, FiBell } from 'react-icons/fi';\n\nexport default function PatientChatPage() {\n  const { user, loading: authLoading, logout } = useAuth();\n  const { showNotification } = useNotification();\n  const router = useRouter();\n  const [allUsers, setAllUsers] = useState<any[]>([]);\n  const [conversations, setConversations] = useState<any[]>([]);\n  const [selectedConversation, setSelectedConversation] = useState<any>(null);\n  const [messages, setMessages] = useState<any[]>([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const pollingIntervalRef = useRef<NodeJS.Timeout | null>(null);\n\n  useEffect(() => {\n    if (!authLoading && (!user || user.role !== 'patient')) {\n      router.push('/login');\n    }\n  }, [user, authLoading, router]);\n\n  const scrollToBottom = useCallback(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, []);\n\n  const fetchChatUsers = useCallback(async () => {\n    try {\n      const response = await api.get('/chat/users');\n      // Include doctors and admins - patients can chat with both\n      const users = (response.data.users || []).filter((u: any) => u.role === 'doctor' || u.role === 'admin');\n      setAllUsers(users);\n    } catch (error) {\n      console.error('Error fetching chat users:', error);\n    }\n  }, []);\n\n  const fetchConversations = useCallback(async () => {\n    try {\n      const response = await api.get('/chat/conversations');\n      const newConversations = response.data.conversations || [];\n      console.log('üìã Fetched conversations:', newConversations.length);\n      console.log('üìã Conversations data:', newConversations.map((c: any) => ({\n        id: c.id,\n        name: c.name,\n        lastMessage: c.lastMessage,\n        unreadCount: c.unreadCount,\n        lastMessageTime: c.lastMessageTime\n      })));\n      \n      // Sort conversations by lastMessageTime (newest first) before setting\n      const sortedConversations = [...newConversations].sort((a: any, b: any) => {\n        // Get timestamps, handling null/undefined properly\n        const timeA = a.lastMessageTime \n          ? (new Date(a.lastMessageTime).getTime() || 0)\n          : 0;\n        const timeB = b.lastMessageTime \n          ? (new Date(b.lastMessageTime).getTime() || 0)\n          : 0;\n        \n        // Newest first (larger timestamp = more recent)\n        if (timeB !== timeA) {\n          return timeB - timeA;\n        }\n        // If same time, sort by name\n        return (a.name || '').localeCompare(b.name || '');\n      });\n      \n      // Log sorted conversations for debugging\n      console.log('üìä Sorted conversations (newest first):', sortedConversations.map((c: any) => ({\n        name: c.name,\n        lastMessageTime: c.lastMessageTime,\n        timestamp: c.lastMessageTime ? new Date(c.lastMessageTime).getTime() : 0,\n        timeAgo: c.lastMessageTime ? formatDistanceToNow(new Date(c.lastMessageTime), { addSuffix: true }) : 'N/A'\n      })));\n      \n      // Always update conversations - this will trigger re-render and show new messages\n      setConversations(sortedConversations);\n      \n      // If there are new conversations that weren't in the list before, log them\n      if (conversations.length > 0) {\n        const newIds = new Set(newConversations.map((c: any) => c.id));\n        const oldIds = new Set(conversations.map((c: any) => c.id));\n        const added = newConversations.filter((c: any) => !oldIds.has(c.id));\n        if (added.length > 0) {\n          console.log('üÜï New conversations added:', added.map((c: any) => c.name));\n        }\n      }\n    } catch (error) {\n      console.error('‚ùå Error fetching conversations:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, []); // Remove conversations dependency to avoid infinite loop\n\n  const fetchMessages = useCallback(async (userId: string, preserveTempMessages = false) => {\n    try {\n      console.log('üîÑ Fetching messages for user:', userId, 'preserveTemp:', preserveTempMessages);\n      const response = await api.get(`/chat/messages/${userId}`);\n      const fetchedMessages = response.data.messages || [];\n      console.log('‚úÖ Fetched messages for user', userId, ':', fetchedMessages.length, 'messages');\n      console.log('üì® Messages data:', fetchedMessages.map((m: any) => ({ \n        id: m.id, \n        content: m.content?.substring(0, 30) || 'empty', \n        senderId: m.senderId, \n        receiverId: m.receiverId,\n        createdAt: m.createdAt\n      })));\n      \n      if (preserveTempMessages) {\n        // Keep temporary messages that haven't been saved yet\n        setMessages((prev) => {\n          const tempMessages = prev.filter((msg) => msg.id.startsWith('temp-'));\n          const realMessageIds = new Set(fetchedMessages.map((m: any) => m.id));\n          const tempToKeep = tempMessages.filter((msg) => {\n            // Keep temp message if we don't have a real message with same content yet\n            return !fetchedMessages.some((m: any) => \n              m.content === msg.content && \n              m.senderId === msg.senderId && \n              Math.abs(new Date(m.createdAt).getTime() - new Date(msg.createdAt).getTime()) < 5000\n            );\n          });\n          const combined = [...fetchedMessages, ...tempToKeep].sort((a, b) => \n            new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime()\n          );\n          console.log('üìä Combined messages:', combined.length, '(real:', fetchedMessages.length, 'temp:', tempToKeep.length, ')');\n          return combined;\n        });\n      } else {\n        // Remove any temporary messages (optimistic updates) when real messages arrive\n        console.log('üìù Setting messages directly:', fetchedMessages.length);\n        setMessages(fetchedMessages);\n      }\n      \n      // Scroll to bottom after fetching messages\n      setTimeout(() => scrollToBottom(), 150);\n    } catch (error: any) {\n      console.error('‚ùå Error fetching messages:', error);\n      console.error('Error response:', error.response?.data);\n      console.error('Error status:', error.response?.status);\n    }\n  }, [scrollToBottom]);\n\n  const fetchUnreadCount = useCallback(async () => {\n    try {\n      const response = await api.get('/chat/unread-count');\n      setUnreadCount(response.data.count || 0);\n    } catch (error) {\n      console.error('Error fetching unread count:', error);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (user && user.role === 'patient') {\n      fetchChatUsers();\n      fetchConversations();\n      fetchUnreadCount();\n    }\n  }, [user, fetchChatUsers, fetchConversations, fetchUnreadCount]);\n  \n  // Separate effect to handle conversation updates without causing infinite loops\n  useEffect(() => {\n    if (selectedConversation && conversations.length > 0) {\n      const updated = conversations.find((c: any) => c.id === selectedConversation.id);\n      if (updated) {\n        // Check if there are new messages or unread count changed\n        const hasNewMessage = updated.lastMessage !== selectedConversation.lastMessage;\n        const hasNewUnread = updated.unreadCount !== selectedConversation.unreadCount;\n        const hasNewTime = updated.lastMessageTime !== selectedConversation.lastMessageTime;\n        \n        console.log('üîç Checking conversation update:', {\n          conversationId: selectedConversation.id,\n          hasNewMessage,\n          hasNewUnread,\n          hasNewTime,\n          oldLastMessage: selectedConversation.lastMessage,\n          newLastMessage: updated.lastMessage,\n          oldLastTime: selectedConversation.lastMessageTime,\n          newLastTime: updated.lastMessageTime\n        });\n        \n        if (hasNewMessage || hasNewUnread || hasNewTime) {\n          console.log('üÜï Conversation updated, refreshing messages...');\n          setSelectedConversation(updated);\n          // Fetch messages to get the latest - FORCE FETCH\n          console.log('üîÑ Force fetching messages due to conversation update');\n          fetchMessages(selectedConversation.id, false).then(() => {\n            console.log('‚úÖ Messages refreshed after conversation update');\n          }).catch((err) => {\n            console.error('‚ùå Error refreshing messages:', err);\n          });\n        } else {\n          // Still update the conversation object to keep it in sync\n          setSelectedConversation(updated);\n        }\n      } else {\n        // Conversation not found in updated list - might be a new conversation\n        console.log('‚ö†Ô∏è Selected conversation not found in updated conversations list');\n      }\n    }\n  }, [conversations, selectedConversation?.id, fetchMessages]);\n\n  // Optimized polling: Update users, conversations, and messages every 2 seconds for better real-time updates\n  useEffect(() => {\n    if (user && user.role === 'patient') {\n      // Poll for chat users and conversations even when no conversation is selected\n      const globalPollInterval = setInterval(() => {\n        console.log('=== POLLING START ===', new Date().toISOString());\n        fetchChatUsers();\n        fetchConversations();\n        fetchUnreadCount();\n        if (selectedConversation?.id) {\n          console.log('üîÑ Polling: Fetching messages for conversation:', selectedConversation.id);\n          fetchMessages(selectedConversation.id, false).then(() => {\n            console.log('‚úÖ Polling: Messages fetched successfully');\n          }).catch((err) => {\n            console.error('‚ùå Polling: Error fetching messages:', err);\n          });\n        } else {\n          console.log('‚è∏Ô∏è Polling: No conversation selected, skipping message fetch');\n        }\n        console.log('=== POLLING END ===');\n      }, 2000); // Reduced to 2 seconds for better real-time experience\n\n      return () => {\n        clearInterval(globalPollInterval);\n      };\n    }\n  }, [user, selectedConversation?.id, fetchChatUsers, fetchConversations, fetchUnreadCount, fetchMessages]); // Include all dependencies\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // Fetch messages when selectedConversation changes\n  useEffect(() => {\n    if (selectedConversation && selectedConversation.id) {\n      console.log('üîÑ Selected conversation changed, fetching messages for:', selectedConversation.id);\n      fetchMessages(selectedConversation.id, false).then(() => {\n        console.log('‚úÖ Messages fetched after conversation selection');\n      }).catch((err) => {\n        console.error('‚ùå Error fetching messages after selection:', err);\n      });\n    } else {\n      // Clear messages when no conversation is selected\n      setMessages([]);\n    }\n  }, [selectedConversation?.id, fetchMessages]);\n\n  const handleSelectConversation = useCallback((conversation: any) => {\n    setSelectedConversation(conversation);\n    fetchMessages(conversation.id);\n    setSearchQuery('');\n    setShowSuggestions(false);\n  }, [fetchMessages]);\n\n  const handleSelectUser = useCallback((user: any) => {\n    const existingConversation = conversations.find(c => c.id === user.id);\n    if (existingConversation) {\n      handleSelectConversation(existingConversation);\n    } else {\n      const newConversation = {\n        id: user.id,\n        name: user.name,\n        email: user.email,\n        role: user.role,\n        phone: user.phone,\n        lastMessage: user.lastMessage || 'No messages yet',\n        lastMessageTime: user.lastMessageTime || new Date(),\n        unreadCount: user.unreadCount || 0,\n      };\n      setSelectedConversation(newConversation);\n      // Fetch messages immediately when selecting a new user\n      fetchMessages(user.id);\n    }\n    setSearchQuery('');\n    setShowSuggestions(false);\n  }, [conversations, handleSelectConversation, fetchMessages]);\n\n  // Memoize filtered users to avoid recalculating on every render\n  const filteredUsers = useMemo(() => {\n    if (!searchQuery.trim()) return [];\n    const query = searchQuery.toLowerCase();\n    return allUsers.filter((user: any) =>\n      user.name.toLowerCase().includes(query) ||\n      user.email.toLowerCase().includes(query)\n    );\n  }, [allUsers, searchQuery]);\n\n  const handleSendMessage = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!newMessage.trim() || !selectedConversation) return;\n\n    const messageContent = newMessage.trim();\n    const tempId = `temp-${Date.now()}`;\n    \n    // Optimistically add message to UI immediately\n    const optimisticMessage = {\n      id: tempId,\n      content: messageContent,\n      senderId: user.id,\n      receiverId: selectedConversation.id,\n      createdAt: new Date().toISOString(),\n      isRead: false,\n      sender: {\n        id: user.id,\n        name: user.name,\n        email: user.email,\n      },\n    };\n    \n    setMessages((prev) => [...prev, optimisticMessage]);\n    setNewMessage('');\n    \n    // Scroll to bottom immediately\n    setTimeout(() => scrollToBottom(), 50);\n\n    try {\n      const response = await api.post('/chat/send', {\n        receiverId: selectedConversation.id,\n        content: messageContent,\n      });\n      \n      console.log('Message sent successfully:', response.data);\n      \n      // Immediately update the conversation in the list to move it to top\n      const now = new Date().toISOString();\n      setConversations((prev) => {\n        const updated = prev.map((conv: any) => \n          conv.id === selectedConversation.id\n            ? { ...conv, lastMessage: messageContent, lastMessageTime: now }\n            : conv\n        );\n        // Re-sort by lastMessageTime (newest first)\n        return updated.sort((a: any, b: any) => {\n          const timeA = a.lastMessageTime ? new Date(a.lastMessageTime).getTime() : 0;\n          const timeB = b.lastMessageTime ? new Date(b.lastMessageTime).getTime() : 0;\n          return timeB - timeA;\n        });\n      });\n      \n      // Also update selected conversation\n      setSelectedConversation((prev: any) => \n        prev ? { ...prev, lastMessage: messageContent, lastMessageTime: now } : prev\n      );\n      \n      // Fetch real messages immediately (preserve temp messages in case backend is slow)\n      fetchMessages(selectedConversation.id, true);\n      fetchConversations(); // This will sync with backend\n      fetchChatUsers();\n      fetchUnreadCount();\n      \n      // Also fetch again after a delay to ensure we get the persisted message\n      setTimeout(() => {\n        fetchMessages(selectedConversation.id, false); // Now remove temp messages\n        fetchConversations(); // Sync with backend again\n      }, 1000);\n    } catch (error) {\n      console.error('Error sending message:', error);\n      // Remove optimistic message on error\n      setMessages((prev) => prev.filter((msg) => msg.id !== tempId));\n      setNewMessage(messageContent);\n      showNotification('Failed to send message', 'error');\n    }\n  };\n\n  const getInitials = (name: string) => {\n    return name\n      ?.split(' ')\n      ?.map((n: string) => n[0])\n      ?.join('')\n      ?.toUpperCase()\n      ?.slice(0, 2) || 'U';\n  };\n\n  if (authLoading || loading) {\n    return <Loading />;\n  }\n\n  if (!user || user.role !== 'patient') {\n    return null;\n  }\n\n  return (\n    <div className=\"flex min-h-screen bg-gray-50\">\n      <PatientSidebar user={user} logout={logout} />\n      <main className=\"w-full lg:ml-64 flex-1 transition-all duration-300 flex flex-col h-screen\">\n        {/* Modern Header with Simple Color */}\n        <header className=\"bg-teal-600 text-white shadow-xl\">\n          <div className=\"px-4 sm:px-6 lg:px-8 py-4 sm:py-6\">\n            <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\n              <div>\n                <h1 className=\"text-2xl sm:text-3xl font-bold mb-2\">Messages</h1>\n                <p className=\"text-sm sm:text-base text-teal-100\">Chat with doctors and get support</p>\n              </div>\n              <div className=\"flex items-center gap-2 sm:gap-3\">\n                {unreadCount > 0 && (\n                  <div className=\"px-4 py-2 bg-red-500 text-white rounded-xl font-bold shadow-lg\">\n                    {unreadCount} New\n                  </div>\n                )}\n                <div className=\"w-12 h-12 rounded-xl bg-white text-teal-600 flex items-center justify-center font-bold shadow-lg ring-2 ring-white ring-opacity-50\">\n                  {getInitials(user?.name || 'P')}\n                </div>\n              </div>\n            </div>\n          </div>\n        </header>\n\n        {/* Chat Container */}\n        <div className=\"flex-1 flex flex-col lg:flex-row overflow-hidden\">\n          {/* Conversations List - Modern Design */}\n          <div className=\"w-full lg:w-1/3 border-r-0 lg:border-r-2 border-gray-200 bg-white flex flex-col\">\n            <div className=\"p-4 sm:p-6 border-b-2 border-gray-200 bg-gray-50\">\n              <h2 className=\"text-lg sm:text-xl font-bold text-gray-800 mb-4 flex items-center gap-2\">\n                <div className=\"w-10 h-10 rounded-xl bg-teal-100 flex items-center justify-center\">\n                  <FiMessageCircle className=\"text-teal-600\" />\n                </div>\n                Conversations {unreadCount > 0 && <span className=\"text-red-500\">({unreadCount})</span>}\n              </h2>\n              {/* Search Bar with Auto-suggestions - Modern Design */}\n              <div className=\"relative\">\n                <FiSearch className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 z-10\" />\n                <input\n                  type=\"text\"\n                  value={searchQuery}\n                  onChange={(e) => {\n                    setSearchQuery(e.target.value);\n                    setShowSuggestions(e.target.value.length > 0);\n                  }}\n                  onFocus={() => {\n                    if (searchQuery.length > 0) {\n                      setShowSuggestions(true);\n                    }\n                  }}\n                  onBlur={() => {\n                    setTimeout(() => setShowSuggestions(false), 200);\n                  }}\n                  placeholder=\"Search doctors...\"\n                  className=\"w-full pl-12 pr-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white shadow-lg\"\n                />\n                {showSuggestions && filteredUsers.length > 0 && (\n                  <div className=\"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto\">\n                    {filteredUsers.slice(0, 5).map((user: any) => (\n                      <div\n                        key={user.id}\n                        onMouseDown={(e) => {\n                          e.preventDefault();\n                          handleSelectUser(user);\n                        }}\n                        className=\"px-4 py-3 hover:bg-teal-50 cursor-pointer border-b border-gray-100 last:border-0\"\n                      >\n                        <div className=\"flex items-center gap-3\">\n                          <div className=\"w-10 h-10 rounded-full bg-teal-100 flex items-center justify-center text-teal-600 font-bold text-sm\">\n                            {getInitials(user.name)}\n                          </div>\n                          <div className=\"flex-1\">\n                            <p className=\"font-semibold text-gray-800\">{user.name}</p>\n                            <p className=\"text-xs text-gray-600 capitalize\">{user.role}</p>\n                            <p className=\"text-xs text-gray-500 mt-1\">ID: {user.id.slice(0, 8)}...</p>\n                          </div>\n                          {user.unreadCount > 0 && (\n                            <span className=\"bg-blue-600 text-white text-xs px-2 py-1 rounded-full\">\n                              {user.unreadCount}\n                            </span>\n                          )}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n            <div className=\"flex-1 overflow-y-auto\">\n              {/* Show conversations first (people who have sent/received messages), then other users */}\n              {(() => {\n                // Ensure conversations are sorted by lastMessageTime (newest first) before using\n                const sortedConversations = [...conversations].sort((a: any, b: any) => {\n                  const timeA = a.lastMessageTime \n                    ? (new Date(a.lastMessageTime).getTime() || 0)\n                    : 0;\n                  const timeB = b.lastMessageTime \n                    ? (new Date(b.lastMessageTime).getTime() || 0)\n                    : 0;\n                  return timeB - timeA; // Newest first\n                });\n                \n                // Combine conversations and users, prioritizing conversations\n                const allItems: any[] = [];\n                const conversationIds = new Set(sortedConversations.map((c: any) => c.id));\n                \n                // Add conversations first (already sorted by last message time) - NEW MESSAGES WILL APPEAR HERE\n                sortedConversations.forEach((conv: any) => {\n                  allItems.push({ ...conv, isConversation: true });\n                });\n                \n                // Add users who don't have conversations yet\n                allUsers.forEach((user: any) => {\n                  if (!conversationIds.has(user.id)) {\n                    allItems.push({ ...user, isConversation: false });\n                  }\n                });\n                \n                // Final sort: conversations by lastMessageTime (newest first), then users by name\n                allItems.sort((a, b) => {\n                  if (a.isConversation && b.isConversation) {\n                    // Get timestamps, handling null/undefined properly\n                    const timeA = a.lastMessageTime \n                      ? (new Date(a.lastMessageTime).getTime() || 0)\n                      : 0;\n                    const timeB = b.lastMessageTime \n                      ? (new Date(b.lastMessageTime).getTime() || 0)\n                      : 0;\n                    \n                    // Newest first (larger timestamp = more recent)\n                    if (timeB !== timeA) {\n                      return timeB - timeA;\n                    }\n                    // If same time, sort by name\n                    return (a.name || '').localeCompare(b.name || '');\n                  }\n                  if (a.isConversation && !b.isConversation) return -1;\n                  if (!a.isConversation && b.isConversation) return 1;\n                  return (a.name || '').localeCompare(b.name || '');\n                });\n                \n                // Final verification sort - ensure conversations are definitely sorted by newest first\n                const finalSortedItems = [...allItems].sort((a, b) => {\n                  if (a.isConversation && b.isConversation) {\n                    const timeA = a.lastMessageTime \n                      ? (new Date(a.lastMessageTime).getTime() || 0)\n                      : 0;\n                    const timeB = b.lastMessageTime \n                      ? (new Date(b.lastMessageTime).getTime() || 0)\n                      : 0;\n                    // Newest first\n                    return timeB - timeA;\n                  }\n                  if (a.isConversation && !b.isConversation) return -1;\n                  if (!a.isConversation && b.isConversation) return 1;\n                  return (a.name || '').localeCompare(b.name || '');\n                });\n                \n                // Debug: Log the final sorted list\n                console.log('üìã Final sorted conversation list:', finalSortedItems.filter((item: any) => item.isConversation).map((item: any) => ({\n                  name: item.name,\n                  lastMessageTime: item.lastMessageTime,\n                  timestamp: item.lastMessageTime ? new Date(item.lastMessageTime).getTime() : 0,\n                  timeAgo: item.lastMessageTime ? formatDistanceToNow(new Date(item.lastMessageTime), { addSuffix: true }) : 'N/A'\n                })));\n                \n                if (finalSortedItems.length === 0) {\n                  return (\n                    <div className=\"p-8 text-center text-gray-500\">\n                      <p>No users available</p>\n                    </div>\n                  );\n                }\n                \n                return finalSortedItems.map((item: any) => {\n                  const isSelected = selectedConversation?.id === item.id;\n                  const unreadCount = item.isConversation ? item.unreadCount : (item.unreadCount || 0);\n                  return (\n                    <div\n                      key={item.id}\n                      onClick={() => {\n                        if (item.isConversation) {\n                          handleSelectConversation(item);\n                        } else {\n                          handleSelectUser(item);\n                        }\n                      }}\n                      className={`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors ${\n                        isSelected ? 'bg-teal-50 border-l-4 border-teal-600' : ''\n                      } ${unreadCount > 0 ? 'bg-blue-50' : ''}`}\n                    >\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"w-12 h-12 rounded-full bg-teal-100 flex items-center justify-center text-teal-600 font-bold\">\n                          {getInitials(item.name)}\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-center justify-between\">\n                            <h3 className=\"font-semibold text-gray-800 truncate\">{item.name}</h3>\n                            {item.lastMessageTime && (\n                              <span className=\"text-xs text-gray-500\">\n                                {formatDistanceToNow(new Date(item.lastMessageTime), { addSuffix: true })}\n                              </span>\n                            )}\n                          </div>\n                          <p className=\"text-sm text-gray-600 truncate mt-1\">{item.lastMessage || 'No messages yet'}</p>\n                          <div className=\"flex items-center gap-2 mt-1\">\n                            <p className=\"text-xs text-gray-500\">ID: {item.id.slice(0, 8)}...</p>\n                            <span className=\"text-xs text-gray-400\">‚Ä¢</span>\n                            <p className=\"text-xs text-gray-500 capitalize\">{item.role}</p>\n                          </div>\n                        </div>\n                        {unreadCount > 0 && (\n                          <span className=\"bg-teal-600 text-white text-xs px-2 py-1 rounded-full font-bold\">\n                            {unreadCount}\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                  );\n                });\n              })()}\n            </div>\n          </div>\n\n          {/* Chat Area */}\n          <div className=\"hidden lg:flex flex-1 flex-col bg-gray-50\">\n          {selectedConversation ? (\n            <>\n              {/* Chat Header */}\n              <div className=\"bg-white border-b border-gray-200 p-4 flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-10 h-10 rounded-full bg-teal-100 flex items-center justify-center text-teal-600 font-bold\">\n                    {getInitials(selectedConversation.name)}\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold text-gray-800\">{selectedConversation.name}</h3>\n                    <p className=\"text-xs text-gray-500 capitalize\">{selectedConversation.role}</p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Messages */}\n              <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n                {/* Debug info */}\n                {process.env.NODE_ENV === 'development' && (\n                  <div className=\"text-xs text-gray-400 mb-2 p-2 bg-gray-100 rounded\">\n                    Messages: {messages.length} | Conversation: {selectedConversation?.name} | ID: {selectedConversation?.id?.slice(0, 8)}\n                  </div>\n                )}\n                {messages.length === 0 && (\n                  <div className=\"flex items-center justify-center h-full\">\n                    <div className=\"text-center text-gray-500\">\n                      <FiMessageCircle className=\"text-4xl mx-auto mb-2 opacity-50\" />\n                      <p>No messages yet. Start the conversation!</p>\n                    </div>\n                  </div>\n                )}\n                {messages.map((message, index) => {\n                  const isOwn = message.senderId === user.id;\n                  if (!message.id) {\n                    console.warn('‚ö†Ô∏è Message without ID:', message, 'at index:', index);\n                  }\n                  return (\n                    <div\n                      key={message.id || `msg-${index}-${message.createdAt}-${message.content?.substring(0, 10)}`}\n                      className={`flex ${isOwn ? 'justify-end' : 'justify-start'}`}\n                    >\n                      <div\n                        className={`max-w-xs lg:max-w-md px-4 py-2 rounded-2xl ${\n                          isOwn\n                            ? 'bg-teal-600 text-white'\n                            : 'bg-white text-gray-800 border border-gray-200'\n                        }`}\n                      >\n                        {!isOwn && message.sender && (\n                          <p className=\"text-xs font-semibold mb-1 opacity-75\">\n                            {message.sender.name || 'Unknown'}\n                          </p>\n                        )}\n                        <p className=\"text-sm whitespace-pre-wrap\">{message.content || '(empty message)'}</p>\n                        <div className={`flex items-center gap-1 mt-1 ${isOwn ? 'justify-end' : 'justify-start'}`}>\n                          <p className={`text-xs ${isOwn ? 'text-blue-100' : 'text-gray-500'}`}>\n                            {format(new Date(message.createdAt), 'h:mm a')}\n                          </p>\n                          {isOwn && (\n                            <div className=\"flex items-center\">\n                              {message.isRead ? (\n                                <span className=\"text-blue-300 text-xs ml-1 flex items-center gap-0.5\">\n                                  <svg className=\"w-3.5 h-3.5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                    <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                                    <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                                  </svg>\n                                  <span className=\"text-[10px]\">Seen</span>\n                                </span>\n                              ) : (\n                                <span className=\"text-gray-300 text-xs ml-1\">\n                                  <svg className=\"w-3.5 h-3.5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                    <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                                  </svg>\n                                </span>\n                              )}\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })}\n                <div ref={messagesEndRef} />\n              </div>\n\n              {/* Message Input */}\n              <div className=\"bg-white border-t border-gray-200 p-4\">\n                <form onSubmit={handleSendMessage} className=\"flex items-center gap-2\">\n                  <button\n                    type=\"button\"\n                    className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n                  >\n                    <FiPaperclip className=\"text-xl text-gray-600\" />\n                  </button>\n                  <input\n                    type=\"text\"\n                    value={newMessage}\n                    onChange={(e) => setNewMessage(e.target.value)}\n                    placeholder=\"Type a message...\"\n                    className=\"flex-1 px-4 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n                  />\n                  <button\n                    type=\"submit\"\n                    disabled={!newMessage.trim()}\n                    className=\"p-2 bg-teal-600 text-white rounded-full hover:bg-teal-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    <FiSend className=\"text-xl\" />\n                  </button>\n                </form>\n              </div>\n            </>\n          ) : (\n            <div className=\"flex-1 flex items-center justify-center\">\n              <div className=\"text-center\">\n                <FiMessageCircle className=\"text-6xl text-gray-300 mx-auto mb-4\" />\n                <p className=\"text-gray-500 text-lg\">Select a conversation to start chatting</p>\n              </div>\n            </div>\n          )}\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}