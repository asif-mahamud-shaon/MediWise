{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/components/Loading.tsx"],"sourcesContent":["const Loading = () => {\r\n  return (\r\n    <div className=\"flex items-center justify-center min-h-screen\">\r\n      <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-600\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loading;\r\n\r\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,UAAU;IACd,qBACE,6RAAC;QAAI,WAAU;kBACb,cAAA,6RAAC;YAAI,WAAU;;;;;;;;;;;AAGrB;uCAEe","debugId":null}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/components/DoctorSidebar.tsx"],"sourcesContent":["'use client';\r\n\r\nimport Link from 'next/link';\r\nimport { usePathname } from 'next/navigation';\r\nimport { \r\n  FiChevronRight,\r\n  FiHome, \r\n  FiUser, \r\n  FiCalendar, \r\n  FiFileText, \r\n  FiUsers, \r\n  FiMessageCircle,\r\n  FiLogOut\r\n} from 'react-icons/fi';\r\nimport { useState } from 'react';\r\nimport { formatDoctorName } from '@/utils/doctorName';\r\n\r\ninterface DoctorSidebarProps {\r\n  user: any;\r\n  logout: () => void;\r\n  qualification?: string;\r\n}\r\n\r\nconst DoctorSidebar = ({ user, logout, qualification }: DoctorSidebarProps) => {\r\n  const pathname = usePathname();\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n\r\n  const getInitials = (name: string) => {\r\n    return name\r\n      ?.split(' ')\r\n      ?.map((n: string) => n[0])\r\n      ?.join('')\r\n      ?.toUpperCase()\r\n      ?.slice(0, 2) || 'D';\r\n  };\r\n\r\n  const menu = [\r\n    { href: '/doctor/dashboard', label: 'Dashboard', icon: FiHome },\r\n    { href: '/doctor/appointments', label: 'Appointments', icon: FiCalendar },\r\n    { href: '/doctor/prescriptions', label: 'Prescriptions', icon: FiFileText },\r\n    { href: '/doctor/patients', label: 'Patients', icon: FiUsers },\r\n    { href: '/doctor/chat', label: 'Chats', icon: FiMessageCircle },\r\n    { href: '/doctor/profile', label: 'My Profile', icon: FiUser },\r\n  ];\r\n\r\n  return (\r\n    <div className={`${sidebarCollapsed ? 'w-16' : 'w-64'} bg-teal-600 text-white transition-all duration-300 fixed left-0 top-0 h-full z-20`}>\r\n      <div className=\"p-4\">\r\n        {/* Collapse/Expand Button */}\r\n        <button\r\n          onClick={() => setSidebarCollapsed(!sidebarCollapsed)}\r\n          className=\"w-full flex items-center justify-center p-2 hover:bg-teal-700 rounded-lg transition-colors mb-4\"\r\n        >\r\n          <FiChevronRight className={`text-xl transform transition-transform ${sidebarCollapsed ? '' : 'rotate-180'}`} />\r\n        </button>\r\n\r\n        {/* Medical Symbol / Logo */}\r\n        {!sidebarCollapsed && (\r\n          <div className=\"flex items-center justify-center mb-6\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-2xl\">ü©∫</span>\r\n              <span className=\"text-xl font-bold\">MediWise</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Doctor Profile Section */}\r\n        {!sidebarCollapsed && (\r\n          <div className=\"mb-6 pb-6 border-b border-teal-500\">\r\n            <div className=\"flex items-center gap-3 mb-3\">\r\n              <div className=\"w-10 h-10 rounded-full bg-white bg-opacity-20 flex items-center justify-center text-sm font-semibold\">\r\n                {getInitials(user?.name || 'D')}\r\n              </div>\r\n              <div className=\"flex-1 min-w-0\">\r\n                <p className=\"text-sm font-semibold truncate\">Dr. {user?.name}</p>\r\n                <p className=\"text-xs text-teal-200 capitalize\">Doctor</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Navigation Links */}\r\n        <nav className=\"space-y-1\">\r\n          {menu.map((item) => {\r\n            const Icon = item.icon;\r\n            const isActive = pathname === item.href;\r\n            return (\r\n              <Link\r\n                key={item.href}\r\n                href={item.href}\r\n                className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${\r\n                  isActive\r\n                    ? 'bg-teal-700 text-white font-semibold'\r\n                    : 'text-teal-100 hover:bg-teal-700 hover:text-white'\r\n                }`}\r\n              >\r\n                <Icon className=\"text-xl shrink-0\" />\r\n                {!sidebarCollapsed && <span className=\"text-sm\">{item.label}</span>}\r\n              </Link>\r\n            );\r\n          })}\r\n        </nav>\r\n\r\n        {/* Logout Button */}\r\n        {!sidebarCollapsed && (\r\n          <div className=\"absolute bottom-4 left-4 right-4\">\r\n            <button \r\n              onClick={logout}\r\n              className=\"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-teal-100 hover:bg-teal-700 transition-colors\"\r\n            >\r\n              <FiLogOut className=\"text-xl\" />\r\n              <span className=\"text-sm\">LOGOUT</span>\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DoctorSidebar;\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAUA;AAdA;;;;;;AAuBA,MAAM,gBAAgB,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,aAAa,EAAsB;IACxE,MAAM,WAAW,IAAA,gMAAW;IAC5B,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,gQAAQ,EAAC;IAEzD,MAAM,cAAc,CAAC;QACnB,OAAO,MACH,MAAM,MACN,IAAI,CAAC,IAAc,CAAC,CAAC,EAAE,GACvB,KAAK,KACL,eACA,MAAM,GAAG,MAAM;IACrB;IAEA,MAAM,OAAO;QACX;YAAE,MAAM;YAAqB,OAAO;YAAa,MAAM,uMAAM;QAAC;QAC9D;YAAE,MAAM;YAAwB,OAAO;YAAgB,MAAM,2MAAU;QAAC;QACxE;YAAE,MAAM;YAAyB,OAAO;YAAiB,MAAM,2MAAU;QAAC;QAC1E;YAAE,MAAM;YAAoB,OAAO;YAAY,MAAM,wMAAO;QAAC;QAC7D;YAAE,MAAM;YAAgB,OAAO;YAAS,MAAM,gNAAe;QAAC;QAC9D;YAAE,MAAM;YAAmB,OAAO;YAAc,MAAM,uMAAM;QAAC;KAC9D;IAED,qBACE,6RAAC;QAAI,WAAW,GAAG,mBAAmB,SAAS,OAAO,kFAAkF,CAAC;kBACvI,cAAA,6RAAC;YAAI,WAAU;;8BAEb,6RAAC;oBACC,SAAS,IAAM,oBAAoB,CAAC;oBACpC,WAAU;8BAEV,cAAA,6RAAC,+MAAc;wBAAC,WAAW,CAAC,uCAAuC,EAAE,mBAAmB,KAAK,cAAc;;;;;;;;;;;gBAI5G,CAAC,kCACA,6RAAC;oBAAI,WAAU;8BACb,cAAA,6RAAC;wBAAI,WAAU;;0CACb,6RAAC;gCAAK,WAAU;0CAAW;;;;;;0CAC3B,6RAAC;gCAAK,WAAU;0CAAoB;;;;;;;;;;;;;;;;;gBAMzC,CAAC,kCACA,6RAAC;oBAAI,WAAU;8BACb,cAAA,6RAAC;wBAAI,WAAU;;0CACb,6RAAC;gCAAI,WAAU;0CACZ,YAAY,MAAM,QAAQ;;;;;;0CAE7B,6RAAC;gCAAI,WAAU;;kDACb,6RAAC;wCAAE,WAAU;;4CAAiC;4CAAK,MAAM;;;;;;;kDACzD,6RAAC;wCAAE,WAAU;kDAAmC;;;;;;;;;;;;;;;;;;;;;;;8BAOxD,6RAAC;oBAAI,WAAU;8BACZ,KAAK,GAAG,CAAC,CAAC;wBACT,MAAM,OAAO,KAAK,IAAI;wBACtB,MAAM,WAAW,aAAa,KAAK,IAAI;wBACvC,qBACE,6RAAC,sNAAI;4BAEH,MAAM,KAAK,IAAI;4BACf,WAAW,CAAC,+DAA+D,EACzE,WACI,yCACA,oDACJ;;8CAEF,6RAAC;oCAAK,WAAU;;;;;;gCACf,CAAC,kCAAoB,6RAAC;oCAAK,WAAU;8CAAW,KAAK,KAAK;;;;;;;2BATtD,KAAK,IAAI;;;;;oBAYpB;;;;;;gBAID,CAAC,kCACA,6RAAC;oBAAI,WAAU;8BACb,cAAA,6RAAC;wBACC,SAAS;wBACT,WAAU;;0CAEV,6RAAC,yMAAQ;gCAAC,WAAU;;;;;;0CACpB,6RAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOxC;uCAEe","debugId":null}},
    {"offset": {"line": 273, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/app/doctor/prescriptions/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useNotification } from '@/context/NotificationContext';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport Link from 'next/link';\nimport Loading from '@/components/Loading';\nimport DoctorSidebar from '@/components/DoctorSidebar';\nimport api from '@/lib/api';\nimport { format, parseISO } from 'date-fns';\nimport { FiX, FiZap, FiCheck, FiEdit2, FiXCircle, FiFileText, FiMail, FiClipboard, FiActivity, FiBarChart2, FiAlertCircle, FiHeart, FiSave, FiEye, FiPrinter, FiPlus, FiCalendar, FiClock } from 'react-icons/fi';\n\nexport default function DoctorPrescriptionsPage() {\n  const { user, loading: authLoading, logout } = useAuth();\n  const { showNotification } = useNotification();\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const [prescriptions, setPrescriptions] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [problem, setProblem] = useState('');\n  const [problems, setProblems] = useState<string[]>([]);\n  const [loadingSuggestions, setLoadingSuggestions] = useState(false);\n  const [suggestions, setSuggestions] = useState<any>(null);\n\n  // Convert number to Roman numeral (lowercase)\n  const toRomanNumeral = (num: number): string => {\n    const romanNumerals = ['i', 'ii', 'iii', 'iv', 'v', 'vi', 'vii', 'viii', 'ix', 'x'];\n    if (num <= romanNumerals.length) {\n      return romanNumerals[num - 1];\n    }\n    // Fallback for numbers beyond x\n    return String(num);\n  };\n  const [prescriptionForm, setPrescriptionForm] = useState({\n    patientEmail: '',\n    diagnosis: '',\n    medicines: '',\n    tests: '',\n    rules: '',\n    instructions: '',\n    advice: '',\n    followUp: '',\n  });\n  const [doctorProfile, setDoctorProfile] = useState<any>(null);\n  const [patientInfo, setPatientInfo] = useState<any>(null);\n  const [loadingPatient, setLoadingPatient] = useState(false);\n  const [showPreviewModal, setShowPreviewModal] = useState(false);\n  const [showTemplateModal, setShowTemplateModal] = useState(false);\n  const [templateName, setTemplateName] = useState('');\n  const [templates, setTemplates] = useState<any[]>([]);\n  const [loadingTemplates, setLoadingTemplates] = useState(false);\n  const [editingTemplate, setEditingTemplate] = useState<any>(null);\n\n  useEffect(() => {\n    if (!authLoading && (!user || user.role !== 'doctor')) {\n      router.push('/login');\n    }\n  }, [user, authLoading, router]);\n\n  useEffect(() => {\n    if (user && user.role === 'doctor') {\n      fetchPrescriptions();\n      fetchDoctorProfile();\n      fetchTemplates();\n    }\n  }, [user]);\n\n  // Fetch patient info when email changes\n  useEffect(() => {\n    if (prescriptionForm.patientEmail && showCreateModal) {\n      const debounceTimer = setTimeout(() => {\n        fetchPatientInfo(prescriptionForm.patientEmail);\n      }, 500);\n      return () => clearTimeout(debounceTimer);\n    } else {\n      setPatientInfo(null);\n    }\n  }, [prescriptionForm.patientEmail, showCreateModal]);\n\n  // Check for patientEmail in query params and pre-fill form\n  useEffect(() => {\n    const patientEmail = searchParams.get('patientEmail');\n    if (patientEmail) {\n      setPrescriptionForm((prev) => ({\n        ...prev,\n        patientEmail: decodeURIComponent(patientEmail),\n      }));\n      setShowCreateModal(true);\n      // Clean up URL\n      router.replace('/doctor/prescriptions', { scroll: false });\n    }\n  }, [searchParams, router]);\n\n  const fetchPrescriptions = async () => {\n    try {\n      setLoading(true);\n      const response = await api.get('/prescriptions?limit=100');\n      setPrescriptions(response.data.prescriptions || []);\n    } catch (error) {\n      console.error('Error fetching prescriptions:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchDoctorProfile = async () => {\n    try {\n      const response = await api.get('/doctors/profile/me');\n      setDoctorProfile(response.data.doctor);\n    } catch (error) {\n      console.error('Error fetching doctor profile:', error);\n    }\n  };\n\n  const fetchPatientInfo = async (email: string) => {\n    if (!email || !email.includes('@')) {\n      setPatientInfo(null);\n      return;\n    }\n    try {\n      setLoadingPatient(true);\n      let patient = null;\n      \n      // Try to search for patient using the new search endpoint\n      try {\n        const response = await api.get(`/users/search/patient?email=${encodeURIComponent(email)}`);\n        if (response.data.user) {\n          patient = response.data.user;\n        }\n      } catch (searchError: any) {\n        // If search endpoint fails (404 or other), try finding from prescriptions\n        if (searchError.response?.status !== 404) {\n          console.error('Error searching for patient:', searchError);\n        }\n        \n        try {\n          const presResponse = await api.get(`/prescriptions?limit=100`);\n          const prescriptions = presResponse.data.prescriptions || [];\n          const foundPrescription = prescriptions.find((p: any) => p.patient?.email === email);\n          if (foundPrescription?.patient) {\n            patient = foundPrescription.patient;\n          }\n        } catch (presError) {\n          console.error('Error fetching patient from prescriptions:', presError);\n        }\n      }\n      \n      if (patient) {\n        // Calculate age\n        let age = '';\n        if (patient.dateOfBirth) {\n          const birthDate = new Date(patient.dateOfBirth);\n          const today = new Date();\n          let years = today.getFullYear() - birthDate.getFullYear();\n          const monthDiff = today.getMonth() - birthDate.getMonth();\n          if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {\n            years--;\n          }\n          age = `${years} years`;\n        }\n        setPatientInfo({\n          ...patient,\n          age,\n        });\n      } else {\n        setPatientInfo(null);\n      }\n    } catch (error) {\n      console.error('Error fetching patient info:', error);\n      setPatientInfo(null);\n    } finally {\n      setLoadingPatient(false);\n    }\n  };\n\n  const addProblem = () => {\n    if (!problem.trim()) {\n      showNotification('Please enter a problem description first', 'error');\n      return;\n    }\n    setProblems(prev => [...prev, problem.trim()]);\n    setProblem('');\n  };\n\n  const removeProblem = (index: number) => {\n    setProblems(prev => prev.filter((_, i) => i !== index));\n  };\n\n    const fetchAISuggestions = async () => {\n    // Combine all problems for suggestion\n    const allProblems = problems.length > 0 \n      ? problems.join('; ') + (problem.trim() ? `; ${problem.trim()}` : '')\n      : problem.trim();\n\n    if (!allProblems.trim()) {\n      showNotification('Please add at least one problem description', 'error');\n      return;\n    }\n\n    try {\n      setLoadingSuggestions(true);\n      const response = await api.post('/prescriptions/ai-suggestions', {\n        problem: allProblems,\n      });\n      setSuggestions(response.data.suggestions);\n      // No success notification - suggestions will show directly\n    } catch (error: any) {\n      console.error('Error fetching AI suggestions:', error);\n      showNotification(error.response?.data?.message || 'Failed to generate AI suggestions', 'error');\n    } finally {\n      setLoadingSuggestions(false);\n    }\n  };\n\n  const acceptSuggestion = (field: string, value: string) => {\n    setPrescriptionForm((prev) => ({\n      ...prev,\n      [field]: value,\n    }));\n  };\n\n  const handleCreatePrescription = async (e?: React.FormEvent) => {\n    if (e) e.preventDefault();\n    try {\n      const medicinesArray = prescriptionForm.medicines\n        .split('\\n')\n        .map((m) => m.trim())\n        .filter((m) => m.length > 0)\n        .map((m) => {\n          const parts = m.split('-').map((p) => p.trim());\n          return {\n            name: parts[0] || m,\n            dosage: parts[1] || '',\n            frequency: parts[2] || '',\n          };\n        });\n\n      const testsArray = prescriptionForm.tests\n        .split('\\n')\n        .map((t) => t.trim())\n        .filter((t) => t.length > 0)\n        .map((t) => ({ name: t, description: '' }));\n\n      const rulesArray = prescriptionForm.rules\n        .split('\\n')\n        .map((r) => r.trim())\n        .filter((r) => r.length > 0)\n        .map((r) => ({ title: r, description: '' }));\n\n      // Combine instructions and followUp into instructions\n      const combinedInstructions = [\n        prescriptionForm.instructions,\n        prescriptionForm.followUp && `Follow-up:\\n${prescriptionForm.followUp}`,\n      ].filter(Boolean).join('\\n\\n');\n\n      // Use advice for rules if rules is empty\n      const finalRules = rulesArray.length > 0 ? rulesArray : \n        (prescriptionForm.advice ? prescriptionForm.advice.split('\\n').filter(a => a.trim()).map((a) => ({ title: a.trim(), description: '' })) : []);\n\n      await api.post('/prescriptions', {\n        patientEmail: prescriptionForm.patientEmail,\n        diagnosis: prescriptionForm.diagnosis,\n        medicines: medicinesArray,\n        tests: testsArray,\n        rules: finalRules,\n        instructions: combinedInstructions || prescriptionForm.instructions,\n      });\n\n      showNotification('Prescription created successfully', 'success');\n      setShowCreateModal(false);\n      setPrescriptionForm({ patientEmail: '', diagnosis: '', medicines: '', tests: '', rules: '', instructions: '', advice: '', followUp: '' });\n      setProblem('');\n      setProblems([]);\n      setSuggestions(null);\n      setEditingTemplate(null);\n      setTemplateName('');\n      fetchPrescriptions();\n    } catch (error: any) {\n      showNotification(error.response?.data?.message || 'Failed to create prescription', 'error');\n    }\n  };\n\n  const getInitials = (name: string) => {\n    return name\n      .split(' ')\n      .map((n) => n[0])\n      .join('')\n      .toUpperCase()\n      .slice(0, 2);\n  };\n\n  // Template functions\n  const fetchTemplates = async () => {\n    try {\n      setLoadingTemplates(true);\n      const response = await api.get('/templates');\n      setTemplates(response.data.templates || []);\n    } catch (error) {\n      console.error('Error fetching templates:', error);\n    } finally {\n      setLoadingTemplates(false);\n    }\n  };\n\n  const handleSaveTemplate = async () => {\n    try {\n      if (!templateName.trim()) {\n        showNotification('Please enter a template name', 'error');\n        return;\n      }\n\n      if (editingTemplate) {\n        await api.put(`/templates/${editingTemplate.id}`, {\n          name: templateName,\n          diagnosis: prescriptionForm.diagnosis,\n          medicines: prescriptionForm.medicines,\n          tests: prescriptionForm.tests,\n          rules: prescriptionForm.rules,\n          instructions: prescriptionForm.instructions,\n          advice: prescriptionForm.advice,\n          followUp: prescriptionForm.followUp,\n        });\n        showNotification('Template updated successfully', 'success');\n      } else {\n        await api.post('/templates', {\n          name: templateName,\n          diagnosis: prescriptionForm.diagnosis,\n          medicines: prescriptionForm.medicines,\n          tests: prescriptionForm.tests,\n          rules: prescriptionForm.rules,\n          instructions: prescriptionForm.instructions,\n          advice: prescriptionForm.advice,\n          followUp: prescriptionForm.followUp,\n        });\n        showNotification('Template saved successfully', 'success');\n      }\n      setShowTemplateModal(false);\n      setTemplateName('');\n      setEditingTemplate(null);\n      fetchTemplates();\n    } catch (error: any) {\n      showNotification(error.response?.data?.message || 'Failed to save template', 'error');\n    }\n  };\n\n  const handleLoadTemplate = (template: any) => {\n    setPrescriptionForm({\n      patientEmail: prescriptionForm.patientEmail, // Keep current patient email\n      diagnosis: template.diagnosis || '',\n      medicines: template.medicines || '',\n      tests: template.tests || '',\n      rules: template.rules || '',\n      instructions: template.instructions || '',\n      advice: template.advice || '',\n      followUp: template.followUp || '',\n    });\n    setShowTemplateModal(false);\n    setEditingTemplate(template);\n    setTemplateName(template.name);\n    showNotification('Template loaded. You can edit it now.', 'success');\n  };\n\n  const handleEditTemplate = (template: any) => {\n    setEditingTemplate(template);\n    setTemplateName(template.name);\n    setPrescriptionForm({\n      patientEmail: prescriptionForm.patientEmail,\n      diagnosis: template.diagnosis || '',\n      medicines: template.medicines || '',\n      tests: template.tests || '',\n      rules: template.rules || '',\n      instructions: template.instructions || '',\n      advice: template.advice || '',\n      followUp: template.followUp || '',\n    });\n    setShowTemplateModal(false);\n    setShowCreateModal(true);\n  };\n\n  const handleDeleteTemplate = async (templateId: string) => {\n    if (!confirm('Are you sure you want to delete this template?')) return;\n    try {\n      await api.delete(`/templates/${templateId}`);\n      showNotification('Template deleted successfully', 'success');\n      fetchTemplates();\n    } catch (error: any) {\n      showNotification(error.response?.data?.message || 'Failed to delete template', 'error');\n    }\n  };\n\n  // Print function with professional styling - exact same layout as form\n  const handlePrint = () => {\n    const printWindow = window.open('', '_blank');\n    if (!printWindow) return;\n\n    const printContent = `\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Prescription - ${patientInfo?.name || 'Patient'}</title>\n          <style>\n            @media print {\n              @page {\n                margin: 15mm;\n                size: A4;\n              }\n            }\n            * {\n              margin: 0;\n              padding: 0;\n              box-sizing: border-box;\n            }\n            body {\n              font-family: 'Times New Roman', serif;\n              font-size: 11pt;\n              line-height: 1.6;\n              color: #000;\n              background: #fff;\n              padding: 20px;\n              max-width: 100%;\n              position: relative;\n              overflow: hidden;\n            }\n            /* Watermark Background */\n            body::before {\n              content: 'MediWise';\n              position: fixed;\n              top: 50%;\n              left: 50%;\n              transform: translate(-50%, -50%) rotate(-45deg);\n              font-size: 150pt;\n              font-weight: bold;\n              color: rgba(0, 102, 102, 0.15);\n              z-index: 0;\n              pointer-events: none;\n              white-space: nowrap;\n              text-shadow: 0 0 10px rgba(0, 102, 102, 0.1);\n            }\n            .container {\n              position: relative;\n              z-index: 1;\n              max-width: 100%;\n            }\n            .header {\n              border-bottom: 3px solid #000;\n              padding-bottom: 15px;\n              margin-bottom: 15px;\n            }\n            .header-top {\n              display: flex;\n              justify-content: space-between;\n              align-items: flex-start;\n              margin-bottom: 10px;\n            }\n            .doctor-info-left {\n              flex: 1;\n            }\n            .logo-container {\n              width: 180px;\n              height: auto;\n              display: flex;\n              flex-direction: column;\n              align-items: center;\n              justify-content: flex-start;\n            }\n            .logo-image {\n              max-width: 100%;\n              height: auto;\n              object-fit: contain;\n            }\n            .doctor-name {\n              font-size: 22pt;\n              font-weight: bold;\n              color: #006666;\n              margin-bottom: 8px;\n            }\n            .doctor-name-bengali {\n              font-size: 20pt;\n              font-weight: bold;\n              color: #006666;\n              margin-bottom: 8px;\n            }\n            .doctor-details {\n              font-size: 10pt;\n              margin-bottom: 3px;\n            }\n            .doctor-details-bengali {\n              font-size: 10pt;\n              margin-bottom: 3px;\n              color: #333;\n            }\n            .bilingual-section {\n              margin-bottom: 10px;\n            }\n            .date-time {\n              text-align: right;\n              font-size: 10pt;\n              font-weight: bold;\n            }\n            .patient-section {\n              border-top: 2px solid #000;\n              padding-top: 12px;\n              margin-bottom: 15px;\n              display: flex;\n              justify-content: space-between;\n              align-items: flex-start;\n            }\n            .patient-info-left {\n              flex: 1;\n            }\n            .patient-label {\n              font-size: 10pt;\n              font-weight: bold;\n              margin-bottom: 3px;\n            }\n            .patient-input {\n              font-size: 10pt;\n              padding: 5px;\n              border: 2px solid #000;\n              width: 100%;\n              max-width: 300px;\n            }\n            .patient-info-right {\n              text-align: right;\n            }\n            .patient-name {\n              font-size: 12pt;\n              font-weight: bold;\n              margin-bottom: 3px;\n            }\n            .patient-details {\n              font-size: 10pt;\n            }\n            .two-column-layout {\n              display: grid;\n              grid-template-columns: 1fr 1fr;\n              gap: 40px;\n              margin-top: 15px;\n              position: relative;\n            }\n            .two-column-layout::before {\n              content: '';\n              position: absolute;\n              left: 50%;\n              top: 0;\n              bottom: 0;\n              width: 3px;\n              background-color: #0066cc;\n              transform: translateX(-50%);\n              z-index: 1;\n            }\n            .left-column, .right-column {\n              display: flex;\n              flex-direction: column;\n              gap: 25px;\n              position: relative;\n              z-index: 2;\n              background: white;\n            }\n            .section {\n              padding-bottom: 0;\n              margin-bottom: 0;\n            }\n            .section-title {\n              font-size: 12pt;\n              font-weight: bold;\n              margin-bottom: 8px;\n              display: flex;\n              align-items: center;\n              gap: 5px;\n            }\n            .section-content {\n              font-size: 10pt;\n              white-space: pre-wrap;\n              line-height: 1.8;\n              min-height: 40px;\n              padding: 0;\n              border: none;\n              font-family: inherit;\n            }\n            .medicines-content {\n              font-family: 'Courier New', monospace;\n              font-size: 10pt;\n            }\n            .footer {\n              margin-top: 40px;\n              border-top: 2px solid #000;\n              padding-top: 20px;\n              font-size: 10pt;\n              text-align: center;\n            }\n            .footer-content {\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              gap: 20px;\n            }\n            .footer-logo {\n              width: 80px;\n              height: 80px;\n              border-radius: 50%;\n              background: linear-gradient(135deg, #006666 0%, #004d4d 100%);\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              color: white;\n              font-weight: bold;\n              font-size: 14pt;\n              flex-shrink: 0;\n            }\n            .footer-info {\n              flex: 1;\n              line-height: 1.8;\n              text-align: center;\n            }\n            .footer-info bengali {\n              font-family: 'Noto Sans Bengali', 'Kalpurush', 'Siyam Rupali', sans-serif;\n            }\n            .company-name {\n              font-weight: bold;\n              font-size: 12pt;\n              margin-bottom: 8px;\n              color: #006666;\n              text-align: center;\n            }\n            .footer-text {\n              font-size: 9pt;\n              line-height: 1.6;\n              margin-bottom: 5px;\n              text-align: center;\n              display: flex;\n              justify-content: center;\n              align-items: center;\n              gap: 5px;\n              flex-wrap: wrap;\n            }\n            .hotline {\n              font-weight: bold;\n              color: #006666;\n              margin-top: 8px;\n              text-align: center;\n              display: flex;\n              justify-content: center;\n              align-items: center;\n              gap: 5px;\n              flex-wrap: wrap;\n            }\n            @media print {\n              body::before {\n                display: block;\n              }\n            }\n          </style>\n        </head>\n        <body>\n          <div class=\"container\">\n            <!-- Header Section -->\n            <div class=\"header\">\n              <div class=\"header-top\">\n                <div class=\"doctor-info-left\">\n                  <div class=\"doctor-name\">${(() => {\n                    const name = doctorProfile?.user?.name || user?.name || 'Name';\n                    const cleanName = name.replace(/^dr\\.?\\s*/i, '');\n                    return `Dr. ${cleanName}`;\n                  })()}</div>\n                  ${doctorProfile?.qualification ? `<div class=\"doctor-details\">${doctorProfile.qualification}</div>` : ''}\n                  ${doctorProfile?.specialization ? `<div class=\"doctor-details\">${doctorProfile.specialization}</div>` : ''}\n                  ${doctorProfile?.department?.name ? `<div class=\"doctor-details\">${doctorProfile.department.name}</div>` : ''}\n                  ${Array.isArray(doctorProfile?.previousJobs) && doctorProfile.previousJobs.length > 0 ? `\n                    <div class=\"doctor-details\">${doctorProfile.previousJobs.map((job: any) => \n                      typeof job === 'string' ? job : (job.title || job.position || job)\n                    ).join(', ')}</div>\n                  ` : ''}\n                </div>\n                <div class=\"logo-container\">\n                  <img src=\"/logo.png\" alt=\"MediWise Logo\" class=\"logo-image\" onerror=\"this.style.display='none';\" />\n                </div>\n              </div>\n              <div style=\"border-top: 2px solid #000; padding-top: 10px; margin-top: 10px; display: flex; justify-content: space-between; align-items: center;\">\n                <div style=\"flex: 1;\">\n                  ${(() => {\n                    const fullName = patientInfo?.name || '';\n                    const namePart = fullName ? `Patient: ${fullName}` : '';\n                    const age = patientInfo?.age ? `    Age: ${patientInfo.age}` : '';\n                    const weight = patientInfo?.weight ? `Weight: ${patientInfo.weight}kg` : '';\n                    \n                    return [namePart, age, weight].filter(Boolean).join(' ');\n                  })()}\n                </div>\n                <div class=\"date-time\">\n                  ${(() => {\n                    const date = new Date();\n                    const day = String(date.getDate()).padStart(2, '0');\n                    const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n                    const month = monthNames[date.getMonth()];\n                    const year = date.getFullYear();\n                    const dateOnly = `${day} ${month}, ${year}`;\n                    const timeOnly = format(date, 'h:mm a');\n                    return `Date: ${dateOnly} Time: ${timeOnly}`;\n                  })()}\n                </div>\n              </div>\n            </div>\n            \n\n            <!-- Two Column Layout - Same as Form -->\n            <div class=\"two-column-layout\">\n              <!-- Left Column -->\n              <div class=\"left-column\">\n                ${prescriptionForm.diagnosis ? `\n                <div class=\"section\">\n                  <div class=\"section-title\">Diagnosis</div>\n                  <div class=\"section-content\">${prescriptionForm.diagnosis}</div>\n                </div>\n                ` : ''}\n                \n                ${prescriptionForm.tests ? `\n                <div class=\"section\">\n                  <div class=\"section-title\">Investigation</div>\n                  <div class=\"section-content\">${prescriptionForm.tests}</div>\n                </div>\n                ` : ''}\n\n                ${(prescriptionForm.followUp || prescriptionForm.instructions) ? `\n                <div class=\"section\">\n                  <div class=\"section-title\">Follow up</div>\n                  <div class=\"section-content\">${prescriptionForm.followUp || prescriptionForm.instructions}</div>\n                </div>\n                ` : ''}\n              </div>\n\n              <!-- Right Column -->\n              <div class=\"right-column\">\n                ${prescriptionForm.medicines ? `\n                <div class=\"section\">\n                  <div class=\"section-title\">Medicine</div>\n                  <div class=\"section-content medicines-content\">${prescriptionForm.medicines}</div>\n                </div>\n                ` : ''}\n\n                ${(prescriptionForm.advice || prescriptionForm.rules) ? `\n                <div class=\"section\">\n                  <div class=\"section-title\">Advice</div>\n                  <div class=\"section-content\">${prescriptionForm.advice || prescriptionForm.rules}</div>\n                </div>\n                ` : ''}\n              </div>\n            </div>\n\n            <!-- Footer with Company Information -->\n            <div class=\"footer\">\n              <div class=\"footer-info\">\n                <div class=\"company-name\">MediWise</div>\n                <div class=\"footer-text\" style=\"font-family: 'Noto Sans Bengali', 'Kalpurush', 'Siyam Rupali', sans-serif;\">\n                  <span>‡¶ö‡ßá‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞: ‡¶Æ‡ßá‡¶°‡¶ø‡¶ì‡¶Ø‡¶º‡¶æ‡¶á‡¶ú ‡¶ï‡¶®‡¶∏‡¶æ‡¶≤‡¶ü‡ßá‡¶∂‡¶® ‡¶∏‡ßá‡¶®‡ßç‡¶ü‡¶æ‡¶∞</span>\n                  <span>/</span>\n                  <span>Chamber: MediWise Consultation Center</span>\n                </div>\n                <div class=\"hotline\" style=\"font-family: 'Noto Sans Bengali', 'Kalpurush', 'Siyam Rupali', sans-serif;\">\n                  <span>‡¶∏‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶≤‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶π‡¶ü‡¶≤‡¶æ‡¶á‡¶®</span>\n                  <span>/</span>\n                  <span>Hotline for Serial: <strong>+8809658303665</strong></span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </body>\n      </html>\n    `;\n\n    printWindow.document.write(printContent);\n    printWindow.document.close();\n    printWindow.focus();\n    setTimeout(() => {\n      printWindow.print();\n    }, 250);\n  };\n\n  if (authLoading || loading) {\n    return <Loading />;\n  }\n\n  if (!user || user.role !== 'doctor') {\n    return null;\n  }\n\n  return (\n    <div className=\"flex min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors\">\n      <DoctorSidebar user={user} logout={logout} />\n      <main className=\"ml-64 flex-1 p-8 transition-all duration-300\">\n        <div className=\"flex justify-between items-start mb-8\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-2\">Prescriptions</h1>\n            <p className=\"text-gray-600 dark:text-gray-400\">Manage patient prescriptions</p>\n          </div>\n          <div className=\"flex gap-3\">\n            <button\n              onClick={() => {\n                setShowTemplateModal(true);\n                setEditingTemplate(null);\n                setTemplateName('');\n              }}\n              className=\"px-4 py-2 border-2 border-teal-600 dark:border-teal-500 text-teal-600 dark:text-teal-400 rounded-lg hover:bg-teal-50 dark:hover:bg-teal-900/20 transition-colors font-medium flex items-center gap-2\"\n            >\n              <FiFileText />\n              Templates\n            </button>\n            <button\n              onClick={() => setShowCreateModal(true)}\n              className=\"px-6 py-2 bg-teal-600 dark:bg-teal-700 text-white rounded-lg hover:bg-teal-700 dark:hover:bg-teal-600 transition-colors font-medium\"\n            >\n              + New Prescription\n            </button>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {prescriptions.map((prescription) => (\n            <div\n              key={prescription.id}\n              className=\"bg-white dark:bg-gray-800 rounded-xl shadow-md p-5 hover:shadow-lg transition-all border border-gray-100 dark:border-gray-700\"\n            >\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex-1\">\n                  <h3 className=\"text-lg font-semibold text-gray-800 dark:text-gray-100\">{prescription.patient?.name}</h3>\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">{prescription.patient?.email}</p>\n                </div>\n              </div>\n              {prescription.diagnosis && (\n                <div className=\"mb-3\">\n                  <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Diagnosis:</p>\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">{prescription.diagnosis}</p>\n                </div>\n              )}\n              {prescription.medicines && Array.isArray(prescription.medicines) && prescription.medicines.length > 0 && (\n                <div className=\"mb-3\">\n                  <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Medicines:</p>\n                  <ul className=\"text-sm text-gray-600 dark:text-gray-400 list-disc list-inside\">\n                    {prescription.medicines.map((med: any, idx: number) => (\n                      <li key={idx}>{typeof med === 'string' ? med : med.name || med}</li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n              {prescription.instructions && (\n                <div className=\"mb-3\">\n                  <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Instructions:</p>\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">{prescription.instructions}</p>\n                </div>\n              )}\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\n                {format(parseISO(prescription.prescriptionDate || prescription.createdAt), 'MMM dd, yyyy')}\n              </p>\n            </div>\n          ))}\n        </div>\n\n        {prescriptions.length === 0 && (\n          <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-md p-12 text-center border border-gray-100 dark:border-gray-700\">\n            <p className=\"text-gray-500 dark:text-gray-400 text-lg\">No prescriptions yet</p>\n          </div>\n        )}\n\n        {/* Create Prescription Modal - Professional Template */}\n        {showCreateModal && (\n          <div\n            className=\"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center z-50 p-2 sm:p-4 overflow-y-auto\"\n            onClick={(e) => {\n              if (e.target === e.currentTarget) {\n                setShowCreateModal(false);\n              }\n            }}\n          >\n            <div className=\"bg-white dark:bg-gray-800 shadow-2xl w-full max-w-6xl my-auto flex flex-col transform transition-all animate-slideUp rounded-lg overflow-hidden\" style={{ minHeight: '85vh', maxHeight: '90vh' }}>\n              {/* Professional Prescription Header */}\n              <div className=\"p-4 sm:p-6 border-b-2 border-gray-400 dark:border-gray-500 bg-white dark:bg-gray-800 shrink-0\">\n                <div className=\"flex justify-between items-start\">\n                  {/* Doctor Info - Left Side */}\n                  <div className=\"flex-1\">\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      {/* English Section - Left */}\n                      <div>\n                        <h2 className=\"text-3xl font-bold text-teal-600 dark:text-teal-400 mb-2\">\n                          {(() => {\n                            const name = doctorProfile?.user?.name || user?.name || 'Name';\n                            // Remove \"Dr.\" if already exists\n                            const cleanName = name.replace(/^dr\\.?\\s*/i, '');\n                            return `Dr. ${cleanName}`;\n                          })()}\n                        </h2>\n                        {doctorProfile?.qualification && (\n                          <p className=\"text-base text-gray-800 dark:text-gray-200 font-medium mb-1\">\n                            {doctorProfile.qualification}\n                          </p>\n                        )}\n                        {doctorProfile?.specialization && (\n                          <p className=\"text-sm text-gray-700 dark:text-gray-300 mb-1\">\n                            {doctorProfile.specialization}\n                          </p>\n                        )}\n                        {doctorProfile?.department?.name && (\n                          <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">\n                            {doctorProfile.department.name}\n                          </p>\n                        )}\n                        {Array.isArray(doctorProfile?.previousJobs) && doctorProfile.previousJobs.length > 0 && (\n                          <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">\n                            {doctorProfile.previousJobs.map((job: any) => \n                              typeof job === 'string' ? job : (job.title || job.position || job)\n                            ).join(', ')}\n                          </p>\n                        )}\n                      </div>\n                      \n                      {/* Bengali Section - Right - Full Bengali Information */}\n                      <div className=\"border-l border-gray-300 dark:border-gray-600 pl-4\">\n                        <h2 className=\"text-2xl font-bold text-teal-600 dark:text-teal-400 mb-2\">\n                          {(() => {\n                            const name = doctorProfile?.user?.name || user?.name || '‡¶®‡¶æ‡¶Æ';\n                            // Remove \"Dr.\" if already exists\n                            const cleanName = name.replace(/^dr\\.?\\s*/i, '');\n                            return `‡¶°‡¶æ‡¶É ${cleanName}`;\n                          })()}\n                        </h2>\n                        {/* Qualifications in Bengali - Must show ALL if English exists */}\n                        {doctorProfile?.qualification && (\n                          <p className=\"text-base text-gray-800 dark:text-gray-200 font-medium mb-1\">\n                            {doctorProfile?.qualificationBn || doctorProfile.qualification}\n                          </p>\n                        )}\n                        {/* Specialization in Bengali - Must show ALL if English exists */}\n                        {doctorProfile?.specialization && (\n                          <p className=\"text-sm text-gray-700 dark:text-gray-300 mb-1\">\n                            {doctorProfile?.specializationBn || doctorProfile.specialization}\n                          </p>\n                        )}\n                        {/* Department in Bengali - Must show if exists */}\n                        {doctorProfile?.department?.name && (\n                          <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">\n                            {doctorProfile.department.name}\n                          </p>\n                        )}\n                        {/* Previous Jobs/Experience in Bengali - Must show ALL if English exists */}\n                        {Array.isArray(doctorProfile?.previousJobs) && doctorProfile.previousJobs.length > 0 && (\n                          <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">\n                            {Array.isArray(doctorProfile?.previousJobsBn) && doctorProfile.previousJobsBn.length > 0\n                              ? doctorProfile.previousJobsBn.map((job: any) => \n                                  typeof job === 'string' ? job : (job.title || job.position || job)\n                                ).join(', ')\n                              : doctorProfile.previousJobs.map((job: any) => \n                                  typeof job === 'string' ? job : (job.title || job.position || job)\n                                ).join(', ')\n                            }\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Date & Time - Right Side */}\n                  <div className=\"text-right\">\n                    <p className=\"text-base font-semibold text-gray-800 dark:text-gray-200 mb-1\">\n                      Date: {format(new Date(), 'dd MMMM, yyyy')}\n                    </p>\n                    <p className=\"text-base font-semibold text-gray-800 dark:text-gray-200\">\n                      Time: {format(new Date(), 'h:mm a')}\n                    </p>\n                  </div>\n                </div>\n\n                {/* Patient Info Section */}\n                <div className=\"border-t-2 border-gray-400 dark:border-gray-500 pt-3 mt-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex-1 mr-4\">\n                      <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1\">\n                        Patient Email <span className=\"text-red-500\">*</span>\n                      </label>\n                      <input\n                        type=\"email\"\n                        value={prescriptionForm.patientEmail}\n                        onChange={(e) => setPrescriptionForm({ ...prescriptionForm, patientEmail: e.target.value })}\n                        required\n                        className=\"w-full max-w-sm px-3 py-1.5 border-2 border-gray-400 dark:border-gray-500 rounded focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 text-sm\"\n                        placeholder=\"patient@example.com\"\n                      />\n                    </div>\n                    {patientInfo && (\n                      <div className=\"text-right\">\n                        <p className=\"text-base font-semibold text-gray-800 dark:text-gray-200\">\n                          Patient: {patientInfo.name || 'N/A'}\n                        </p>\n                        {patientInfo.age && (\n                          <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                            Age: {patientInfo.age} {patientInfo.weight ? `years | Weight: ${patientInfo.weight}` : 'years'}\n                          </p>\n                        )}\n                      </div>\n                    )}\n                    {loadingPatient && (\n                      <div className=\"text-right\">\n                        <p className=\"text-sm text-gray-500 italic\">Loading...</p>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n\n              {/* Professional Prescription Body - Two Column Layout */}\n              <div className=\"overflow-y-auto flex-1 p-4 sm:p-6 md:p-8 bg-white dark:bg-gray-800\" style={{ maxHeight: 'calc(85vh - 250px)' }}>\n                <form onSubmit={handleCreatePrescription} className=\"space-y-4 sm:space-y-6\">\n                  {/* Problem Input & AI Suggestions Section */}\n                  <div className=\"mb-5 p-3 bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-300 dark:border-blue-700\">\n                    <label className=\"block text-sm font-bold text-gray-800 dark:text-gray-200 mb-2\">\n                      üìù Patient Problem / Notes\n                    </label>\n                    \n                    {/* Added Problems List */}\n                    {problems.length > 0 && (\n                      <div className=\"mb-3 space-y-2\">\n                        {problems.map((prob, index) => (\n                          <div key={index} className=\"flex items-start gap-2 p-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded\">\n                            <span className=\"text-xs font-semibold text-blue-600 dark:text-blue-400 shrink-0 pt-1\">\n                              {index + 1}.\n                            </span>\n                            <span className=\"flex-1 text-xs text-gray-700 dark:text-gray-300\">{prob}</span>\n                            <button\n                              type=\"button\"\n                              onClick={() => removeProblem(index)}\n                              className=\"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 shrink-0\"\n                            >\n                              <FiXCircle className=\"w-4 h-4\" />\n                            </button>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n\n                    {/* Problem Input */}\n                    <textarea\n                      value={problem}\n                      onChange={(e) => setProblem(e.target.value)}\n                      onKeyDown={(e) => {\n                        if (e.key === 'Enter' && (e.ctrlKey || e.metaKey)) {\n                          e.preventDefault();\n                          addProblem();\n                        }\n                      }}\n                      rows={3}\n                      className=\"w-full px-3 py-2 border-2 border-gray-400 dark:border-gray-500 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 text-sm resize-none\"\n                      placeholder=\"Describe the patient's symptoms, complaints, or medical issues here... (Ctrl+Enter to add)\"\n                    />\n                    \n                    <div className=\"mt-2 flex items-center gap-2 flex-wrap\">\n                      <button\n                        type=\"button\"\n                        onClick={addProblem}\n                        disabled={!problem.trim()}\n                        className=\"px-3 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 text-sm font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n                      >\n                        <FiPlus className=\"w-4 h-4\" />\n                        Add Problem\n                      </button>\n                      <button\n                        type=\"button\"\n                        onClick={fetchAISuggestions}\n                        disabled={(problems.length === 0 && !problem.trim()) || loadingSuggestions}\n                        className=\"px-4 py-2 bg-linear-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 text-sm font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 shadow-md\"\n                      >\n                        <FiZap className={loadingSuggestions ? 'animate-spin' : ''} />\n                        {loadingSuggestions ? 'Generating...' : '‚ú® Get AI Suggestions'}\n                      </button>\n                      {suggestions && (\n                        <button\n                          type=\"button\"\n                          onClick={() => setSuggestions(null)}\n                          className=\"px-3 py-2 border-2 border-gray-400 dark:border-gray-500 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300\"\n                        >\n                          Clear\n                        </button>\n                      )}\n                    </div>\n                    {problems.length > 0 && (\n                      <p className=\"mt-2 text-xs text-gray-600 dark:text-gray-400\">\n                        {problems.length} problem(s) added. Click \"Get AI Suggestions\" to generate suggestions for all problems.\n                      </p>\n                    )}\n                  </div>\n\n                  {/* AI Suggestions */}\n                  {suggestions && (\n                    <div className=\"mb-5 p-4 bg-linear-to-br from-purple-50 to-pink-50 dark:from-purple-900/30 dark:to-pink-900/30 border-2 border-purple-300 dark:border-purple-700\">\n                      <h3 className=\"font-bold text-gray-800 dark:text-gray-100 text-base mb-3 flex items-center gap-2\">\n                        <FiZap className=\"text-purple-600 dark:text-purple-400\" />\n                        AI-Powered Suggestions\n                      </h3>\n                      <div className=\"space-y-2.5 mb-3\">\n                        {suggestions.diagnosis && (\n                          <div className=\"p-2.5 bg-white dark:bg-gray-800 border-2 border-purple-200 dark:border-purple-700\">\n                            <p className=\"text-xs font-bold text-gray-800 dark:text-gray-200 mb-1\">Diagnosis:</p>\n                            <p className=\"text-xs text-gray-700 dark:text-gray-300 leading-relaxed\">{suggestions.diagnosis}</p>\n                          </div>\n                        )}\n                        {suggestions.medicines && (\n                          <div className=\"p-2.5 bg-white dark:bg-gray-800 border-2 border-purple-200 dark:border-purple-700\">\n                            <p className=\"text-xs font-bold text-gray-800 dark:text-gray-200 mb-1\">Medicines:</p>\n                            <div className=\"text-xs text-gray-700 dark:text-gray-300 leading-relaxed\">\n                              {Array.isArray(suggestions.medicines) ? (\n                                <ul className=\"list-none space-y-1.5\">\n                                  {suggestions.medicines.map((medicine: string, index: number) => (\n                                    <li key={index} className=\"flex items-start gap-2\">\n                                      <span className=\"font-semibold text-purple-600 dark:text-purple-400 shrink-0\">\n                                        {toRomanNumeral(index + 1)}.\n                                      </span>\n                                      <span className=\"flex-1\">{medicine}</span>\n                                    </li>\n                                  ))}\n                                </ul>\n                              ) : (\n                                <p className=\"whitespace-pre-wrap font-mono\">{suggestions.medicines}</p>\n                              )}\n                            </div>\n                          </div>\n                        )}\n                        {suggestions.tests && (\n                          <div className=\"p-2.5 bg-white dark:bg-gray-800 border-2 border-purple-200 dark:border-purple-700\">\n                            <p className=\"text-xs font-bold text-gray-800 dark:text-gray-200 mb-1\">Tests:</p>\n                            <div className=\"text-xs text-gray-700 dark:text-gray-300 leading-relaxed\">\n                              {Array.isArray(suggestions.tests) ? (\n                                <ul className=\"list-none space-y-1.5\">\n                                  {suggestions.tests.map((test: string, index: number) => (\n                                    <li key={index} className=\"flex items-start gap-2\">\n                                      <span className=\"font-semibold text-purple-600 dark:text-purple-400 shrink-0\">\n                                        {toRomanNumeral(index + 1)}.\n                                      </span>\n                                      <span className=\"flex-1\">{test}</span>\n                                    </li>\n                                  ))}\n                                </ul>\n                              ) : (\n                                <p className=\"whitespace-pre-wrap\">{suggestions.tests}</p>\n                              )}\n                            </div>\n                          </div>\n                        )}\n                        {suggestions.rules && (\n                          <div className=\"p-2.5 bg-white dark:bg-gray-800 border-2 border-purple-200 dark:border-purple-700\">\n                            <p className=\"text-xs font-bold text-gray-800 dark:text-gray-200 mb-1\">Rules:</p>\n                            <div className=\"text-xs text-gray-700 dark:text-gray-300 leading-relaxed\">\n                              {Array.isArray(suggestions.rules) ? (\n                                <ul className=\"list-none space-y-1.5\">\n                                  {suggestions.rules.map((rule: string, index: number) => (\n                                    <li key={index} className=\"flex items-start gap-2\">\n                                      <span className=\"font-semibold text-purple-600 dark:text-purple-400 shrink-0\">\n                                        {toRomanNumeral(index + 1)}.\n                                      </span>\n                                      <span className=\"flex-1\">{rule}</span>\n                                    </li>\n                                  ))}\n                                </ul>\n                              ) : (\n                                <p className=\"whitespace-pre-wrap\">{suggestions.rules}</p>\n                              )}\n                            </div>\n                          </div>\n                        )}\n                        {suggestions.instructions && (\n                          <div className=\"p-2.5 bg-white dark:bg-gray-800 border-2 border-purple-200 dark:border-purple-700\">\n                            <p className=\"text-xs font-bold text-gray-800 dark:text-gray-200 mb-1\">Instructions:</p>\n                            <pre className=\"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap leading-relaxed\">{suggestions.instructions}</pre>\n                          </div>\n                        )}\n                      </div>\n                      <div className=\"flex gap-3 pt-3 border-t-2 border-purple-300 dark:border-purple-700\">\n                        <button\n                          type=\"button\"\n                          onClick={() => setSuggestions(null)}\n                          className=\"flex-1 px-4 py-2 border-2 border-gray-400 dark:border-gray-500 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-sm font-semibold text-gray-700 dark:text-gray-300\"\n                        >\n                          Cancel\n                        </button>\n                        <button\n                          type=\"button\"\n                          onClick={() => {\n                            if (suggestions.diagnosis) {\n                              setPrescriptionForm(prev => ({ ...prev, diagnosis: suggestions.diagnosis }));\n                            }\n                            if (suggestions.medicines) {\n                              const medicinesText = Array.isArray(suggestions.medicines) \n                                ? suggestions.medicines.map((med: string, idx: number) => `${toRomanNumeral(idx + 1)}. ${med}`).join('\\n')\n                                : suggestions.medicines;\n                              setPrescriptionForm(prev => ({ ...prev, medicines: medicinesText }));\n                            }\n                            if (suggestions.tests) {\n                              const testsText = Array.isArray(suggestions.tests)\n                                ? suggestions.tests.map((test: string, idx: number) => `${toRomanNumeral(idx + 1)}. ${test}`).join('\\n')\n                                : suggestions.tests;\n                              setPrescriptionForm(prev => ({ ...prev, tests: testsText }));\n                            }\n                            if (suggestions.rules) {\n                              const rulesText = Array.isArray(suggestions.rules)\n                                ? suggestions.rules.map((rule: string, idx: number) => `${toRomanNumeral(idx + 1)}. ${rule}`).join('\\n')\n                                : suggestions.rules;\n                              setPrescriptionForm(prev => ({ ...prev, rules: rulesText, advice: rulesText }));\n                            }\n                            if (suggestions.instructions) {\n                              setPrescriptionForm(prev => ({ ...prev, instructions: suggestions.instructions, followUp: suggestions.instructions }));\n                            }\n                            setSuggestions(null);\n                          }}\n                          className=\"flex-1 px-4 py-2 bg-linear-to-r from-green-500 to-teal-500 text-white rounded-lg hover:from-green-600 hover:to-teal-600 text-sm font-semibold shadow-md\"\n                        >\n                          <FiCheck className=\"inline mr-1\" />\n                          Approve & Fill\n                        </button>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Two Column Layout - Professional Prescription Style */}\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 md:gap-8 mt-4\">\n                    {/* Left Column */}\n                    <div className=\"space-y-5\">\n                      {/* Diagnosis */}\n                      <div className=\"border-b-2 border-gray-400 dark:border-gray-500 pb-3\">\n                        <label className=\"flex items-center gap-2 text-base font-bold text-gray-900 dark:text-gray-100 mb-2\">\n                          Diagnosis\n                          <FiEdit2 className=\"text-sm text-gray-500 cursor-pointer hover:text-teal-600\" />\n                        </label>\n                        <textarea\n                          value={prescriptionForm.diagnosis}\n                          onChange={(e) => setPrescriptionForm({ ...prescriptionForm, diagnosis: e.target.value })}\n                          rows={3}\n                          className=\"w-full px-3 py-2 border-2 border-gray-400 dark:border-gray-500 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-sm bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 resize-none font-medium\"\n                          placeholder=\"Enter diagnosis (one per line)\"\n                        />\n                      </div>\n\n                      {/* Investigation */}\n                      <div className=\"border-b-2 border-gray-400 dark:border-gray-500 pb-3\">\n                        <label className=\"flex items-center gap-2 text-base font-bold text-gray-900 dark:text-gray-100 mb-2\">\n                          Investigation\n                          <FiEdit2 className=\"text-sm text-gray-500 cursor-pointer hover:text-teal-600\" />\n                        </label>\n                        <textarea\n                          value={prescriptionForm.tests}\n                          onChange={(e) => setPrescriptionForm({ ...prescriptionForm, tests: e.target.value })}\n                          rows={3}\n                          className=\"w-full px-3 py-2 border-2 border-gray-400 dark:border-gray-500 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-sm bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 resize-none font-medium\"\n                          placeholder=\"Enter lab tests/investigations (one per line)\"\n                        />\n                      </div>\n                    </div>\n\n                    {/* Right Column */}\n                    <div className=\"space-y-5\">\n                      {/* Medicine */}\n                      <div className=\"border-b-2 border-gray-400 dark:border-gray-500 pb-3\">\n                        <label className=\"flex items-center gap-2 text-base font-bold text-gray-900 dark:text-gray-100 mb-2\">\n                          Medicine\n                          <FiEdit2 className=\"text-sm text-gray-500 cursor-pointer hover:text-teal-600\" />\n                        </label>\n                        <textarea\n                          value={prescriptionForm.medicines}\n                          onChange={(e) => setPrescriptionForm({ ...prescriptionForm, medicines: e.target.value })}\n                          rows={8}\n                          className=\"w-full px-3 py-2 border-2 border-gray-400 dark:border-gray-500 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 font-mono text-sm bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 resize-none\"\n                          placeholder=\"Medicine Name - Dosage - Frequency&#10;Example: Paracetamol - 500mg - 2 times daily\"\n                        />\n                      </div>\n\n                      {/* Advice */}\n                      <div className=\"border-b-2 border-gray-400 dark:border-gray-500 pb-3\">\n                        <label className=\"flex items-center gap-2 text-base font-bold text-gray-900 dark:text-gray-100 mb-2\">\n                          Advice\n                          <FiPlus className=\"text-sm text-gray-500 cursor-pointer hover:text-teal-600\" />\n                        </label>\n                        <textarea\n                          value={prescriptionForm.advice || prescriptionForm.rules}\n                          onChange={(e) => {\n                            setPrescriptionForm({ ...prescriptionForm, advice: e.target.value, rules: e.target.value });\n                          }}\n                          rows={4}\n                          className=\"w-full px-3 py-2 border-2 border-gray-400 dark:border-gray-500 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-sm bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 resize-none font-medium\"\n                          placeholder=\"Enter advice/guidelines (one per line)\"\n                        />\n                      </div>\n\n                      {/* Follow up */}\n                      <div className=\"border-b-2 border-gray-400 dark:border-gray-500 pb-3\">\n                        <label className=\"flex items-center gap-2 text-base font-bold text-gray-900 dark:text-gray-100 mb-2\">\n                          Follow up\n                          <FiPlus className=\"text-sm text-gray-500 cursor-pointer hover:text-teal-600\" />\n                        </label>\n                        <textarea\n                          value={prescriptionForm.followUp || prescriptionForm.instructions}\n                          onChange={(e) => {\n                            setPrescriptionForm({ ...prescriptionForm, followUp: e.target.value, instructions: e.target.value });\n                          }}\n                          rows={3}\n                          className=\"w-full px-3 py-2 border-2 border-gray-400 dark:border-gray-500 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-sm bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 resize-none font-medium\"\n                          placeholder=\"Enter follow-up instructions\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Action Buttons */}\n                  <div className=\"flex flex-wrap gap-2 sm:gap-3 pt-4 sm:pt-5 border-t-2 border-gray-400 dark:border-gray-500 mt-6 sm:mt-8 shrink-0\">\n                    <button\n                      type=\"submit\"\n                      onClick={handleCreatePrescription}\n                      className=\"px-5 py-2.5 bg-teal-600 dark:bg-teal-700 text-white rounded-lg hover:bg-teal-700 dark:hover:bg-teal-600 font-bold transition-colors flex items-center gap-2 text-sm shadow-md\"\n                    >\n                      <FiCheck className=\"text-base\" />\n                      Save & Send\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => setShowPreviewModal(true)}\n                      className=\"px-5 py-2.5 border-2 border-gray-400 dark:border-gray-500 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 font-semibold text-gray-700 dark:text-gray-300 transition-colors flex items-center gap-2 text-sm\"\n                    >\n                      <FiEye className=\"text-base\" />\n                      Preview\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        if (editingTemplate) {\n                          // If editing, keep the template name\n                          setTemplateName(editingTemplate.name);\n                        } else {\n                          setTemplateName('');\n                          setEditingTemplate(null);\n                        }\n                        setShowTemplateModal(true);\n                      }}\n                      className=\"px-5 py-2.5 border-2 border-gray-400 dark:border-gray-500 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 font-semibold text-gray-700 dark:text-gray-300 transition-colors text-sm flex items-center gap-2\"\n                    >\n                      <FiSave className=\"text-base\" />\n                      {editingTemplate ? 'Update Template' : 'Save as Template'}\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={handlePrint}\n                      className=\"px-5 py-2.5 border-2 border-gray-400 dark:border-gray-500 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 font-semibold text-gray-700 dark:text-gray-300 transition-colors flex items-center gap-2 text-sm\"\n                    >\n                      <FiPrinter className=\"text-base\" />\n                      Print\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        setShowCreateModal(false);\n                        setPrescriptionForm({ patientEmail: '', diagnosis: '', medicines: '', tests: '', rules: '', instructions: '', advice: '', followUp: '' });\n                        setProblem('');\n                        setProblems([]);\n                        setSuggestions(null);\n                        setEditingTemplate(null);\n                        setTemplateName('');\n                      }}\n                      className=\"px-5 py-2.5 border-2 border-gray-400 dark:border-gray-500 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 font-semibold text-gray-700 dark:text-gray-300 transition-colors flex items-center gap-2 text-sm ml-auto\"\n                    >\n                      <FiX className=\"text-base\" />\n                      Cancel\n                    </button>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Preview Modal */}\n        {showPreviewModal && (\n          <div\n            className=\"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto\"\n            onClick={(e) => {\n              if (e.target === e.currentTarget) {\n                setShowPreviewModal(false);\n              }\n            }}\n          >\n            <div className=\"bg-white dark:bg-gray-800 shadow-2xl w-full max-w-4xl my-auto rounded-lg overflow-hidden\" style={{ maxHeight: '90vh' }}>\n              <div className=\"p-6 border-b-2 border-gray-400 dark:border-gray-500 bg-white dark:bg-gray-800 shrink-0\">\n                <div className=\"flex justify-between items-center\">\n                  <h2 className=\"text-2xl font-bold text-gray-800 dark:text-gray-100\">Prescription Preview</h2>\n                  <button\n                    onClick={() => setShowPreviewModal(false)}\n                    className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\"\n                  >\n                    <FiX className=\"text-2xl\" />\n                  </button>\n                </div>\n              </div>\n              <div className=\"overflow-y-auto p-6 bg-white dark:bg-gray-800\" style={{ maxHeight: 'calc(90vh - 100px)' }}>\n                <div className=\"prescription-preview\">\n                  <div className=\"border-b-3 border-black pb-4 mb-4\">\n                    <div className=\"flex justify-between items-start mb-3\">\n                      {/* Doctor Info - Left */}\n                      <div className=\"flex-1\">\n                        <div className=\"text-2xl font-bold text-teal-600 mb-2\">\n                          {(() => {\n                            const name = doctorProfile?.user?.name || user?.name || 'Name';\n                            const cleanName = name.replace(/^dr\\.?\\s*/i, '');\n                            return `Dr. ${cleanName}`;\n                          })()}\n                        </div>\n                        {doctorProfile?.qualification && (\n                          <div className=\"text-sm text-gray-700 dark:text-gray-300 mb-1\">{doctorProfile.qualification}</div>\n                        )}\n                        {doctorProfile?.specialization && (\n                          <div className=\"text-sm text-gray-700 dark:text-gray-300 mb-1\">{doctorProfile.specialization}</div>\n                        )}\n                        {doctorProfile?.department?.name && (\n                          <div className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">{doctorProfile.department.name}</div>\n                        )}\n                        {Array.isArray(doctorProfile?.previousJobs) && doctorProfile.previousJobs.length > 0 && (\n                          <div className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">\n                            {doctorProfile.previousJobs.map((job: any) => \n                              typeof job === 'string' ? job : (job.title || job.position || job)\n                            ).join(', ')}\n                          </div>\n                        )}\n                      </div>\n                      \n                      {/* Logo - Right */}\n                      <div className=\"w-48 h-auto flex items-center justify-center\">\n                        <img src=\"/logo.png\" alt=\"MediWise Logo\" className=\"max-w-full h-auto object-contain\" />\n                      </div>\n                    </div>\n                    \n                    {/* Patient Info and Date - Bottom Section */}\n                    <div className=\"border-t-2 border-black dark:border-gray-600 pt-3 mt-3 flex justify-between items-center\">\n                      <div className=\"flex-1 text-sm text-black dark:text-gray-300\">\n                        {(() => {\n                          const fullName = patientInfo?.name || '';\n                          const namePart = fullName ? `Patient: ${fullName}` : '';\n                          const age = patientInfo?.age ? `    Age: ${patientInfo.age}` : '';\n                          const weight = patientInfo?.weight ? `Weight: ${patientInfo.weight}kg` : '';\n                          \n                          return [namePart, age, weight].filter(Boolean).join(' ');\n                        })()}\n                      </div>\n                      <div className=\"text-sm font-semibold text-black dark:text-gray-300\">\n                        {(() => {\n                          const date = new Date();\n                          const day = String(date.getDate()).padStart(2, '0');\n                          const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n                          const month = monthNames[date.getMonth()];\n                          const year = date.getFullYear();\n                          const dateOnly = `${day} ${month}, ${year}`;\n                          const timeOnly = format(date, 'h:mm a');\n                          return `Date: ${dateOnly} Time: ${timeOnly}`;\n                        })()}\n                      </div>\n                    </div>\n                  </div>\n                  \n                  {/* Two Column Layout with Blue Divider */}\n                  <div className=\"grid grid-cols-2 gap-10 mt-4 relative\" style={{ borderLeft: '3px solid #0066cc', paddingLeft: '20px', marginLeft: '20px' }}>\n                    {/* Left Column */}\n                    <div className=\"space-y-4\">\n                      {prescriptionForm.diagnosis && (\n                        <div>\n                          <div className=\"font-bold text-base border-b-2 border-gray-400 dark:border-gray-500 pb-1 mb-2 uppercase\">Diagnosis</div>\n                          <div className=\"text-sm whitespace-pre-wrap pl-2\">{prescriptionForm.diagnosis}</div>\n                        </div>\n                      )}\n                      {prescriptionForm.tests && (\n                        <div>\n                          <div className=\"font-bold text-base border-b-2 border-gray-400 dark:border-gray-500 pb-1 mb-2 uppercase\">Investigation</div>\n                          <div className=\"text-sm whitespace-pre-wrap pl-2\">{prescriptionForm.tests}</div>\n                        </div>\n                      )}\n                      {(prescriptionForm.followUp || prescriptionForm.instructions) && (\n                        <div>\n                          <div className=\"font-bold text-base border-b-2 border-gray-400 dark:border-gray-500 pb-1 mb-2 uppercase\">Follow Up</div>\n                          <div className=\"text-sm whitespace-pre-wrap pl-2\">{prescriptionForm.followUp || prescriptionForm.instructions}</div>\n                        </div>\n                      )}\n                    </div>\n                    \n                    {/* Right Column */}\n                    <div className=\"space-y-4\">\n                      {prescriptionForm.medicines && (\n                        <div>\n                          <div className=\"font-bold text-base border-b-2 border-gray-400 dark:border-gray-500 pb-1 mb-2 uppercase\">Medicine</div>\n                          <div className=\"text-sm font-mono whitespace-pre-wrap pl-2\">{prescriptionForm.medicines}</div>\n                        </div>\n                      )}\n                      {(prescriptionForm.advice || prescriptionForm.rules) && (\n                        <div>\n                          <div className=\"font-bold text-base border-b-2 border-gray-400 dark:border-gray-500 pb-1 mb-2 uppercase\">Advice</div>\n                          <div className=\"text-sm whitespace-pre-wrap pl-2\">{prescriptionForm.advice || prescriptionForm.rules}</div>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  {/* Footer with Company Information */}\n                  <div className=\"mt-8 border-t-2 border-gray-400 dark:border-gray-500 pt-4 text-center\">\n                    <div className=\"text-center\">\n                      <div className=\"font-bold text-lg text-teal-600 mb-2\">MediWise</div>\n                      <div className=\"text-sm text-gray-700 dark:text-gray-300 mb-1 flex justify-center items-center gap-1 flex-wrap\" style={{ fontFamily: 'Noto Sans Bengali, Kalpurush, Siyam Rupali, sans-serif' }}>\n                        <span>‡¶ö‡ßá‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞: ‡¶Æ‡ßá‡¶°‡¶ø‡¶ì‡¶Ø‡¶º‡¶æ‡¶á‡¶ú ‡¶ï‡¶®‡¶∏‡¶æ‡¶≤‡¶ü‡ßá‡¶∂‡¶® ‡¶∏‡ßá‡¶®‡ßç‡¶ü‡¶æ‡¶∞</span>\n                        <span>/</span>\n                        <span>Chamber: MediWise Consultation Center</span>\n                      </div>\n                      <div className=\"text-sm font-semibold text-teal-600 mt-2 flex justify-center items-center gap-1 flex-wrap\" style={{ fontFamily: 'Noto Sans Bengali, Kalpurush, Siyam Rupali, sans-serif' }}>\n                        <span>‡¶∏‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶≤‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶π‡¶ü‡¶≤‡¶æ‡¶á‡¶®</span>\n                        <span>/</span>\n                        <span>Hotline for Serial: <strong>+8809658303665</strong></span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div className=\"p-4 border-t-2 border-gray-400 dark:border-gray-500 bg-gray-50 dark:bg-gray-900 flex justify-end gap-2\">\n                <button\n                  onClick={handlePrint}\n                  className=\"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 font-semibold flex items-center gap-2\"\n                >\n                  <FiPrinter />\n                  Print\n                </button>\n                <button\n                  onClick={() => setShowPreviewModal(false)}\n                  className=\"px-4 py-2 border-2 border-gray-400 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 font-semibold\"\n                >\n                  Close\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Template Modal */}\n        {showTemplateModal && (\n          <div\n            className=\"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto\"\n            onClick={(e) => {\n              if (e.target === e.currentTarget) {\n                setShowTemplateModal(false);\n                setTemplateName('');\n                setEditingTemplate(null);\n              }\n            }}\n          >\n            <div className=\"bg-white dark:bg-gray-800 shadow-2xl w-full max-w-4xl my-auto rounded-lg overflow-hidden\" style={{ maxHeight: '90vh' }}>\n              <div className=\"p-6 border-b-2 border-gray-400 dark:border-gray-500 bg-white dark:bg-gray-800 shrink-0\">\n                <div className=\"flex justify-between items-center\">\n                  <h2 className=\"text-2xl font-bold text-gray-800 dark:text-gray-100\">\n                    {editingTemplate ? 'Edit Template' : 'Save as Template'}\n                  </h2>\n                  <button\n                    onClick={() => {\n                      setShowTemplateModal(false);\n                      setTemplateName('');\n                      setEditingTemplate(null);\n                    }}\n                    className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\"\n                  >\n                    <FiX className=\"text-2xl\" />\n                  </button>\n                </div>\n              </div>\n              <div className=\"overflow-y-auto p-6 bg-white dark:bg-gray-800\" style={{ maxHeight: 'calc(90vh - 200px)' }}>\n                <div className=\"mb-4\">\n                  <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">\n                    Template Name <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={templateName}\n                    onChange={(e) => setTemplateName(e.target.value)}\n                    className=\"w-full px-3 py-2 border-2 border-gray-400 dark:border-gray-500 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100\"\n                    placeholder=\"Enter template name (e.g., Common Cold, Fever, etc.)\"\n                  />\n                </div>\n                <div className=\"mb-4\">\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2\">\n                    This will save the current prescription form as a reusable template.\n                  </p>\n                </div>\n                {templates.length > 0 && (\n                  <div className=\"mt-6\">\n                    <h3 className=\"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-3\">Your Templates</h3>\n                    <div className=\"space-y-2 max-h-60 overflow-y-auto\">\n                      {templates.map((template) => (\n                        <div\n                          key={template.id}\n                          className=\"flex items-center justify-between p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700\"\n                        >\n                          <div className=\"flex-1\">\n                            <div className=\"font-semibold text-gray-800 dark:text-gray-100\">{template.name}</div>\n                            <div className=\"text-xs text-gray-500 dark:text-gray-400\">\n                              {format(parseISO(template.updatedAt), 'MMM dd, yyyy')}\n                            </div>\n                          </div>\n                          <div className=\"flex gap-2\">\n                            <button\n                              onClick={() => handleLoadTemplate(template)}\n                              className=\"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600\"\n                            >\n                              Load\n                            </button>\n                            <button\n                              onClick={() => handleEditTemplate(template)}\n                              className=\"px-3 py-1 text-sm bg-green-500 text-white rounded hover:bg-green-600\"\n                            >\n                              Edit\n                            </button>\n                            <button\n                              onClick={() => handleDeleteTemplate(template.id)}\n                              className=\"px-3 py-1 text-sm bg-red-500 text-white rounded hover:bg-red-600\"\n                            >\n                              Delete\n                            </button>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n              <div className=\"p-4 border-t-2 border-gray-400 dark:border-gray-500 bg-gray-50 dark:bg-gray-900 flex justify-end gap-2\">\n                <button\n                  onClick={() => {\n                    setShowTemplateModal(false);\n                    setTemplateName('');\n                    setEditingTemplate(null);\n                  }}\n                  className=\"px-4 py-2 border-2 border-gray-400 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 font-semibold\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleSaveTemplate}\n                  className=\"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 font-semibold flex items-center gap-2\"\n                >\n                  <FiSave />\n                  {editingTemplate ? 'Update Template' : 'Save Template'}\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}