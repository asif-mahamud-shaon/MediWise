{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/components/PatientSidebar.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { useAuth } from '@/context/AuthContext';\nimport { \n  FiChevronRight,\n  FiHome, \n  FiUser, \n  FiCalendar, \n  FiFileText, \n  FiUsers, \n  FiMessageCircle,\n  FiLogOut,\n  FiX,\n  FiMenu\n} from 'react-icons/fi';\nimport { useState, useEffect } from 'react';\n\ninterface PatientSidebarProps {\n  user: any;\n  logout: () => void;\n}\n\nconst PatientSidebar = ({ user, logout }: PatientSidebarProps) => {\n  const pathname = usePathname();\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n\n  const getInitials = (name: string) => {\n    return name\n      ?.split(' ')\n      ?.map((n: string) => n[0])\n      ?.join('')\n      ?.toUpperCase()\n      ?.slice(0, 2) || 'U';\n  };\n\n  const menu = [\n    { href: '/patient/dashboard', label: 'Dashboard', icon: FiHome },\n    { href: '/patient/doctors', label: 'Doctors', icon: FiUsers },\n    { href: '/patient/appointments', label: 'Appointments', icon: FiCalendar },\n    { href: '/patient/chat', label: 'Chats', icon: FiMessageCircle },\n    { href: '/patient/prescriptions', label: 'Prescriptions', icon: FiFileText },\n    { href: '/patient/profile', label: 'My Profile', icon: FiUser },\n  ];\n\n  // Close mobile menu when route changes\n  useEffect(() => {\n    setMobileMenuOpen(false);\n  }, [pathname]);\n\n  return (\n    <>\n      {/* Mobile Menu Button */}\n      <button\n        onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\n        className=\"lg:hidden fixed top-4 left-4 z-50 p-2 bg-teal-600 text-white rounded-lg shadow-lg\"\n      >\n        {mobileMenuOpen ? <FiX className=\"text-2xl\" /> : <FiMenu className=\"text-2xl\" />}\n      </button>\n\n      {/* Mobile Overlay */}\n      {mobileMenuOpen && (\n        <div\n          className=\"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40\"\n          onClick={() => setMobileMenuOpen(false)}\n        />\n      )}\n\n      {/* Sidebar */}\n      <div className={`\n        ${mobileMenuOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'}\n        ${sidebarCollapsed ? 'w-16' : 'w-64'} \n        bg-teal-600 text-white transition-all duration-300 \n        fixed left-0 top-0 h-full z-40 lg:z-20\n      `}>\n        <div className=\"p-4 h-full flex flex-col overflow-y-auto\">\n          {/* Collapse/Expand Button - Desktop only */}\n          <button\n            onClick={() => setSidebarCollapsed(!sidebarCollapsed)}\n            className=\"hidden lg:flex w-full items-center justify-center p-2 hover:bg-teal-700 rounded-lg transition-colors mb-4\"\n          >\n            <FiChevronRight className={`text-xl transform transition-transform ${sidebarCollapsed ? '' : 'rotate-180'}`} />\n          </button>\n\n          {/* Close Button - Mobile only */}\n          <button\n            onClick={() => setMobileMenuOpen(false)}\n            className=\"lg:hidden w-full flex items-center justify-end p-2 hover:bg-teal-700 rounded-lg transition-colors mb-4\"\n          >\n            <FiX className=\"text-xl\" />\n          </button>\n\n        {/* Logo */}\n        {!sidebarCollapsed && (\n          <div className=\"flex items-center justify-center mb-6\">\n            <div className=\"flex items-center gap-2\">\n              <img src=\"/logo.png\" alt=\"MediWise Logo\" className=\"w-10 h-10 object-contain\" onError={(e) => {\n                const target = e.target as HTMLImageElement;\n                target.style.display = 'none';\n              }} />\n              <span className=\"text-xl font-bold\">MediWise</span>\n            </div>\n          </div>\n        )}\n        {sidebarCollapsed && (\n          <div className=\"flex items-center justify-center mb-6\">\n            <img src=\"/logo.png\" alt=\"MediWise Logo\" className=\"w-10 h-10 object-contain\" onError={(e) => {\n              const target = e.target as HTMLImageElement;\n              target.style.display = 'none';\n            }} />\n          </div>\n        )}\n\n        {/* Patient Profile Section */}\n        {!sidebarCollapsed && (\n          <div className=\"mb-6 pb-6 border-b border-teal-500\">\n            <div className=\"flex items-center gap-3 mb-3\">\n              <div className=\"w-10 h-10 rounded-full bg-white bg-opacity-20 flex items-center justify-center text-sm font-semibold\">\n                {getInitials(user?.name || 'P')}\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-semibold truncate\">{user?.name}</p>\n                <p className=\"text-xs text-teal-200 capitalize\">Patient</p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Navigation Links */}\n        <nav className=\"space-y-1 flex-1\">\n          {menu.map((item) => {\n            const Icon = item.icon;\n            const isActive = pathname === item.href;\n            return (\n              <Link\n                key={item.href}\n                href={item.href}\n                className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${\n                  isActive\n                    ? 'bg-teal-700 text-white font-semibold'\n                    : 'text-teal-100 hover:bg-teal-700 hover:text-white'\n                }`}\n              >\n                <Icon className=\"text-xl flex-shrink-0\" />\n                {!sidebarCollapsed && <span className=\"text-sm\">{item.label}</span>}\n              </Link>\n            );\n          })}\n        </nav>\n\n        {/* Logout Button - Bottom and Centered */}\n        {!sidebarCollapsed && (\n          <div className=\"mt-auto pt-4 pb-4\">\n            <button \n              onClick={logout}\n              className=\"w-full flex items-center justify-center gap-3 px-4 py-3 rounded-lg text-teal-100 hover:bg-teal-700 transition-colors\"\n            >\n              <FiLogOut className=\"text-xl\" />\n              <span className=\"text-sm font-semibold\">LOGOUT</span>\n            </button>\n          </div>\n        )}\n        {sidebarCollapsed && (\n          <div className=\"mt-auto pt-4 pb-4\">\n            <button \n              onClick={logout}\n              className=\"w-full flex items-center justify-center p-3 rounded-lg text-teal-100 hover:bg-teal-700 transition-colors\"\n            >\n              <FiLogOut className=\"text-xl\" />\n            </button>\n          </div>\n        )}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default PatientSidebar;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 350, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/components/Loading.tsx"],"sourcesContent":["const Loading = () => {\r\n  return (\r\n    <div className=\"flex items-center justify-center min-h-screen\">\r\n      <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-600\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loading;\r\n\r\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,UAAU;IACd,qBACE,6RAAC;QAAI,WAAU;kBACb,cAAA,6RAAC;YAAI,WAAU;;;;;;;;;;;AAGrB;uCAEe","debugId":null}},
    {"offset": {"line": 377, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/utils/doctorName.ts"],"sourcesContent":["/**\n * Formats doctor name with appropriate prefix\n * - Removes any existing \"Dr.\" or \"Prof. Dr.\" prefix\n * - Adds \"Prof. Dr.\" if doctor is a professor (checks qualification)\n * - Otherwise adds \"Dr.\" prefix\n */\nexport function formatDoctorName(name: string, qualification?: string): string {\n  if (!name) return '';\n\n  // Remove any existing prefixes (case-insensitive)\n  let cleanName = name\n    .replace(/^(prof\\.?\\s*)?dr\\.?\\s*/i, '')\n    .replace(/^dr\\.?\\s*/i, '')\n    .trim();\n\n  // Check if doctor is a professor (check qualification for \"professor\" or \"prof\")\n  const isProfessor = qualification && (\n    qualification.toLowerCase().includes('professor') ||\n    qualification.toLowerCase().includes('prof.') ||\n    qualification.toLowerCase().includes('prof ')\n  );\n\n  // Add appropriate prefix\n  if (isProfessor) {\n    return `Prof. Dr. ${cleanName}`;\n  } else {\n    return `Dr. ${cleanName}`;\n  }\n}\n\n/**\n * Formats doctor name in Bengali with appropriate prefix\n * - Removes any existing \"ডাঃ\" or \"প্রফেসর ডাঃ\" prefix\n * - Adds \"প্রফেসর ডাঃ\" if doctor is a professor (checks qualification)\n * - Otherwise adds \"ডাঃ\" prefix\n */\nexport function formatDoctorNameBengali(name: string, qualification?: string): string {\n  if (!name) return '';\n\n  // Remove any existing prefixes (case-insensitive)\n  let cleanName = name\n    .replace(/^(প্রফেসর\\s*)?ডাঃ\\s*/i, '')\n    .replace(/^ডাঃ\\s*/i, '')\n    .replace(/^(prof\\.?\\s*)?dr\\.?\\s*/i, '')\n    .replace(/^dr\\.?\\s*/i, '')\n    .trim();\n\n  // Check if doctor is a professor (check qualification for \"professor\" or \"prof\")\n  const isProfessor = qualification && (\n    qualification.toLowerCase().includes('professor') ||\n    qualification.toLowerCase().includes('prof.') ||\n    qualification.toLowerCase().includes('prof ') ||\n    qualification.toLowerCase().includes('প্রফেসর')\n  );\n\n  // Add appropriate prefix\n  if (isProfessor) {\n    return `প্রফেসর ডাঃ ${cleanName}`;\n  } else {\n    return `ডাঃ ${cleanName}`;\n  }\n}\n\n"],"names":[],"mappings":"AAAA;;;;;CAKC;;;;;;AACM,SAAS,iBAAiB,IAAY,EAAE,aAAsB;IACnE,IAAI,CAAC,MAAM,OAAO;IAElB,kDAAkD;IAClD,IAAI,YAAY,KACb,OAAO,CAAC,2BAA2B,IACnC,OAAO,CAAC,cAAc,IACtB,IAAI;IAEP,iFAAiF;IACjF,MAAM,cAAc,iBAAiB,CACnC,cAAc,WAAW,GAAG,QAAQ,CAAC,gBACrC,cAAc,WAAW,GAAG,QAAQ,CAAC,YACrC,cAAc,WAAW,GAAG,QAAQ,CAAC,QACvC;IAEA,yBAAyB;IACzB,IAAI,aAAa;QACf,OAAO,CAAC,UAAU,EAAE,WAAW;IACjC,OAAO;QACL,OAAO,CAAC,IAAI,EAAE,WAAW;IAC3B;AACF;AAQO,SAAS,wBAAwB,IAAY,EAAE,aAAsB;IAC1E,IAAI,CAAC,MAAM,OAAO;IAElB,kDAAkD;IAClD,IAAI,YAAY,KACb,OAAO,CAAC,yBAAyB,IACjC,OAAO,CAAC,YAAY,IACpB,OAAO,CAAC,2BAA2B,IACnC,OAAO,CAAC,cAAc,IACtB,IAAI;IAEP,iFAAiF;IACjF,MAAM,cAAc,iBAAiB,CACnC,cAAc,WAAW,GAAG,QAAQ,CAAC,gBACrC,cAAc,WAAW,GAAG,QAAQ,CAAC,YACrC,cAAc,WAAW,GAAG,QAAQ,CAAC,YACrC,cAAc,WAAW,GAAG,QAAQ,CAAC,UACvC;IAEA,yBAAyB;IACzB,IAAI,aAAa;QACf,OAAO,CAAC,YAAY,EAAE,WAAW;IACnC,OAAO;QACL,OAAO,CAAC,IAAI,EAAE,WAAW;IAC3B;AACF","debugId":null}},
    {"offset": {"line": 418, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/app/patient/doctors/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState, useCallback, useMemo, useRef } from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useRouter } from 'next/navigation';\nimport PatientSidebar from '@/components/PatientSidebar';\nimport Loading from '@/components/Loading';\nimport api from '@/lib/api';\nimport Link from 'next/link';\nimport { FiStar, FiMapPin, FiClock, FiDollarSign, FiSearch, FiCalendar, FiX } from 'react-icons/fi';\nimport { useNotification } from '@/context/NotificationContext';\nimport { formatDoctorName } from '@/utils/doctorName';\n\nexport default function PatientDoctorsPage() {\n  const { user, loading: authLoading, logout } = useAuth();\n  const { showNotification } = useNotification();\n  const router = useRouter();\n  const [doctors, setDoctors] = useState<any[]>([]);\n  const [departments, setDepartments] = useState<any[]>([]);\n  const [selectedDept, setSelectedDept] = useState<string | null>(null);\n  const [searchQuery, setSearchQuery] = useState<string>('');\n  const [suggestions, setSuggestions] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [nextCursor, setNextCursor] = useState<string | null>(null);\n  const [hasMore, setHasMore] = useState(false);\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  \n  // Booking modal states\n  const [showBookingModal, setShowBookingModal] = useState(false);\n  const [selectedDoctor, setSelectedDoctor] = useState<any>(null);\n  const [availableSlots, setAvailableSlots] = useState<string[]>([]);\n  const [loadingSlots, setLoadingSlots] = useState(false);\n  const [appointmentForm, setAppointmentForm] = useState({\n    appointmentDate: '',\n    appointmentTime: '',\n    reason: '',\n  });\n  const [bookingError, setBookingError] = useState('');\n  const [showSuccessModal, setShowSuccessModal] = useState(false);\n  const [bookedAppointment, setBookedAppointment] = useState<any>(null);\n  const searchTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  const fetchDepartments = useCallback(async () => {\n    try {\n      const response = await api.get('/departments');\n      setDepartments(response.data.departments || []);\n    } catch (error) {\n      console.error('Error fetching departments:', error);\n    }\n  }, []);\n\n  const fetchDoctors = useCallback(async (cursor?: string) => {\n    try {\n      setLoading(true);\n      const params: any = { limit: 12, status: 'approved' };\n      if (cursor) params.cursor = cursor;\n      if (selectedDept) params.departmentId = selectedDept;\n      // Only include search if it's at least 2 characters and Enter was pressed\n      // Don't auto-search on every keystroke\n\n      const response = await api.get('/doctors', { params });\n      const doctorsData = response.data.doctors || [];\n      \n      if (cursor) {\n        // Filter out duplicates by doctor.id\n        setDoctors((prev) => {\n          const existingIds = new Set(prev.map(d => d.id));\n          const newDoctors = doctorsData.filter((d: any) => !existingIds.has(d.id));\n          return [...prev, ...newDoctors];\n        });\n      } else {\n        // Remove duplicates from initial load as well\n        const uniqueDoctors = doctorsData.filter((doctor: any, index: number, self: any[]) => \n          index === self.findIndex((d: any) => d.id === doctor.id)\n        );\n        setDoctors(uniqueDoctors);\n      }\n      setNextCursor(response.data.pagination?.nextCursor || null);\n      setHasMore(response.data.pagination?.hasMore || false);\n    } catch (error) {\n      console.error('Error fetching doctors:', error);\n      showNotification('Failed to load doctors. Please try again.', 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, [selectedDept, showNotification]);\n\n  const searchDoctors = useCallback(async (query: string) => {\n    try {\n      const response = await api.get('/doctors/search', {\n        params: { q: query, limit: 5 },\n      });\n      setSuggestions(response.data.doctors || []);\n      setShowSuggestions(true);\n    } catch (error) {\n      console.error('Error searching doctors:', error);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (!authLoading && (!user || user.role !== 'patient')) {\n      router.push('/login');\n      return;\n    }\n    if (user && user.role === 'patient') {\n      fetchDepartments();\n    }\n  }, [user, authLoading, router]);\n\n  useEffect(() => {\n    if (user && user.role === 'patient') {\n      fetchDoctors();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [user, selectedDept]); // fetchDoctors is stable enough - it only changes when selectedDept changes\n\n  // Optimized debounced search with cleanup\n  useEffect(() => {\n    if (searchTimeoutRef.current) {\n      clearTimeout(searchTimeoutRef.current);\n    }\n\n    if (searchQuery.length >= 2) {\n      searchTimeoutRef.current = setTimeout(() => {\n        searchDoctors(searchQuery);\n      }, 400);\n    } else {\n      setSuggestions([]);\n      setShowSuggestions(false);\n    }\n\n    return () => {\n      if (searchTimeoutRef.current) {\n        clearTimeout(searchTimeoutRef.current);\n      }\n    };\n  }, [searchQuery, searchDoctors]);\n\n\n  const handleSearchKeyPress = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter') {\n      setShowSuggestions(false);\n      // Reset cursor when searching\n      setNextCursor(null);\n      setHasMore(false);\n      // Search when Enter is pressed with search query\n      if (user && user.role === 'patient' && searchQuery.trim().length >= 2) {\n        const searchDoctorsWithQuery = async () => {\n          try {\n            setLoading(true);\n            const params: any = { limit: 12, status: 'approved', search: searchQuery.trim() };\n            if (selectedDept) params.departmentId = selectedDept;\n            \n            const response = await api.get('/doctors', { params });\n            const doctorsData = response.data.doctors || [];\n            const uniqueDoctors = doctorsData.filter((doctor: any, index: number, self: any[]) => \n              index === self.findIndex((d: any) => d.id === doctor.id)\n            );\n            setDoctors(uniqueDoctors);\n            setNextCursor(response.data.pagination?.nextCursor || null);\n            setHasMore(response.data.pagination?.hasMore || false);\n          } catch (error) {\n            console.error('Error searching doctors:', error);\n            showNotification('Failed to search doctors. Please try again.', 'error');\n          } finally {\n            setLoading(false);\n          }\n        };\n        searchDoctorsWithQuery();\n      } else if (user && user.role === 'patient') {\n        // If search is cleared, fetch all doctors\n        fetchDoctors();\n      }\n    }\n  };\n\n\n  const loadMore = () => {\n    if (nextCursor && !loading) {\n      fetchDoctors(nextCursor);\n    }\n  };\n\n  const openBookingModal = (doctor: any) => {\n    setSelectedDoctor(doctor);\n    setShowBookingModal(true);\n    setAppointmentForm({ appointmentDate: '', appointmentTime: '', reason: '' });\n    setAvailableSlots([]);\n    setBookingError('');\n  };\n\n  const fetchAvailableSlots = async () => {\n    if (!appointmentForm.appointmentDate || !selectedDoctor) return;\n    \n    try {\n      setLoadingSlots(true);\n      setBookingError('');\n      const response = await api.get('/appointments/available-slots', {\n        params: {\n          doctorId: selectedDoctor.id,\n          date: appointmentForm.appointmentDate,\n        },\n      });\n      setAvailableSlots(response.data.availableSlots || []);\n      if (response.data.isLimitReached) {\n        setBookingError('This doctor has reached the daily appointment limit for this date.');\n      }\n    } catch (error: any) {\n      console.error('Error fetching available slots:', error);\n      setAvailableSlots([]);\n      setBookingError(error.response?.data?.message || 'Failed to fetch available slots');\n    } finally {\n      setLoadingSlots(false);\n    }\n  };\n\n  useEffect(() => {\n    if (appointmentForm.appointmentDate && showBookingModal && selectedDoctor) {\n      fetchAvailableSlots();\n    }\n  }, [appointmentForm.appointmentDate, showBookingModal]);\n\n  const handleBookAppointment = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setBookingError('');\n\n    if (!appointmentForm.appointmentDate || !appointmentForm.appointmentTime) {\n      setBookingError('Please select both date and time');\n      return;\n    }\n\n    try {\n      setLoadingSlots(true);\n      const response = await api.post('/appointments', {\n        doctorId: selectedDoctor.id,\n        ...appointmentForm,\n      });\n      \n      // Store appointment details for success modal\n      const appointmentDetails = {\n        doctor: selectedDoctor,\n        date: appointmentForm.appointmentDate,\n        time: appointmentForm.appointmentTime,\n        reason: appointmentForm.reason,\n      };\n      setBookedAppointment(appointmentDetails);\n      \n      // Close booking modal\n      setShowBookingModal(false);\n      setAppointmentForm({ appointmentDate: '', appointmentTime: '', reason: '' });\n      setAvailableSlots([]);\n      \n      // Show success confirmation modal\n      setShowSuccessModal(true);\n      \n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || 'Failed to book appointment';\n      setBookingError(errorMessage);\n    } finally {\n      setLoadingSlots(false);\n    }\n  };\n\n  const getAvailableDates = () => {\n    if (!selectedDoctor?.availableDays) {\n      console.log('No availableDays found for doctor:', selectedDoctor?.id);\n      return [];\n    }\n    \n    // Parse available days\n    let days: string[] = [];\n    try {\n      if (Array.isArray(selectedDoctor.availableDays)) {\n        days = selectedDoctor.availableDays;\n      } else if (typeof selectedDoctor.availableDays === 'string') {\n        // Try to parse as JSON first\n        try {\n          days = JSON.parse(selectedDoctor.availableDays);\n        } catch {\n          // If not JSON, try splitting by comma\n          days = selectedDoctor.availableDays.split(',').map(d => d.trim()).filter(d => d);\n        }\n      }\n    } catch (e) {\n      console.error('Error parsing availableDays:', e, selectedDoctor.availableDays);\n      return [];\n    }\n    \n    console.log('Parsed available days:', days);\n    \n    if (days.length === 0) {\n      console.warn('No available days parsed');\n      return [];\n    }\n    \n    // Normalize day names and map to day numbers\n    const dayMap: { [key: string]: number } = {\n      'sunday': 0, 'monday': 1, 'tuesday': 2, 'wednesday': 3,\n      'thursday': 4, 'friday': 5, 'saturday': 6\n    };\n    \n    // Convert available day names to numbers (case-insensitive)\n    const availableDayNumbers = days\n      .map((day: string) => {\n        const normalizedDay = day.trim().toLowerCase();\n        const dayNumber = dayMap[normalizedDay];\n        if (dayNumber === undefined) {\n          console.warn('Unknown day name:', day, 'normalized:', normalizedDay);\n        }\n        return dayNumber;\n      })\n      .filter((d: number | undefined) => d !== undefined && d >= 0 && d <= 6) as number[];\n    \n    console.log('Available day numbers:', availableDayNumbers);\n    \n    if (availableDayNumbers.length === 0) {\n      console.warn('No valid available days found:', days);\n      return [];\n    }\n    \n    // Create a Set for faster lookup\n    const availableDaysSet = new Set(availableDayNumbers);\n    console.log('Available days set:', Array.from(availableDaysSet));\n    \n    const dates: string[] = [];\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    \n    // Get next 90 days and filter ONLY dates that fall on available days\n    // CRITICAL: Only include dates where dayOfWeek is EXACTLY in availableDaysSet\n    for (let i = 1; i <= 90; i++) {\n      const date = new Date(today);\n      date.setDate(today.getDate() + i);\n      date.setHours(12, 0, 0, 0); // Set to noon to avoid timezone issues\n      const dayOfWeek = date.getDay(); // 0 = Sunday, 1 = Monday, 2 = Tuesday, etc.\n      \n      // ABSOLUTE STRICT FILTERING: Double-check before adding\n      if (!availableDaysSet.has(dayOfWeek)) {\n        // Skip this date - it's not in available days\n        continue;\n      }\n      \n      // Format date as YYYY-MM-DD (local date, not UTC)\n      const year = date.getFullYear();\n      const month = String(date.getMonth() + 1).padStart(2, '0');\n      const day = String(date.getDate()).padStart(2, '0');\n      const dateString = `${year}-${month}-${day}`;\n      \n      // Verify once more before adding\n      const verifyDate = new Date(year, date.getMonth(), date.getDate());\n      const verifyDayOfWeek = verifyDate.getDay();\n      \n      if (availableDaysSet.has(verifyDayOfWeek)) {\n        dates.push(dateString);\n      }\n    }\n    \n    // Final verification: remove any invalid dates due to timezone issues\n    const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n    const validDates = dates.filter(d => {\n      // Parse date string (YYYY-MM-DD) as local date\n      const [year, month, day] = d.split('-').map(Number);\n      const dateObj = new Date(year, month - 1, day); // month is 0-indexed\n      const dayOfWeek = dateObj.getDay();\n      return availableDaysSet.has(dayOfWeek);\n    });\n    \n    if (validDates.length !== dates.length) {\n      const removed = dates.length - validDates.length;\n      console.warn(`Removed ${removed} invalid date(s) due to timezone mismatch`);\n    }\n    \n    console.log('Available dates filter:', {\n      availableDays: days,\n      availableDayNumbers: Array.from(availableDaysSet),\n      totalDatesGenerated: 90,\n      validDatesCount: validDates.length,\n      sampleDates: validDates.slice(0, 3).map(d => {\n        const [year, month, day] = d.split('-').map(Number);\n        const dateObj = new Date(year, month - 1, day);\n        return dayNames[dateObj.getDay()] + ', ' + dateObj.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });\n      })\n    });\n    \n    return validDates;\n  };\n\n  if (authLoading) {\n    return <Loading />;\n  }\n\n  if (!user || user.role !== 'patient') {\n    return null; // Will redirect via useEffect\n  }\n\n  if (loading && doctors.length === 0) {\n    return (\n      <div className=\"flex min-h-screen bg-gray-50\">\n        <PatientSidebar user={user} logout={logout} />\n        <main className=\"w-full lg:ml-64 flex-1 transition-all duration-300\">\n          <Loading />\n        </main>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex min-h-screen bg-gray-50\">\n      <PatientSidebar user={user} logout={logout} />\n      <main className=\"w-full lg:ml-64 flex-1 transition-all duration-300\">\n        {/* Modern Header with Simple Color */}\n        <header className=\"bg-teal-600 text-white shadow-xl\">\n          <div className=\"px-4 sm:px-6 lg:px-8 py-4 sm:py-6\">\n            <div>\n              <h1 className=\"text-2xl sm:text-3xl font-bold mb-2\">Find Doctors</h1>\n              <p className=\"text-sm sm:text-base text-teal-100\">Browse and book appointments with our expert doctors</p>\n            </div>\n          </div>\n        </header>\n\n        <div className=\"p-4 sm:p-6 lg:p-8\">\n          <div className=\"max-w-7xl mx-auto\">\n          {/* Search and Filter - Modern Design */}\n          <div className=\"mb-8\">\n            <div className=\"flex flex-col md:flex-row gap-4\">\n              <div className=\"flex-1 relative\">\n                <FiSearch className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-xl z-10\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"Search doctors by name, specialization...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  onKeyPress={handleSearchKeyPress}\n                  onFocus={() => {\n                    if (searchQuery.length >= 2 && suggestions.length > 0) {\n                      setShowSuggestions(true);\n                    }\n                  }}\n                  onBlur={() => setTimeout(() => setShowSuggestions(false), 300)}\n                  className=\"w-full pl-12 pr-4 py-4 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white shadow-lg\"\n                />\n                {showSuggestions && suggestions.length > 0 && (\n                  <div className=\"absolute z-50 w-full mt-2 bg-white border-2 border-teal-200 rounded-xl shadow-2xl max-h-60 overflow-y-auto\">\n                    {suggestions.map((doctor, index) => (\n                      <div\n                        key={doctor.id || `suggestion-${index}`}\n                        onClick={async () => {\n                          const doctorName = doctor.user?.name || '';\n                          setSearchQuery(doctorName);\n                          setShowSuggestions(false);\n                          // Trigger search immediately with the selected doctor's name\n                          try {\n                            setLoading(true);\n                            const params: any = { \n                              limit: 12, \n                              status: 'approved',\n                              search: doctorName.trim()\n                            };\n                            if (selectedDept) params.departmentId = selectedDept;\n\n                            const response = await api.get('/doctors', { params });\n                            const doctorsData = response.data.doctors || [];\n                            \n                            const uniqueDoctors = doctorsData.filter((d: any, idx: number, self: any[]) => \n                              idx === self.findIndex((doc: any) => doc.id === d.id)\n                            );\n                            \n                            setDoctors(uniqueDoctors);\n                            setNextCursor(response.data.pagination?.nextCursor || null);\n                            setHasMore(response.data.pagination?.hasMore || false);\n                          } catch (error) {\n                            console.error('Error searching doctors:', error);\n                          } finally {\n                            setLoading(false);\n                          }\n                        }}\n                        className=\"block px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-0 cursor-pointer transition-all\"\n                      >\n                        <p className=\"font-semibold text-gray-800\">{formatDoctorName(doctor.user?.name || '', doctor.qualification)}</p>\n                        <p className=\"text-sm text-gray-600\">{doctor.specialization}</p>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n              \n              {/* Department Filter Dropdown */}\n              <select\n                value={selectedDept || ''}\n                onChange={(e) => setSelectedDept(e.target.value || null)}\n                className=\"px-4 py-4 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white min-w-[200px] md:min-w-[250px] shadow-lg font-semibold\"\n              >\n                <option value=\"\">All Departments</option>\n                {departments.map((dept) => (\n                  <option key={dept.id || dept.name} value={dept.id || ''}>\n                    {typeof dept.icon === 'string' ? dept.icon : ''} {typeof dept.name === 'string' ? dept.name : 'Unknown'}\n                  </option>\n                ))}\n              </select>\n            </div>\n          </div>\n\n          {/* Doctors Grid */}\n          {doctors.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <p className=\"text-gray-500 text-lg\">No doctors found</p>\n            </div>\n          ) : (\n            <>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8\">\n                {doctors.map((doctor, index) => (\n                  <div\n                    key={doctor.id || `doctor-${index}`}\n                    className=\"bg-white rounded-2xl shadow-xl p-6 border-2 border-gray-300 hover:shadow-2xl transition-all transform hover:scale-105\"\n                  >\n                    <div className=\"flex items-start gap-4 mb-4\">\n                      <div className=\"w-20 h-20 rounded-2xl bg-teal-100 flex items-center justify-center text-teal-600 text-2xl font-bold shadow-lg ring-4 ring-white ring-opacity-50\">\n                        {doctor.user?.name?.charAt(0)?.toUpperCase() || 'D'}\n                      </div>\n                      <div className=\"flex-1\">\n                        <h3 className=\"font-semibold text-gray-800 text-lg\">\n                          {(() => {\n                            return formatDoctorName(doctor.user?.name || '', doctor.qualification);\n                          })()}\n                        </h3>\n                        <p className=\"text-sm text-gray-600\">{doctor.specialization}</p>\n                        <div className=\"flex items-center gap-1 mt-1\">\n                          <FiStar className=\"text-yellow-400 fill-yellow-400\" />\n                          <span className=\"text-sm text-gray-600\">4.8</span>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"space-y-2 text-sm text-gray-600\">\n                      {doctor.department && (\n                        <div className=\"flex items-center gap-2\">\n                          <FiMapPin className=\"text-gray-400\" />\n                          <span>{typeof doctor.department === 'string' ? doctor.department : doctor.department?.name || 'N/A'}</span>\n                        </div>\n                      )}\n                      {doctor.experience && (\n                        <div className=\"flex items-center gap-2\">\n                          <FiClock className=\"text-gray-400\" />\n                          <span>{doctor.experience} years experience</span>\n                        </div>\n                      )}\n                      {doctor.consultationFee && (\n                        <div className=\"flex items-center gap-2\">\n                          <FiDollarSign className=\"text-gray-400\" />\n                          <span>${doctor.consultationFee}</span>\n                        </div>\n                      )}\n                    </div>\n                    <button \n                      onClick={(e) => {\n                        e.preventDefault();\n                        openBookingModal(doctor);\n                      }}\n                      className=\"mt-4 w-full px-6 py-3 bg-teal-600 text-white rounded-xl hover:bg-teal-700 hover:shadow-xl transition-all font-bold flex items-center justify-center gap-2 transform hover:scale-105\"\n                    >\n                      <FiCalendar className=\"text-lg\" />\n                      Book Appointment\n                    </button>\n                  </div>\n                ))}\n              </div>\n\n              {hasMore && (\n                <div className=\"text-center mt-6\">\n                  <button\n                    onClick={loadMore}\n                    disabled={loading}\n                    className=\"px-8 py-4 bg-teal-600 text-white rounded-xl hover:bg-teal-700 hover:shadow-xl transition-all font-bold disabled:opacity-50 transform hover:scale-105\"\n                  >\n                    {loading ? 'Loading...' : 'Load More'}\n                  </button>\n                </div>\n              )}\n            </>\n          )}\n\n          {/* Modern Professional Booking Modal */}\n          {showBookingModal && selectedDoctor && (\n            <div className=\"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center z-50 p-4\" onClick={(e) => {\n              if (e.target === e.currentTarget) {\n                setShowBookingModal(false);\n                setSelectedDoctor(null);\n                setAppointmentForm({ appointmentDate: '', appointmentTime: '', reason: '' });\n                setAvailableSlots([]);\n                setBookingError('');\n              }\n            }}>\n              <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col\">\n                {/* Modal Header */}\n                <div className=\"px-6 py-5 border-b border-gray-200\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-10 h-10 rounded-lg bg-teal-600 flex items-center justify-center flex-shrink-0\">\n                        <FiCalendar className=\"text-xl text-white\" />\n                      </div>\n                      <div>\n                        <h2 className=\"text-xl font-bold text-gray-900\">Book Appointment</h2>\n                        <p className=\"text-sm text-gray-500\">Schedule your visit with {formatDoctorName(selectedDoctor.user?.name || '', selectedDoctor.qualification)}</p>\n                      </div>\n                    </div>\n                    <button\n                      onClick={() => {\n                        setShowBookingModal(false);\n                        setSelectedDoctor(null);\n                        setAppointmentForm({ appointmentDate: '', appointmentTime: '', reason: '' });\n                        setAvailableSlots([]);\n                        setBookingError('');\n                      }}\n                      className=\"text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg p-1.5 transition-all\"\n                    >\n                      <FiX className=\"text-lg\" />\n                    </button>\n                  </div>\n                </div>\n\n                {/* Doctor Info Card */}\n                <div className=\"px-6 py-4 bg-gray-50 border-b border-gray-200\">\n                  <div className=\"flex items-center gap-4\">\n                    <div className=\"w-14 h-14 rounded-full bg-teal-600 flex items-center justify-center text-white text-lg font-bold flex-shrink-0\">\n                      {selectedDoctor.user?.name?.charAt(0)?.toUpperCase() || 'D'}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <h3 className=\"font-bold text-gray-900 text-base\">{formatDoctorName(selectedDoctor.user?.name || '', selectedDoctor.qualification)}</h3>\n                      <p className=\"text-sm text-gray-600\">{selectedDoctor.specialization}</p>\n                      <div className=\"flex items-center gap-3 mt-2 flex-wrap\">\n                        {selectedDoctor.consultationFee && (\n                          <span className=\"text-sm font-semibold text-white bg-teal-600 px-3 py-1 rounded-full inline-flex items-center\">\n                            ${parseFloat(selectedDoctor.consultationFee).toFixed(2)}\n                          </span>\n                        )}\n                        {selectedDoctor.experience && (\n                          <span className=\"text-xs text-gray-600 flex items-center gap-1\">\n                            <FiClock className=\"text-xs\" />\n                            {selectedDoctor.experience} years experience\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Booking Form */}\n                <form onSubmit={handleBookAppointment} className=\"flex-1 overflow-y-auto px-6 py-5 space-y-5\">\n                  {/* Date Selection */}\n                  <div>\n                    <label className=\"block text-sm font-semibold text-gray-800 mb-2 flex items-center gap-2\">\n                      <FiCalendar className=\"text-teal-600 text-base\" />\n                      <span>Select Date <span className=\"text-red-500\">*</span></span>\n                    </label>\n                    <select\n                      value={appointmentForm.appointmentDate}\n                      onChange={(e) => setAppointmentForm({ ...appointmentForm, appointmentDate: e.target.value, appointmentTime: '' })}\n                      required\n                      className=\"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all bg-white text-gray-900 text-sm\"\n                    >\n                      <option value=\"\">Choose a date</option>\n                      {getAvailableDates().map((date) => {\n                        const dateObj = new Date(date);\n                        return (\n                          <option key={date} value={date}>\n                            {dateObj.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}\n                          </option>\n                        );\n                      })}\n                    </select>\n                    {selectedDoctor.availableDays && (\n                      <p className=\"text-xs text-gray-500 mt-2\">\n                        Available days: <span className=\"font-medium\">{Array.isArray(selectedDoctor.availableDays) ? selectedDoctor.availableDays.join(', ') : JSON.parse(selectedDoctor.availableDays || '[]').join(', ')}</span>\n                      </p>\n                    )}\n                  </div>\n\n                  {/* Time Slots - Show after date is selected */}\n                  {appointmentForm.appointmentDate && (\n                    <div>\n                      <label className=\"block text-sm font-semibold text-gray-800 mb-2 flex items-center gap-2\">\n                        <FiClock className=\"text-teal-600 text-base\" />\n                        <span>Select Time <span className=\"text-red-500\">*</span></span>\n                      </label>\n                      {loadingSlots ? (\n                        <div className=\"text-center py-6 bg-gray-50 rounded-lg border border-gray-200\">\n                          <div className=\"inline-block animate-spin rounded-full h-7 w-7 border-2 border-teal-600 border-t-transparent\"></div>\n                          <p className=\"text-gray-600 text-sm mt-2\">Loading available time slots...</p>\n                        </div>\n                      ) : availableSlots.length > 0 ? (\n                        <div className=\"grid grid-cols-4 gap-2 max-h-40 overflow-y-auto p-2 bg-gray-50 rounded-lg border border-gray-200\">\n                          {availableSlots.map((slot) => (\n                            <button\n                              key={slot}\n                              type=\"button\"\n                              onClick={() => setAppointmentForm({ ...appointmentForm, appointmentTime: slot })}\n                              className={`px-3 py-2 text-sm font-medium rounded-lg transition-all ${\n                                appointmentForm.appointmentTime === slot\n                                  ? 'bg-teal-600 text-white shadow-md'\n                                  : 'bg-white text-gray-700 hover:bg-gray-100 border border-gray-300'\n                              }`}\n                            >\n                              {slot}\n                            </button>\n                          ))}\n                        </div>\n                      ) : (\n                        <div className=\"text-center py-6 bg-red-50 border border-red-200 rounded-lg\">\n                          <p className=\"text-red-700 font-medium text-sm\">No available slots for this date</p>\n                          <p className=\"text-xs text-red-600 mt-1\">Please select another date</p>\n                        </div>\n                      )}\n                    </div>\n                  )}\n\n                  {/* Reason */}\n                  <div>\n                    <label className=\"block text-sm font-semibold text-gray-800 mb-2\">\n                      Reason for Visit <span className=\"text-gray-400 font-normal\">(Optional)</span>\n                    </label>\n                    <textarea\n                      value={appointmentForm.reason}\n                      onChange={(e) => setAppointmentForm({ ...appointmentForm, reason: e.target.value })}\n                      placeholder=\"Briefly describe your reason for the appointment...\"\n                      rows={3}\n                      className=\"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all resize-none text-gray-900 placeholder-gray-400 text-sm\"\n                    />\n                  </div>\n\n                  {/* Error Message */}\n                  {bookingError && (\n                    <div className=\"bg-red-50 border border-red-200 rounded-lg p-3 flex items-start gap-2\">\n                      <div className=\"w-4 h-4 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5\">\n                        <FiX className=\"text-red-600 text-xs\" />\n                      </div>\n                      <p className=\"text-sm text-red-700 font-medium flex-1\">{bookingError}</p>\n                    </div>\n                  )}\n\n                  {/* Action Buttons */}\n                  <div className=\"flex gap-3 pt-4 border-t border-gray-200\">\n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        setShowBookingModal(false);\n                        setSelectedDoctor(null);\n                        setAppointmentForm({ appointmentDate: '', appointmentTime: '', reason: '' });\n                        setAvailableSlots([]);\n                        setBookingError('');\n                      }}\n                      className=\"flex-1 px-5 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition-all text-sm\"\n                    >\n                      Cancel\n                    </button>\n                    <button\n                      type=\"submit\"\n                      disabled={!appointmentForm.appointmentDate || !appointmentForm.appointmentTime || loadingSlots}\n                      className=\"flex-1 px-5 py-2.5 bg-teal-600 text-white rounded-lg hover:bg-teal-700 font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm\"\n                    >\n                      <FiCalendar className=\"text-base\" />\n                      Confirm Booking\n                    </button>\n                  </div>\n                </form>\n              </div>\n            </div>\n          )}\n\n          {/* Success Confirmation Modal */}\n          {showSuccessModal && bookedAppointment && (\n            <div className=\"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center z-50 p-4\" onClick={(e) => {\n              if (e.target === e.currentTarget) {\n                setShowSuccessModal(false);\n                setBookedAppointment(null);\n                router.push('/patient/appointments');\n              }\n            }}>\n              <div className=\"bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden\">\n                {/* Success Header */}\n                <div className=\"px-8 py-6 border-b border-gray-100\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-4\">\n                      <div className=\"w-12 h-12 rounded-2xl bg-green-100 flex items-center justify-center\">\n                        <svg className=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                        </svg>\n                      </div>\n                      <div>\n                        <h2 className=\"text-2xl font-bold text-gray-900\">Appointment Confirmed!</h2>\n                        <p className=\"text-sm text-gray-500 mt-0.5\">Your appointment has been successfully booked</p>\n                      </div>\n                    </div>\n                    <button\n                      onClick={() => {\n                        setShowSuccessModal(false);\n                        setBookedAppointment(null);\n                        router.push('/patient/appointments');\n                      }}\n                      className=\"text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl p-2 transition-all\"\n                    >\n                      <FiX className=\"text-xl\" />\n                    </button>\n                  </div>\n                </div>\n\n                {/* Appointment Details */}\n                <div className=\"px-8 py-6 space-y-4\">\n                  <div className=\"bg-white rounded-xl p-4 border-2 border-gray-300\">\n                    <div className=\"flex items-center gap-3 mb-3\">\n                      <div className=\"w-12 h-12 rounded-xl bg-teal-100 flex items-center justify-center text-teal-600 font-bold\">\n                        {bookedAppointment.doctor.user?.name?.charAt(0)?.toUpperCase() || 'D'}\n                      </div>\n                      <div>\n                        <h3 className=\"font-bold text-gray-900\">{formatDoctorName(bookedAppointment.doctor.user?.name || '', bookedAppointment.doctor.qualification)}</h3>\n                        <p className=\"text-sm text-gray-600\">{bookedAppointment.doctor.specialization}</p>\n                      </div>\n                    </div>\n                    \n                    <div className=\"space-y-2 text-sm\">\n                      <div className=\"flex items-center gap-2 text-gray-700\">\n                        <FiCalendar className=\"text-teal-600\" />\n                        <span className=\"font-medium\">\n                          {new Date(bookedAppointment.date).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}\n                        </span>\n                      </div>\n                      <div className=\"flex items-center gap-2 text-gray-700\">\n                        <FiClock className=\"text-teal-600\" />\n                        <span className=\"font-medium\">{bookedAppointment.time}</span>\n                      </div>\n                      {bookedAppointment.doctor.consultationFee && (\n                        <div className=\"flex items-center gap-2 text-gray-700\">\n                          <FiDollarSign className=\"text-teal-600\" />\n                          <span className=\"font-medium\">Fee: ${bookedAppointment.doctor.consultationFee}</span>\n                        </div>\n                      )}\n                      {bookedAppointment.reason && (\n                        <div className=\"pt-2 border-t border-teal-200\">\n                          <p className=\"text-xs text-gray-500 uppercase mb-1\">Reason</p>\n                          <p className=\"text-gray-700\">{bookedAppointment.reason}</p>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Notification Message */}\n                  <div className=\"bg-blue-50 border-2 border-blue-200 rounded-xl p-4\">\n                    <p className=\"text-sm text-blue-800 font-medium\">\n                      ✓ You'll receive a confirmation email shortly\n                    </p>\n                    <p className=\"text-xs text-blue-600 mt-1\">\n                      Check your appointments page to view all your scheduled visits\n                    </p>\n                  </div>\n                </div>\n\n                {/* Action Button */}\n                <div className=\"px-8 py-6 border-t border-gray-100 bg-gray-50\">\n                  <button\n                    onClick={() => {\n                      setShowSuccessModal(false);\n                      setBookedAppointment(null);\n                      router.push('/patient/appointments');\n                    }}\n                    className=\"w-full px-6 py-3.5 bg-teal-600 text-white rounded-xl hover:bg-teal-700 font-semibold transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-2\"\n                  >\n                    <FiCalendar className=\"text-lg\" />\n                    View My Appointments\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}