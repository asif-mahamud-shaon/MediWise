{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/components/Loading.tsx"],"sourcesContent":["const Loading = () => {\r\n  return (\r\n    <div className=\"flex items-center justify-center min-h-screen\">\r\n      <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-600\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loading;\r\n\r\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,UAAU;IACd,qBACE,4OAAC;QAAI,WAAU;kBACb,cAAA,4OAAC;YAAI,WAAU;;;;;;;;;;;AAGrB;KANM;uCAQS","debugId":null}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/components/PatientSidebar.tsx"],"sourcesContent":["'use client';\r\n\r\nimport Link from 'next/link';\r\nimport { usePathname } from 'next/navigation';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { \r\n  FiChevronRight,\r\n  FiHome, \r\n  FiUser, \r\n  FiCalendar, \r\n  FiFileText, \r\n  FiUsers, \r\n  FiMessageCircle,\r\n  FiLogOut\r\n} from 'react-icons/fi';\r\nimport { useState } from 'react';\r\n\r\ninterface PatientSidebarProps {\r\n  user: any;\r\n  logout: () => void;\r\n}\r\n\r\nconst PatientSidebar = ({ user, logout }: PatientSidebarProps) => {\r\n  const pathname = usePathname();\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n\r\n  const getInitials = (name: string) => {\r\n    return name\r\n      ?.split(' ')\r\n      ?.map((n: string) => n[0])\r\n      ?.join('')\r\n      ?.toUpperCase()\r\n      ?.slice(0, 2) || 'U';\r\n  };\r\n\r\n  const menu = [\r\n    { href: '/patient/dashboard', label: 'Dashboard', icon: FiHome },\r\n    { href: '/patient/doctors', label: 'Doctors', icon: FiUsers },\r\n    { href: '/patient/appointments', label: 'Appointments', icon: FiCalendar },\r\n    { href: '/patient/chat', label: 'Chats', icon: FiMessageCircle },\r\n    { href: '/patient/prescriptions', label: 'Prescriptions', icon: FiFileText },\r\n    { href: '/patient/profile', label: 'My Profile', icon: FiUser },\r\n  ];\r\n\r\n  return (\r\n    <div className={`${sidebarCollapsed ? 'w-16' : 'w-64'} bg-teal-600 text-white transition-all duration-300 fixed left-0 top-0 h-full z-20`}>\r\n      <div className=\"p-4\">\r\n        {/* Collapse/Expand Button */}\r\n        <button\r\n          onClick={() => setSidebarCollapsed(!sidebarCollapsed)}\r\n          className=\"w-full flex items-center justify-center p-2 hover:bg-teal-700 rounded-lg transition-colors mb-4\"\r\n        >\r\n          <FiChevronRight className={`text-xl transform transition-transform ${sidebarCollapsed ? '' : 'rotate-180'}`} />\r\n        </button>\r\n\r\n        {/* Medical Symbol / Logo */}\r\n        {!sidebarCollapsed && (\r\n          <div className=\"flex items-center justify-center mb-6\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-2xl\">ü©∫</span>\r\n              <span className=\"text-xl font-bold\">MediWise</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Patient Profile Section */}\r\n        {!sidebarCollapsed && (\r\n          <div className=\"mb-6 pb-6 border-b border-teal-500\">\r\n            <div className=\"flex items-center gap-3 mb-3\">\r\n              <div className=\"w-10 h-10 rounded-full bg-white bg-opacity-20 flex items-center justify-center text-sm font-semibold\">\r\n                {getInitials(user?.name || 'P')}\r\n              </div>\r\n              <div className=\"flex-1 min-w-0\">\r\n                <p className=\"text-sm font-semibold truncate\">{user?.name}</p>\r\n                <p className=\"text-xs text-teal-200 capitalize\">Patient</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Navigation Links */}\r\n        <nav className=\"space-y-1\">\r\n          {menu.map((item) => {\r\n            const Icon = item.icon;\r\n            const isActive = pathname === item.href;\r\n            return (\r\n              <Link\r\n                key={item.href}\r\n                href={item.href}\r\n                className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${\r\n                  isActive\r\n                    ? 'bg-teal-700 text-white font-semibold'\r\n                    : 'text-teal-100 hover:bg-teal-700 hover:text-white'\r\n                }`}\r\n              >\r\n                <Icon className=\"text-xl flex-shrink-0\" />\r\n                {!sidebarCollapsed && <span className=\"text-sm\">{item.label}</span>}\r\n              </Link>\r\n            );\r\n          })}\r\n        </nav>\r\n\r\n        {/* Logout Button */}\r\n        {!sidebarCollapsed && (\r\n          <div className=\"absolute bottom-4 left-4 right-4\">\r\n            <button \r\n              onClick={logout}\r\n              className=\"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-teal-100 hover:bg-teal-700 transition-colors\"\r\n            >\r\n              <FiLogOut className=\"text-xl\" />\r\n              <span className=\"text-sm\">LOGOUT</span>\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PatientSidebar;\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AAUA;;;AAfA;;;;;AAsBA,MAAM,iBAAiB,CAAC,EAAE,IAAI,EAAE,MAAM,EAAuB;;IAC3D,MAAM,WAAW,IAAA,mMAAW;IAC5B,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,wNAAQ,EAAC;IAEzD,MAAM,cAAc,CAAC;QACnB,OAAO,MACH,MAAM,MACN,IAAI,CAAC,IAAc,CAAC,CAAC,EAAE,GACvB,KAAK,KACL,eACA,MAAM,GAAG,MAAM;IACrB;IAEA,MAAM,OAAO;QACX;YAAE,MAAM;YAAsB,OAAO;YAAa,MAAM,0MAAM;QAAC;QAC/D;YAAE,MAAM;YAAoB,OAAO;YAAW,MAAM,2MAAO;QAAC;QAC5D;YAAE,MAAM;YAAyB,OAAO;YAAgB,MAAM,8MAAU;QAAC;QACzE;YAAE,MAAM;YAAiB,OAAO;YAAS,MAAM,mNAAe;QAAC;QAC/D;YAAE,MAAM;YAA0B,OAAO;YAAiB,MAAM,8MAAU;QAAC;QAC3E;YAAE,MAAM;YAAoB,OAAO;YAAc,MAAM,0MAAM;QAAC;KAC/D;IAED,qBACE,4OAAC;QAAI,WAAW,GAAG,mBAAmB,SAAS,OAAO,kFAAkF,CAAC;kBACvI,cAAA,4OAAC;YAAI,WAAU;;8BAEb,4OAAC;oBACC,SAAS,IAAM,oBAAoB,CAAC;oBACpC,WAAU;8BAEV,cAAA,4OAAC,kNAAc;wBAAC,WAAW,CAAC,uCAAuC,EAAE,mBAAmB,KAAK,cAAc;;;;;;;;;;;gBAI5G,CAAC,kCACA,4OAAC;oBAAI,WAAU;8BACb,cAAA,4OAAC;wBAAI,WAAU;;0CACb,4OAAC;gCAAK,WAAU;0CAAW;;;;;;0CAC3B,4OAAC;gCAAK,WAAU;0CAAoB;;;;;;;;;;;;;;;;;gBAMzC,CAAC,kCACA,4OAAC;oBAAI,WAAU;8BACb,cAAA,4OAAC;wBAAI,WAAU;;0CACb,4OAAC;gCAAI,WAAU;0CACZ,YAAY,MAAM,QAAQ;;;;;;0CAE7B,4OAAC;gCAAI,WAAU;;kDACb,4OAAC;wCAAE,WAAU;kDAAkC,MAAM;;;;;;kDACrD,4OAAC;wCAAE,WAAU;kDAAmC;;;;;;;;;;;;;;;;;;;;;;;8BAOxD,4OAAC;oBAAI,WAAU;8BACZ,KAAK,GAAG,CAAC,CAAC;wBACT,MAAM,OAAO,KAAK,IAAI;wBACtB,MAAM,WAAW,aAAa,KAAK,IAAI;wBACvC,qBACE,4OAAC,yNAAI;4BAEH,MAAM,KAAK,IAAI;4BACf,WAAW,CAAC,+DAA+D,EACzE,WACI,yCACA,oDACJ;;8CAEF,4OAAC;oCAAK,WAAU;;;;;;gCACf,CAAC,kCAAoB,4OAAC;oCAAK,WAAU;8CAAW,KAAK,KAAK;;;;;;;2BATtD,KAAK,IAAI;;;;;oBAYpB;;;;;;gBAID,CAAC,kCACA,4OAAC;oBAAI,WAAU;8BACb,cAAA,4OAAC;wBACC,SAAS;wBACT,WAAU;;0CAEV,4OAAC,4MAAQ;gCAAC,WAAU;;;;;;0CACpB,4OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOxC;GA/FM;;QACa,mMAAW;;;KADxB;uCAiGS","debugId":null}},
    {"offset": {"line": 289, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/app/patient/prescriptions/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState, useCallback, useMemo } from 'react';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useRouter } from 'next/navigation';\r\nimport Loading from '@/components/Loading';\r\nimport PatientSidebar from '@/components/PatientSidebar';\r\nimport api from '@/lib/api';\r\nimport { format, parseISO } from 'date-fns';\r\nimport { FiFileText, FiPrinter, FiCalendar, FiDownload, FiX } from 'react-icons/fi';\r\nimport { QRCodeSVG } from 'qrcode.react';\r\nimport html2canvas from 'html2canvas';\r\n\r\nexport default function PatientPrescriptionsPage() {\r\n  const { user, loading: authLoading, logout } = useAuth();\r\n  const router = useRouter();\r\n  const [prescriptions, setPrescriptions] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedPrescription, setSelectedPrescription] = useState<any>(null);\r\n  const [showPreviewModal, setShowPreviewModal] = useState(false);\r\n\r\n  const fetchPrescriptions = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await api.get('/prescriptions?limit=100');\r\n      let allPrescriptions = response.data.prescriptions || [];\r\n      \r\n      // Filter prescriptions for current patient\r\n      allPrescriptions = allPrescriptions.filter((prescription: any) => \r\n        prescription.patient?.email === user?.email || prescription.patientId === user?.id\r\n      );\r\n      \r\n      // Sort by date (newest first)\r\n      allPrescriptions.sort((a: any, b: any) => \r\n        new Date(b.prescriptionDate).getTime() - new Date(a.prescriptionDate).getTime()\r\n      );\r\n      \r\n      setPrescriptions(allPrescriptions);\r\n    } catch (error) {\r\n      console.error('Error fetching prescriptions:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    if (!authLoading && !user) {\r\n      router.push('/login');\r\n      return;\r\n    }\r\n    if (user && user.role !== 'patient') {\r\n      if (user.role === 'admin') {\r\n        router.push('/admin/dashboard');\r\n      } else if (user.role === 'doctor') {\r\n        router.push('/doctor/dashboard');\r\n      } else {\r\n        router.push('/dashboard');\r\n      }\r\n      return;\r\n    }\r\n    if (user && user.role === 'patient') {\r\n      fetchPrescriptions();\r\n    }\r\n  }, [user, authLoading, router, fetchPrescriptions]);\r\n\r\n  // Memoize month names to avoid recreating array\r\n  const monthNames = useMemo(() => ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'], []);\r\n\r\n  const handlePrint = useCallback((prescription: any) => {\r\n    const printWindow = window.open('', '_blank');\r\n    if (!printWindow) return;\r\n\r\n    const doctorProfile = prescription.doctor;\r\n    const patientInfo = prescription.patient || user;\r\n    const prescriptionDate = new Date(prescription.prescriptionDate);\r\n    const day = String(prescriptionDate.getDate()).padStart(2, '0');\r\n    const month = monthNames[prescriptionDate.getMonth()];\r\n    const year = prescriptionDate.getFullYear();\r\n    const dateOnly = `${day} ${month}, ${year}`;\r\n    const timeOnly = format(prescriptionDate, 'h:mm a');\r\n\r\n    const printContent = `\r\n      <!DOCTYPE html>\r\n      <html>\r\n        <head>\r\n          <title>Prescription - ${patientInfo?.name || 'Patient'}</title>\r\n          <style>\r\n            @media print {\r\n              @page {\r\n                margin: 15mm;\r\n                size: A4;\r\n              }\r\n            }\r\n            * {\r\n              margin: 0;\r\n              padding: 0;\r\n              box-sizing: border-box;\r\n            }\r\n            body {\r\n              font-family: 'Times New Roman', serif;\r\n              font-size: 11pt;\r\n              line-height: 1.6;\r\n              color: #000;\r\n              background: #fff;\r\n              padding: 20px;\r\n              max-width: 100%;\r\n              position: relative;\r\n              overflow: hidden;\r\n            }\r\n            body::before {\r\n              content: 'MediWise';\r\n              position: fixed;\r\n              top: 50%;\r\n              left: 50%;\r\n              transform: translate(-50%, -50%) rotate(-45deg);\r\n              font-size: 150pt;\r\n              font-weight: bold;\r\n              color: rgba(0, 102, 102, 0.15);\r\n              z-index: 0;\r\n              pointer-events: none;\r\n              white-space: nowrap;\r\n              text-shadow: 0 0 10px rgba(0, 102, 102, 0.1);\r\n            }\r\n            .container {\r\n              position: relative;\r\n              z-index: 1;\r\n              max-width: 100%;\r\n            }\r\n            .header {\r\n              border-bottom: 3px solid #000;\r\n              padding-bottom: 15px;\r\n              margin-bottom: 15px;\r\n            }\r\n            .header-top {\r\n              display: flex;\r\n              justify-content: space-between;\r\n              align-items: flex-start;\r\n              margin-bottom: 10px;\r\n            }\r\n            .doctor-info-left {\r\n              flex: 1;\r\n            }\r\n            .logo-container {\r\n              width: 180px;\r\n              height: auto;\r\n              display: flex;\r\n              flex-direction: column;\r\n              align-items: center;\r\n              justify-content: flex-start;\r\n            }\r\n            .logo-image {\r\n              max-width: 100%;\r\n              height: auto;\r\n              object-fit: contain;\r\n            }\r\n            .doctor-name {\r\n              font-size: 22pt;\r\n              font-weight: bold;\r\n              color: #006666;\r\n              margin-bottom: 8px;\r\n            }\r\n            .doctor-details {\r\n              font-size: 10pt;\r\n              margin-bottom: 3px;\r\n            }\r\n            .date-time {\r\n              text-align: right;\r\n              font-size: 10pt;\r\n              font-weight: bold;\r\n            }\r\n            .two-column-layout {\r\n              display: grid;\r\n              grid-template-columns: 1fr 1fr;\r\n              gap: 40px;\r\n              margin-top: 15px;\r\n              position: relative;\r\n            }\r\n            .two-column-layout::before {\r\n              content: '';\r\n              position: absolute;\r\n              left: 50%;\r\n              top: 0;\r\n              bottom: 0;\r\n              width: 3px;\r\n              background-color: #0066cc;\r\n              transform: translateX(-50%);\r\n              z-index: 1;\r\n            }\r\n            .left-column, .right-column {\r\n              display: flex;\r\n              flex-direction: column;\r\n              gap: 25px;\r\n              position: relative;\r\n              z-index: 2;\r\n              background: white;\r\n            }\r\n            .section {\r\n              padding-bottom: 0;\r\n              margin-bottom: 0;\r\n            }\r\n            .section-title {\r\n              font-size: 12pt;\r\n              font-weight: bold;\r\n              margin-bottom: 8px;\r\n            }\r\n            .section-content {\r\n              font-size: 10pt;\r\n              white-space: pre-wrap;\r\n              line-height: 1.8;\r\n              min-height: 40px;\r\n            }\r\n            .medicines-content {\r\n              font-family: 'Courier New', monospace;\r\n              font-size: 10pt;\r\n            }\r\n            .footer {\r\n              margin-top: 40px;\r\n              border-top: 2px solid #000;\r\n              padding-top: 20px;\r\n              font-size: 10pt;\r\n              text-align: center;\r\n            }\r\n            .company-name {\r\n              font-weight: bold;\r\n              font-size: 12pt;\r\n              margin-bottom: 8px;\r\n              color: #006666;\r\n              text-align: center;\r\n            }\r\n            .footer-text {\r\n              font-size: 9pt;\r\n              line-height: 1.6;\r\n              margin-bottom: 5px;\r\n              text-align: center;\r\n              display: flex;\r\n              justify-content: center;\r\n              align-items: center;\r\n              gap: 5px;\r\n              flex-wrap: wrap;\r\n            }\r\n            .hotline {\r\n              font-weight: bold;\r\n              color: #006666;\r\n              margin-top: 8px;\r\n              text-align: center;\r\n              display: flex;\r\n              justify-content: center;\r\n              align-items: center;\r\n              gap: 5px;\r\n              flex-wrap: wrap;\r\n            }\r\n            @media print {\r\n              body::before {\r\n                display: block;\r\n              }\r\n            }\r\n          </style>\r\n        </head>\r\n        <body>\r\n          <div class=\"container\">\r\n            <div class=\"header\">\r\n              <div class=\"header-top\">\r\n                <div class=\"doctor-info-left\">\r\n                  <div class=\"doctor-name\">${(() => {\r\n                    const name = doctorProfile?.user?.name || '';\r\n                    const cleanName = name.replace(/^dr\\.?\\s*/i, '');\r\n                    return `Dr. ${cleanName}`;\r\n                  })()}</div>\r\n                  ${doctorProfile?.qualification ? `<div class=\"doctor-details\">${doctorProfile.qualification}</div>` : ''}\r\n                  ${doctorProfile?.specialization ? `<div class=\"doctor-details\">${doctorProfile.specialization}</div>` : ''}\r\n                  ${doctorProfile?.department?.name ? `<div class=\"doctor-details\">${doctorProfile.department.name}</div>` : ''}\r\n                </div>\r\n                <div class=\"logo-container\">\r\n                  <img src=\"/logo.png\" alt=\"MediWise Logo\" class=\"logo-image\" onerror=\"this.style.display='none';\" />\r\n                </div>\r\n              </div>\r\n              <div style=\"border-top: 2px solid #000; padding-top: 10px; margin-top: 10px; display: flex; justify-content: space-between; align-items: center;\">\r\n                <div style=\"flex: 1;\">\r\n                  ${(() => {\r\n                    const fullName = patientInfo?.name || '';\r\n                    const namePart = fullName ? `Patient: ${fullName}` : '';\r\n                    const age = prescription.age ? `    Age: ${prescription.age}` : '';\r\n                    return [namePart, age].filter(Boolean).join(' ');\r\n                  })()}\r\n                </div>\r\n                <div class=\"date-time\">\r\n                  Date: ${dateOnly} Time: ${timeOnly}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div class=\"two-column-layout\">\r\n              <div class=\"left-column\">\r\n                ${prescription.diagnosis ? `\r\n                <div class=\"section\">\r\n                  <div class=\"section-title\">Diagnosis</div>\r\n                  <div class=\"section-content\">${prescription.diagnosis}</div>\r\n                </div>\r\n                ` : ''}\r\n                \r\n                ${prescription.tests ? `\r\n                <div class=\"section\">\r\n                  <div class=\"section-title\">Investigation</div>\r\n                  <div class=\"section-content\">${prescription.tests}</div>\r\n                </div>\r\n                ` : ''}\r\n\r\n                ${(prescription.followUp || prescription.instructions) ? `\r\n                <div class=\"section\">\r\n                  <div class=\"section-title\">Follow up</div>\r\n                  <div class=\"section-content\">${prescription.followUp || prescription.instructions}</div>\r\n                </div>\r\n                ` : ''}\r\n              </div>\r\n\r\n              <div class=\"right-column\">\r\n                ${prescription.medicines ? `\r\n                <div class=\"section\">\r\n                  <div class=\"section-title\">Medicine</div>\r\n                  <div class=\"section-content medicines-content\">${typeof prescription.medicines === 'string' ? prescription.medicines : (Array.isArray(prescription.medicines) ? prescription.medicines.map((med: any) => typeof med === 'string' ? med : (med.name || med)).join('\\\\n') : prescription.medicines)}</div>\r\n                </div>\r\n                ` : ''}\r\n\r\n                ${(prescription.advice || prescription.rules) ? `\r\n                <div class=\"section\">\r\n                  <div class=\"section-title\">Advice</div>\r\n                  <div class=\"section-content\">${prescription.advice || prescription.rules}</div>\r\n                </div>\r\n                ` : ''}\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"footer\">\r\n              <div class=\"footer-info\">\r\n                <div class=\"company-name\">MediWise</div>\r\n                <div class=\"footer-text\" style=\"font-family: 'Noto Sans Bengali', 'Kalpurush', 'Siyam Rupali', sans-serif;\">\r\n                  <span>‡¶ö‡ßá‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞: ‡¶Æ‡ßá‡¶°‡¶ø‡¶ì‡¶Ø‡¶º‡¶æ‡¶á‡¶ú ‡¶ï‡¶®‡¶∏‡¶æ‡¶≤‡¶ü‡ßá‡¶∂‡¶® ‡¶∏‡ßá‡¶®‡ßç‡¶ü‡¶æ‡¶∞</span>\r\n                  <span>/</span>\r\n                  <span>Chamber: MediWise Consultation Center</span>\r\n                </div>\r\n                <div class=\"hotline\" style=\"font-family: 'Noto Sans Bengali', 'Kalpurush', 'Siyam Rupali', sans-serif;\">\r\n                  <span>‡¶∏‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶≤‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶π‡¶ü‡¶≤‡¶æ‡¶á‡¶®</span>\r\n                  <span>/</span>\r\n                  <span>Hotline for Serial: <strong>+8809658303665</strong></span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </body>\r\n      </html>\r\n    `;\r\n\r\n    printWindow.document.write(printContent);\r\n    printWindow.document.close();\r\n    printWindow.focus();\r\n    setTimeout(() => {\r\n      printWindow.print();\r\n    }, 250);\r\n  }, [user, monthNames]);\r\n\r\n  const handleViewPrescription = (prescription: any) => {\r\n    setSelectedPrescription(prescription);\r\n    setShowPreviewModal(true);\r\n  };\r\n\r\n  // Generate prescription data URL for QR code - Direct PDF download\r\n  const generatePrescriptionDataURL = (prescription: any) => {\r\n    if (typeof window === 'undefined') return '';\r\n    \r\n    const prescriptionData = {\r\n      id: prescription.id,\r\n      patientName: prescription.patient?.name || user?.name,\r\n      doctorName: prescription.doctor?.user?.name,\r\n      date: prescription.prescriptionDate,\r\n      diagnosis: prescription.diagnosis,\r\n      medicines: prescription.medicines,\r\n      tests: prescription.tests,\r\n      advice: prescription.advice,\r\n      instructions: prescription.instructions,\r\n      followUp: prescription.followUp,\r\n    };\r\n    \r\n    // Create a data URL that will trigger direct PDF download when scanned\r\n    const dataStr = JSON.stringify(prescriptionData);\r\n    const base64Data = btoa(unescape(encodeURIComponent(dataStr)));\r\n    return `${window.location.origin}/prescription/${prescription.id}/download?data=${encodeURIComponent(base64Data)}`;\r\n  };\r\n\r\n  // Generate medicine-specific QR code data - Direct PDF download\r\n  const generateMedicineQRData = (prescription: any, medicine: any, index: number) => {\r\n    if (typeof window === 'undefined') return '';\r\n    \r\n    const medicineData = {\r\n      prescriptionId: prescription.id,\r\n      medicineIndex: index,\r\n      medicine: typeof medicine === 'string' ? medicine : medicine.name || medicine,\r\n      dosage: typeof medicine === 'object' ? medicine.dosage : '',\r\n      frequency: typeof medicine === 'object' ? medicine.frequency : '',\r\n      patientName: prescription.patient?.name || user?.name,\r\n      doctorName: prescription.doctor?.user?.name,\r\n      date: prescription.prescriptionDate,\r\n    };\r\n    \r\n    const dataStr = JSON.stringify(medicineData);\r\n    const base64Data = btoa(unescape(encodeURIComponent(dataStr)));\r\n    return `${window.location.origin}/prescription/${prescription.id}/medicine/${index}/download?data=${encodeURIComponent(base64Data)}`;\r\n  };\r\n\r\n  // Download prescription as image\r\n  const downloadPrescriptionAsImage = async () => {\r\n    const prescriptionElement = document.getElementById('prescription-view-content');\r\n    if (!prescriptionElement) return;\r\n\r\n    try {\r\n      const canvas = await html2canvas(prescriptionElement, {\r\n        scale: 2,\r\n        useCORS: true,\r\n        backgroundColor: '#ffffff',\r\n        logging: false,\r\n      });\r\n      \r\n      const imgData = canvas.toDataURL('image/png');\r\n      const link = document.createElement('a');\r\n      link.href = imgData;\r\n      link.download = `prescription-${selectedPrescription?.id || 'download'}.png`;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n    } catch (error) {\r\n      console.error('Error generating image:', error);\r\n    }\r\n  };\r\n\r\n  if (authLoading || loading) {\r\n    return <Loading />;\r\n  }\r\n\r\n  if (!user || user.role !== 'patient') {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen bg-gray-50\">\r\n      <PatientSidebar user={user} logout={logout} />\r\n      <main className=\"ml-64 flex-1 transition-all duration-300\">\r\n        {/* Modern Header with Simple Color */}\r\n        <header className=\"bg-teal-600 text-white shadow-xl\">\r\n          <div className=\"px-8 py-6\">\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold mb-2\">My Prescriptions</h1>\r\n              <p className=\"text-teal-100\">View and manage your medical prescriptions</p>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        <div className=\"p-8\">\r\n          {prescriptions.length === 0 ? (\r\n            <div className=\"bg-white rounded-2xl shadow-xl p-12 text-center border-2 border-gray-300\">\r\n              <div className=\"w-20 h-20 rounded-full bg-teal-100 flex items-center justify-center mx-auto mb-4 shadow-lg\">\r\n                <FiFileText className=\"text-4xl text-teal-600\" />\r\n              </div>\r\n              <p className=\"text-gray-600 text-lg mb-2 font-semibold\">No prescriptions found</p>\r\n              <p className=\"text-gray-500 text-sm\">\r\n                Your prescriptions will appear here once your doctor creates them\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-6\">\r\n              {prescriptions.map((prescription) => (\r\n                <div\r\n                  key={prescription.id}\r\n                  className=\"bg-white rounded-2xl shadow-xl p-6 border-2 border-gray-300 hover:shadow-2xl transition-all transform hover:scale-[1.01]\"\r\n                >\r\n                  <div className=\"flex justify-between items-start mb-4\">\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"flex items-center gap-4 mb-3\">\r\n                        <div className=\"w-14 h-14 rounded-xl bg-teal-100 flex items-center justify-center shadow-lg\">\r\n                          <FiFileText className=\"text-2xl text-teal-600\" />\r\n                        </div>\r\n                        <div>\r\n                          <h3 className=\"text-xl font-bold text-gray-800\">\r\n                            {prescription.doctor?.user?.name \r\n                              ? `Dr. ${prescription.doctor.user.name}`\r\n                              : 'Prescription'}\r\n                          </h3>\r\n                          <div className=\"flex items-center gap-4 text-sm text-gray-600 mt-2\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <FiCalendar className=\"text-teal-600\" />\r\n                              <span className=\"font-medium\">\r\n                                {format(new Date(prescription.prescriptionDate), 'MMMM dd, yyyy')}\r\n                              </span>\r\n                            </div>\r\n                            {prescription.doctor?.specialization && (\r\n                              <span className=\"px-3 py-1 bg-teal-100 text-teal-700 rounded-full text-xs font-bold\">\r\n                                {prescription.doctor.specialization}\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex gap-3\">\r\n                      <button\r\n                        onClick={() => handleViewPrescription(prescription)}\r\n                        className=\"px-6 py-3 bg-teal-600 text-white rounded-xl hover:bg-teal-700 hover:shadow-xl transition-all flex items-center gap-2 font-bold transform hover:scale-105\"\r\n                      >\r\n                        <FiFileText className=\"w-5 h-5\" />\r\n                        View\r\n                      </button>\r\n                      <button\r\n                        onClick={() => handlePrint(prescription)}\r\n                        className=\"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 hover:shadow-xl transition-all flex items-center gap-2 font-bold transform hover:scale-105\"\r\n                      >\r\n                        <FiPrinter className=\"w-5 h-5\" />\r\n                        Print\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {prescription.diagnosis && (\r\n                    <div className=\"mb-4 pb-4 border-b border-gray-200 dark:border-gray-700\">\r\n                      <h4 className=\"font-semibold text-gray-700 dark:text-gray-300 mb-2\">Diagnosis:</h4>\r\n                      <p className=\"text-gray-600 dark:text-gray-400\">{prescription.diagnosis}</p>\r\n                    </div>\r\n                  )}\r\n\r\n                  {prescription.medicines && (\r\n                    <div className=\"mb-4 pb-4 border-b border-gray-200 dark:border-gray-700\">\r\n                      <h4 className=\"font-semibold text-gray-700 dark:text-gray-300 mb-2\">Medicines:</h4>\r\n                      <div className=\"text-gray-600 dark:text-gray-400 whitespace-pre-line\">\r\n                        {typeof prescription.medicines === 'string' \r\n                          ? prescription.medicines \r\n                          : prescription.medicines.map((med: any, index: number) => (\r\n                              <div key={index} className=\"mb-1\">\r\n                                {med.name}\r\n                                {med.dosage && ` - ${med.dosage}`}\r\n                                {med.frequency && ` (${med.frequency})`}\r\n                              </div>\r\n                            ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {prescription.instructions && (\r\n                    <div className=\"mb-4\">\r\n                      <h4 className=\"font-semibold text-gray-700 dark:text-gray-300 mb-2\">Instructions:</h4>\r\n                      <p className=\"text-gray-600 dark:text-gray-400 whitespace-pre-line\">{prescription.instructions}</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n\r\n      {/* Prescription Slide-in View from Right */}\r\n      {showPreviewModal && selectedPrescription && (() => {\r\n        const doctorProfile = selectedPrescription.doctor;\r\n        const patientInfo = selectedPrescription.patient || user;\r\n        const prescriptionDate = new Date(selectedPrescription.prescriptionDate);\r\n        const day = String(prescriptionDate.getDate()).padStart(2, '0');\r\n        const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\r\n        const month = monthNames[prescriptionDate.getMonth()];\r\n        const year = prescriptionDate.getFullYear();\r\n        const dateOnly = `${day} ${month}, ${year}`;\r\n        \r\n        const mainQRUrl = generatePrescriptionDataURL(selectedPrescription);\r\n        const medicines = Array.isArray(selectedPrescription.medicines) \r\n          ? selectedPrescription.medicines \r\n          : (typeof selectedPrescription.medicines === 'string' \r\n              ? selectedPrescription.medicines.split('\\n').filter(Boolean).map((m: string) => m.trim())\r\n              : []);\r\n\r\n        return (\r\n          <>\r\n            {/* Backdrop - Semi-transparent overlay, original page visible */}\r\n            <div \r\n              className=\"fixed inset-0 bg-black bg-opacity-20 z-40 transition-opacity\"\r\n              onClick={() => {\r\n                setShowPreviewModal(false);\r\n                setSelectedPrescription(null);\r\n              }}\r\n            />\r\n            \r\n            {/* Slide-in Panel from Right */}\r\n            <div className=\"fixed right-0 top-0 h-full w-full max-w-2xl bg-white shadow-2xl z-50 overflow-y-auto animate-slideInRight\">\r\n              {/* Close Button */}\r\n              <button\r\n                onClick={() => {\r\n                  setShowPreviewModal(false);\r\n                  setSelectedPrescription(null);\r\n                }}\r\n                className=\"absolute top-4 right-4 z-10 p-2 bg-white rounded-full shadow-lg hover:bg-gray-100 transition-colors\"\r\n              >\r\n                <FiX className=\"w-5 h-5 text-gray-600\" />\r\n              </button>\r\n              \r\n              {/* Prescription Content */}\r\n              <div id=\"prescription-view-content\" className=\"p-6\" style={{ fontFamily: \"'Times New Roman', serif\" }}>\r\n                {/* Header */}\r\n                <div className=\"mb-6\">\r\n                  <h2 className=\"text-xl font-bold text-gray-800 mb-6\">Printout to redeem your e-prescription</h2>\r\n                </div>\r\n\r\n                {/* Patient Info Section with Main QR Code */}\r\n                <div className=\"flex justify-between items-start mb-6\">\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"text-lg font-bold mb-2\">FOR {patientInfo?.name?.toUpperCase() || 'PATIENT'}</div>\r\n                    {patientInfo?.dateOfBirth && (\r\n                      <div className=\"text-sm\">BORN {format(new Date(patientInfo.dateOfBirth), 'dd.MM.yyyy')}</div>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex flex-col items-center ml-4\">\r\n                    <div className=\"bg-white p-3 rounded-lg border-2 border-gray-300 shadow-lg\">\r\n                      <QRCodeSVG \r\n                        value={mainQRUrl}\r\n                        size={140}\r\n                        level=\"H\"\r\n                        includeMargin={true}\r\n                      />\r\n                    </div>\r\n                    <p className=\"text-xs text-gray-600 mt-2 text-center max-w-[140px] font-semibold\" style={{ writingMode: 'vertical-rl', textOrientation: 'mixed' }}>\r\n                      codes to redeem all prescriptions\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Doctor Info */}\r\n                <div className=\"mb-6 pb-4 border-b border-gray-300\">\r\n                  <div className=\"text-lg font-bold mb-2\">\r\n                    FROM {(() => {\r\n                      const name = doctorProfile?.user?.name || '';\r\n                      const cleanName = name.replace(/^dr\\.?\\s*/i, '');\r\n                      return `Dr. ${cleanName}`.toUpperCase();\r\n                    })()}\r\n                  </div>\r\n                  {doctorProfile?.specialization && (\r\n                    <div className=\"text-sm mb-1\">{doctorProfile.specialization}</div>\r\n                  )}\r\n                  {doctorProfile?.user?.phone && (\r\n                    <div className=\"text-sm\">{doctorProfile.user.phone}</div>\r\n                  )}\r\n                  {doctorProfile?.user?.email && (\r\n                    <div className=\"text-sm\">{doctorProfile.user.email}</div>\r\n                  )}\r\n                  <div className=\"text-sm font-bold mt-2\">DATE {dateOnly}</div>\r\n                </div>\r\n\r\n                {/* Medicine QR Codes Section */}\r\n                {medicines.length > 0 && (\r\n                  <div className=\"mb-6\">\r\n                    {medicines.map((med: any, index: number) => {\r\n                      const medicineName = typeof med === 'string' ? med : (med.name || med);\r\n                      const medicineQRUrl = generateMedicineQRData(selectedPrescription, med, index);\r\n                      const dosage = typeof med === 'object' && med.dosage ? med.dosage : '';\r\n                      const frequency = typeof med === 'object' && med.frequency ? med.frequency : '';\r\n                      const pzn = selectedPrescription.id.slice(0, 8);\r\n                      \r\n                      return (\r\n                        <div key={index} className=\"mb-4 flex items-start gap-4\">\r\n                          <div className=\"flex-shrink-0\">\r\n                            <div className=\"bg-white p-2 rounded border border-gray-200\">\r\n                              <QRCodeSVG \r\n                                value={medicineQRUrl}\r\n                                size={100}\r\n                                level=\"H\"\r\n                                includeMargin={true}\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex-1\">\r\n                            <div className=\"text-sm font-semibold\">\r\n                              {dosage ? `${dosage} - ` : ''}{medicineName}\r\n                            </div>\r\n                            {frequency && (\r\n                              <div className=\"text-xs text-gray-600 mt-1\">{frequency}</div>\r\n                            )}\r\n                            <div className=\"text-xs text-gray-500 mt-1\">PZN: {pzn}</div>\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                )}\r\n\r\n                {/* App Download Section */}\r\n                <div className=\"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200\">\r\n                  <div className=\"flex items-start gap-4\">\r\n                    <div className=\"flex-shrink-0\">\r\n                      <div className=\"bg-white p-2 rounded border border-gray-200\">\r\n                        <QRCodeSVG \r\n                          value=\"https://mediwise.com/app\"\r\n                          size={80}\r\n                          level=\"H\"\r\n                          includeMargin={true}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"text-sm font-bold mb-1\">App for e-prescription</div>\r\n                      <div className=\"text-xs text-gray-600\">\r\n                        Receive your e-prescriptions paperless now and download the app.\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Action Buttons */}\r\n                <div className=\"flex gap-3 mt-8 pb-4\">\r\n                  <button\r\n                    onClick={downloadPrescriptionAsImage}\r\n                    className=\"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 font-semibold\"\r\n                  >\r\n                    <FiDownload className=\"w-5 h-5\" />\r\n                    Save\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handlePrint(selectedPrescription)}\r\n                    className=\"flex-1 px-6 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors flex items-center justify-center gap-2 font-semibold\"\r\n                  >\r\n                    <FiPrinter className=\"w-5 h-5\" />\r\n                    Print\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </>\r\n        );\r\n      })()}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAXA;;;;;;;;;;;AAae,SAAS;;IACtB,MAAM,EAAE,IAAI,EAAE,SAAS,WAAW,EAAE,MAAM,EAAE,GAAG,IAAA,oLAAO;IACtD,MAAM,SAAS,IAAA,iMAAS;IACxB,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,wNAAQ,EAAQ,EAAE;IAC5D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,wNAAQ,EAAC;IACvC,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,IAAA,wNAAQ,EAAM;IACtE,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,wNAAQ,EAAC;IAEzD,MAAM,qBAAqB,IAAA,2NAAW;oEAAC;YACrC,IAAI;gBACF,WAAW;gBACX,MAAM,WAAW,MAAM,uKAAG,CAAC,GAAG,CAAC;gBAC/B,IAAI,mBAAmB,SAAS,IAAI,CAAC,aAAa,IAAI,EAAE;gBAExD,2CAA2C;gBAC3C,mBAAmB,iBAAiB,MAAM;gFAAC,CAAC,eAC1C,aAAa,OAAO,EAAE,UAAU,MAAM,SAAS,aAAa,SAAS,KAAK,MAAM;;gBAGlF,8BAA8B;gBAC9B,iBAAiB,IAAI;gFAAC,CAAC,GAAQ,IAC7B,IAAI,KAAK,EAAE,gBAAgB,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,gBAAgB,EAAE,OAAO;;gBAG/E,iBAAiB;YACnB,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,iCAAiC;YACjD,SAAU;gBACR,WAAW;YACb;QACF;mEAAG;QAAC;KAAK;IAET,IAAA,yNAAS;8CAAC;YACR,IAAI,CAAC,eAAe,CAAC,MAAM;gBACzB,OAAO,IAAI,CAAC;gBACZ;YACF;YACA,IAAI,QAAQ,KAAK,IAAI,KAAK,WAAW;gBACnC,IAAI,KAAK,IAAI,KAAK,SAAS;oBACzB,OAAO,IAAI,CAAC;gBACd,OAAO,IAAI,KAAK,IAAI,KAAK,UAAU;oBACjC,OAAO,IAAI,CAAC;gBACd,OAAO;oBACL,OAAO,IAAI,CAAC;gBACd;gBACA;YACF;YACA,IAAI,QAAQ,KAAK,IAAI,KAAK,WAAW;gBACnC;YACF;QACF;6CAAG;QAAC;QAAM;QAAa;QAAQ;KAAmB;IAElD,gDAAgD;IAChD,MAAM,aAAa,IAAA,uNAAO;wDAAC,IAAM;gBAAC;gBAAO;gBAAO;gBAAO;gBAAO;gBAAO;gBAAO;gBAAO;gBAAO;gBAAO;gBAAO;gBAAO;aAAM;uDAAE,EAAE;IAEzH,MAAM,cAAc,IAAA,2NAAW;6DAAC,CAAC;YAC/B,MAAM,cAAc,OAAO,IAAI,CAAC,IAAI;YACpC,IAAI,CAAC,aAAa;YAElB,MAAM,gBAAgB,aAAa,MAAM;YACzC,MAAM,cAAc,aAAa,OAAO,IAAI;YAC5C,MAAM,mBAAmB,IAAI,KAAK,aAAa,gBAAgB;YAC/D,MAAM,MAAM,OAAO,iBAAiB,OAAO,IAAI,QAAQ,CAAC,GAAG;YAC3D,MAAM,QAAQ,UAAU,CAAC,iBAAiB,QAAQ,GAAG;YACrD,MAAM,OAAO,iBAAiB,WAAW;YACzC,MAAM,WAAW,GAAG,IAAI,CAAC,EAAE,MAAM,EAAE,EAAE,MAAM;YAC3C,MAAM,WAAW,IAAA,iNAAM,EAAC,kBAAkB;YAE1C,MAAM,eAAe,CAAC;;;;gCAIM,EAAE,aAAa,QAAQ,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2CAkLtB,EAAE;qEAAC;oBAC1B,MAAM,OAAO,eAAe,MAAM,QAAQ;oBAC1C,MAAM,YAAY,KAAK,OAAO,CAAC,cAAc;oBAC7C,OAAO,CAAC,IAAI,EAAE,WAAW;gBAC3B;aAAC,yDAAI;kBACL,EAAE,eAAe,gBAAgB,CAAC,4BAA4B,EAAE,cAAc,aAAa,CAAC,MAAM,CAAC,GAAG,GAAG;kBACzG,EAAE,eAAe,iBAAiB,CAAC,4BAA4B,EAAE,cAAc,cAAc,CAAC,MAAM,CAAC,GAAG,GAAG;kBAC3G,EAAE,eAAe,YAAY,OAAO,CAAC,4BAA4B,EAAE,cAAc,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG;;;;;;;;kBAQ9G,EAAE;qEAAC;oBACD,MAAM,WAAW,aAAa,QAAQ;oBACtC,MAAM,WAAW,WAAW,CAAC,SAAS,EAAE,UAAU,GAAG;oBACrD,MAAM,MAAM,aAAa,GAAG,GAAG,CAAC,SAAS,EAAE,aAAa,GAAG,EAAE,GAAG;oBAChE,OAAO;wBAAC;wBAAU;qBAAI,CAAC,MAAM,CAAC,SAAS,IAAI,CAAC;gBAC9C;aAAC,yDAAI;;;wBAGC,EAAE,SAAS,OAAO,EAAE,SAAS;;;;;;;gBAOrC,EAAE,aAAa,SAAS,GAAG,CAAC;;;+CAGG,EAAE,aAAa,SAAS,CAAC;;gBAExD,CAAC,GAAG,GAAG;;gBAEP,EAAE,aAAa,KAAK,GAAG,CAAC;;;+CAGO,EAAE,aAAa,KAAK,CAAC;;gBAEpD,CAAC,GAAG,GAAG;;gBAEP,EAAE,AAAC,aAAa,QAAQ,IAAI,aAAa,YAAY,GAAI,CAAC;;;+CAG3B,EAAE,aAAa,QAAQ,IAAI,aAAa,YAAY,CAAC;;gBAEpF,CAAC,GAAG,GAAG;;;;gBAIP,EAAE,aAAa,SAAS,GAAG,CAAC;;;iEAGqB,EAAE,OAAO,aAAa,SAAS,KAAK,WAAW,aAAa,SAAS,GAAI,MAAM,OAAO,CAAC,aAAa,SAAS,IAAI,aAAa,SAAS,CAAC,GAAG;qEAAC,CAAC,MAAa,OAAO,QAAQ,WAAW,MAAO,IAAI,IAAI,IAAI;oEAAM,IAAI,CAAC,SAAS,aAAa,SAAS,CAAE;;gBAEpS,CAAC,GAAG,GAAG;;gBAEP,EAAE,AAAC,aAAa,MAAM,IAAI,aAAa,KAAK,GAAI,CAAC;;;+CAGlB,EAAE,aAAa,MAAM,IAAI,aAAa,KAAK,CAAC;;gBAE3E,CAAC,GAAG,GAAG;;;;;;;;;;;;;;;;;;;;;;IAsBnB,CAAC;YAED,YAAY,QAAQ,CAAC,KAAK,CAAC;YAC3B,YAAY,QAAQ,CAAC,KAAK;YAC1B,YAAY,KAAK;YACjB;qEAAW;oBACT,YAAY,KAAK;gBACnB;oEAAG;QACL;4DAAG;QAAC;QAAM;KAAW;IAErB,MAAM,yBAAyB,CAAC;QAC9B,wBAAwB;QACxB,oBAAoB;IACtB;IAEA,mEAAmE;IACnE,MAAM,8BAA8B,CAAC;QACnC;;QAEA,MAAM,mBAAmB;YACvB,IAAI,aAAa,EAAE;YACnB,aAAa,aAAa,OAAO,EAAE,QAAQ,MAAM;YACjD,YAAY,aAAa,MAAM,EAAE,MAAM;YACvC,MAAM,aAAa,gBAAgB;YACnC,WAAW,aAAa,SAAS;YACjC,WAAW,aAAa,SAAS;YACjC,OAAO,aAAa,KAAK;YACzB,QAAQ,aAAa,MAAM;YAC3B,cAAc,aAAa,YAAY;YACvC,UAAU,aAAa,QAAQ;QACjC;QAEA,uEAAuE;QACvE,MAAM,UAAU,KAAK,SAAS,CAAC;QAC/B,MAAM,aAAa,KAAK,SAAS,mBAAmB;QACpD,OAAO,GAAG,OAAO,QAAQ,CAAC,MAAM,CAAC,cAAc,EAAE,aAAa,EAAE,CAAC,eAAe,EAAE,mBAAmB,aAAa;IACpH;IAEA,gEAAgE;IAChE,MAAM,yBAAyB,CAAC,cAAmB,UAAe;QAChE;;QAEA,MAAM,eAAe;YACnB,gBAAgB,aAAa,EAAE;YAC/B,eAAe;YACf,UAAU,OAAO,aAAa,WAAW,WAAW,SAAS,IAAI,IAAI;YACrE,QAAQ,OAAO,aAAa,WAAW,SAAS,MAAM,GAAG;YACzD,WAAW,OAAO,aAAa,WAAW,SAAS,SAAS,GAAG;YAC/D,aAAa,aAAa,OAAO,EAAE,QAAQ,MAAM;YACjD,YAAY,aAAa,MAAM,EAAE,MAAM;YACvC,MAAM,aAAa,gBAAgB;QACrC;QAEA,MAAM,UAAU,KAAK,SAAS,CAAC;QAC/B,MAAM,aAAa,KAAK,SAAS,mBAAmB;QACpD,OAAO,GAAG,OAAO,QAAQ,CAAC,MAAM,CAAC,cAAc,EAAE,aAAa,EAAE,CAAC,UAAU,EAAE,MAAM,eAAe,EAAE,mBAAmB,aAAa;IACtI;IAEA,iCAAiC;IACjC,MAAM,8BAA8B;QAClC,MAAM,sBAAsB,SAAS,cAAc,CAAC;QACpD,IAAI,CAAC,qBAAqB;QAE1B,IAAI;YACF,MAAM,SAAS,MAAM,IAAA,+MAAW,EAAC,qBAAqB;gBACpD,OAAO;gBACP,SAAS;gBACT,iBAAiB;gBACjB,SAAS;YACX;YAEA,MAAM,UAAU,OAAO,SAAS,CAAC;YACjC,MAAM,OAAO,SAAS,aAAa,CAAC;YACpC,KAAK,IAAI,GAAG;YACZ,KAAK,QAAQ,GAAG,CAAC,aAAa,EAAE,sBAAsB,MAAM,WAAW,IAAI,CAAC;YAC5E,SAAS,IAAI,CAAC,WAAW,CAAC;YAC1B,KAAK,KAAK;YACV,SAAS,IAAI,CAAC,WAAW,CAAC;QAC5B,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2BAA2B;QAC3C;IACF;IAEA,IAAI,eAAe,SAAS;QAC1B,qBAAO,4OAAC,mLAAO;;;;;IACjB;IAEA,IAAI,CAAC,QAAQ,KAAK,IAAI,KAAK,WAAW;QACpC,OAAO;IACT;IAEA,qBACE,4OAAC;QAAI,WAAU;;0BACb,4OAAC,0LAAc;gBAAC,MAAM;gBAAM,QAAQ;;;;;;0BACpC,4OAAC;gBAAK,WAAU;;kCAEd,4OAAC;wBAAO,WAAU;kCAChB,cAAA,4OAAC;4BAAI,WAAU;sCACb,cAAA,4OAAC;;kDACC,4OAAC;wCAAG,WAAU;kDAA0B;;;;;;kDACxC,4OAAC;wCAAE,WAAU;kDAAgB;;;;;;;;;;;;;;;;;;;;;;kCAKnC,4OAAC;wBAAI,WAAU;kCACZ,cAAc,MAAM,KAAK,kBACxB,4OAAC;4BAAI,WAAU;;8CACb,4OAAC;oCAAI,WAAU;8CACb,cAAA,4OAAC,8MAAU;wCAAC,WAAU;;;;;;;;;;;8CAExB,4OAAC;oCAAE,WAAU;8CAA2C;;;;;;8CACxD,4OAAC;oCAAE,WAAU;8CAAwB;;;;;;;;;;;iDAKvC,4OAAC;4BAAI,WAAU;sCACZ,cAAc,GAAG,CAAC,CAAC,6BAClB,4OAAC;oCAEC,WAAU;;sDAEV,4OAAC;4CAAI,WAAU;;8DACb,4OAAC;oDAAI,WAAU;8DACb,cAAA,4OAAC;wDAAI,WAAU;;0EACb,4OAAC;gEAAI,WAAU;0EACb,cAAA,4OAAC,8MAAU;oEAAC,WAAU;;;;;;;;;;;0EAExB,4OAAC;;kFACC,4OAAC;wEAAG,WAAU;kFACX,aAAa,MAAM,EAAE,MAAM,OACxB,CAAC,IAAI,EAAE,aAAa,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,GACtC;;;;;;kFAEN,4OAAC;wEAAI,WAAU;;0FACb,4OAAC;gFAAI,WAAU;;kGACb,4OAAC,8MAAU;wFAAC,WAAU;;;;;;kGACtB,4OAAC;wFAAK,WAAU;kGACb,IAAA,iNAAM,EAAC,IAAI,KAAK,aAAa,gBAAgB,GAAG;;;;;;;;;;;;4EAGpD,aAAa,MAAM,EAAE,gCACpB,4OAAC;gFAAK,WAAU;0FACb,aAAa,MAAM,CAAC,cAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8DAO/C,4OAAC;oDAAI,WAAU;;sEACb,4OAAC;4DACC,SAAS,IAAM,uBAAuB;4DACtC,WAAU;;8EAEV,4OAAC,8MAAU;oEAAC,WAAU;;;;;;gEAAY;;;;;;;sEAGpC,4OAAC;4DACC,SAAS,IAAM,YAAY;4DAC3B,WAAU;;8EAEV,4OAAC,6MAAS;oEAAC,WAAU;;;;;;gEAAY;;;;;;;;;;;;;;;;;;;wCAMtC,aAAa,SAAS,kBACrB,4OAAC;4CAAI,WAAU;;8DACb,4OAAC;oDAAG,WAAU;8DAAsD;;;;;;8DACpE,4OAAC;oDAAE,WAAU;8DAAoC,aAAa,SAAS;;;;;;;;;;;;wCAI1E,aAAa,SAAS,kBACrB,4OAAC;4CAAI,WAAU;;8DACb,4OAAC;oDAAG,WAAU;8DAAsD;;;;;;8DACpE,4OAAC;oDAAI,WAAU;8DACZ,OAAO,aAAa,SAAS,KAAK,WAC/B,aAAa,SAAS,GACtB,aAAa,SAAS,CAAC,GAAG,CAAC,CAAC,KAAU,sBACpC,4OAAC;4DAAgB,WAAU;;gEACxB,IAAI,IAAI;gEACR,IAAI,MAAM,IAAI,CAAC,GAAG,EAAE,IAAI,MAAM,EAAE;gEAChC,IAAI,SAAS,IAAI,CAAC,EAAE,EAAE,IAAI,SAAS,CAAC,CAAC,CAAC;;2DAH/B;;;;;;;;;;;;;;;;wCAUrB,aAAa,YAAY,kBACxB,4OAAC;4CAAI,WAAU;;8DACb,4OAAC;oDAAG,WAAU;8DAAsD;;;;;;8DACpE,4OAAC;oDAAE,WAAU;8DAAwD,aAAa,YAAY;;;;;;;;;;;;;mCA5E7F,aAAa,EAAE;;;;;;;;;;;;;;;;;;;;;YAuF/B,oBAAoB,wBAAwB,CAAC;gBAC5C,MAAM,gBAAgB,qBAAqB,MAAM;gBACjD,MAAM,cAAc,qBAAqB,OAAO,IAAI;gBACpD,MAAM,mBAAmB,IAAI,KAAK,qBAAqB,gBAAgB;gBACvE,MAAM,MAAM,OAAO,iBAAiB,OAAO,IAAI,QAAQ,CAAC,GAAG;gBAC3D,MAAM,aAAa;oBAAC;oBAAO;oBAAO;oBAAO;oBAAO;oBAAO;oBAAO;oBAAO;oBAAO;oBAAO;oBAAO;oBAAO;iBAAM;gBACvG,MAAM,QAAQ,UAAU,CAAC,iBAAiB,QAAQ,GAAG;gBACrD,MAAM,OAAO,iBAAiB,WAAW;gBACzC,MAAM,WAAW,GAAG,IAAI,CAAC,EAAE,MAAM,EAAE,EAAE,MAAM;gBAE3C,MAAM,YAAY,4BAA4B;gBAC9C,MAAM,YAAY,MAAM,OAAO,CAAC,qBAAqB,SAAS,IAC1D,qBAAqB,SAAS,GAC7B,OAAO,qBAAqB,SAAS,KAAK,WACvC,qBAAqB,SAAS,CAAC,KAAK,CAAC,MAAM,MAAM,CAAC,SAAS,GAAG,CAAC,CAAC,IAAc,EAAE,IAAI,MACpF,EAAE;gBAEV,qBACE;;sCAEE,4OAAC;4BACC,WAAU;4BACV,SAAS;gCACP,oBAAoB;gCACpB,wBAAwB;4BAC1B;;;;;;sCAIF,4OAAC;4BAAI,WAAU;;8CAEb,4OAAC;oCACC,SAAS;wCACP,oBAAoB;wCACpB,wBAAwB;oCAC1B;oCACA,WAAU;8CAEV,cAAA,4OAAC,uMAAG;wCAAC,WAAU;;;;;;;;;;;8CAIjB,4OAAC;oCAAI,IAAG;oCAA4B,WAAU;oCAAM,OAAO;wCAAE,YAAY;oCAA2B;;sDAElG,4OAAC;4CAAI,WAAU;sDACb,cAAA,4OAAC;gDAAG,WAAU;0DAAuC;;;;;;;;;;;sDAIvD,4OAAC;4CAAI,WAAU;;8DACb,4OAAC;oDAAI,WAAU;;sEACb,4OAAC;4DAAI,WAAU;;gEAAyB;gEAAK,aAAa,MAAM,iBAAiB;;;;;;;wDAChF,aAAa,6BACZ,4OAAC;4DAAI,WAAU;;gEAAU;gEAAM,IAAA,iNAAM,EAAC,IAAI,KAAK,YAAY,WAAW,GAAG;;;;;;;;;;;;;8DAG7E,4OAAC;oDAAI,WAAU;;sEACb,4OAAC;4DAAI,WAAU;sEACb,cAAA,4OAAC,qNAAS;gEACR,OAAO;gEACP,MAAM;gEACN,OAAM;gEACN,eAAe;;;;;;;;;;;sEAGnB,4OAAC;4DAAE,WAAU;4DAAqE,OAAO;gEAAE,aAAa;gEAAe,iBAAiB;4DAAQ;sEAAG;;;;;;;;;;;;;;;;;;sDAOvJ,4OAAC;4CAAI,WAAU;;8DACb,4OAAC;oDAAI,WAAU;;wDAAyB;wDAChC,CAAC;4DACL,MAAM,OAAO,eAAe,MAAM,QAAQ;4DAC1C,MAAM,YAAY,KAAK,OAAO,CAAC,cAAc;4DAC7C,OAAO,CAAC,IAAI,EAAE,WAAW,CAAC,WAAW;wDACvC,CAAC;;;;;;;gDAEF,eAAe,gCACd,4OAAC;oDAAI,WAAU;8DAAgB,cAAc,cAAc;;;;;;gDAE5D,eAAe,MAAM,uBACpB,4OAAC;oDAAI,WAAU;8DAAW,cAAc,IAAI,CAAC,KAAK;;;;;;gDAEnD,eAAe,MAAM,uBACpB,4OAAC;oDAAI,WAAU;8DAAW,cAAc,IAAI,CAAC,KAAK;;;;;;8DAEpD,4OAAC;oDAAI,WAAU;;wDAAyB;wDAAM;;;;;;;;;;;;;wCAI/C,UAAU,MAAM,GAAG,mBAClB,4OAAC;4CAAI,WAAU;sDACZ,UAAU,GAAG,CAAC,CAAC,KAAU;gDACxB,MAAM,eAAe,OAAO,QAAQ,WAAW,MAAO,IAAI,IAAI,IAAI;gDAClE,MAAM,gBAAgB,uBAAuB,sBAAsB,KAAK;gDACxE,MAAM,SAAS,OAAO,QAAQ,YAAY,IAAI,MAAM,GAAG,IAAI,MAAM,GAAG;gDACpE,MAAM,YAAY,OAAO,QAAQ,YAAY,IAAI,SAAS,GAAG,IAAI,SAAS,GAAG;gDAC7E,MAAM,MAAM,qBAAqB,EAAE,CAAC,KAAK,CAAC,GAAG;gDAE7C,qBACE,4OAAC;oDAAgB,WAAU;;sEACzB,4OAAC;4DAAI,WAAU;sEACb,cAAA,4OAAC;gEAAI,WAAU;0EACb,cAAA,4OAAC,qNAAS;oEACR,OAAO;oEACP,MAAM;oEACN,OAAM;oEACN,eAAe;;;;;;;;;;;;;;;;sEAIrB,4OAAC;4DAAI,WAAU;;8EACb,4OAAC;oEAAI,WAAU;;wEACZ,SAAS,GAAG,OAAO,GAAG,CAAC,GAAG;wEAAI;;;;;;;gEAEhC,2BACC,4OAAC;oEAAI,WAAU;8EAA8B;;;;;;8EAE/C,4OAAC;oEAAI,WAAU;;wEAA6B;wEAAM;;;;;;;;;;;;;;mDAlB5C;;;;;4CAsBd;;;;;;sDAKJ,4OAAC;4CAAI,WAAU;sDACb,cAAA,4OAAC;gDAAI,WAAU;;kEACb,4OAAC;wDAAI,WAAU;kEACb,cAAA,4OAAC;4DAAI,WAAU;sEACb,cAAA,4OAAC,qNAAS;gEACR,OAAM;gEACN,MAAM;gEACN,OAAM;gEACN,eAAe;;;;;;;;;;;;;;;;kEAIrB,4OAAC;wDAAI,WAAU;;0EACb,4OAAC;gEAAI,WAAU;0EAAyB;;;;;;0EACxC,4OAAC;gEAAI,WAAU;0EAAwB;;;;;;;;;;;;;;;;;;;;;;;sDAQ7C,4OAAC;4CAAI,WAAU;;8DACb,4OAAC;oDACC,SAAS;oDACT,WAAU;;sEAEV,4OAAC,8MAAU;4DAAC,WAAU;;;;;;wDAAY;;;;;;;8DAGpC,4OAAC;oDACC,SAAS,IAAM,YAAY;oDAC3B,WAAU;;sEAEV,4OAAC,6MAAS;4DAAC,WAAU;;;;;;wDAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;YAQ/C,CAAC;;;;;;;AAGP;GA/sBwB;;QACyB,oLAAO;QACvC,iMAAS;;;KAFF","debugId":null}}]
}