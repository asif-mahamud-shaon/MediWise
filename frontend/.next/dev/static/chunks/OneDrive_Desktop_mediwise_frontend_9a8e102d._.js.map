{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/components/Notification.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect } from 'react';\r\nimport { FiCheck, FiX, FiAlertCircle, FiInfo } from 'react-icons/fi';\r\n\r\nexport type NotificationType = 'success' | 'error' | 'warning' | 'info';\r\n\r\ninterface NotificationProps {\r\n  message: string;\r\n  type?: NotificationType;\r\n  onClose: () => void;\r\n  duration?: number;\r\n}\r\n\r\nexport default function Notification({\r\n  message,\r\n  type = 'info',\r\n  onClose,\r\n  duration = 3000,\r\n}: NotificationProps) {\r\n  useEffect(() => {\r\n    if (duration > 0) {\r\n      const timer = setTimeout(() => {\r\n        onClose();\r\n      }, duration);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [duration, onClose]);\r\n\r\n  const getIcon = () => {\r\n    switch (type) {\r\n      case 'success':\r\n        return <FiCheck className=\"text-3xl text-green-600\" />;\r\n      case 'error':\r\n        return <FiX className=\"text-3xl text-red-600\" />;\r\n      case 'warning':\r\n        return <FiAlertCircle className=\"text-3xl text-yellow-600\" />;\r\n      case 'info':\r\n        return <FiInfo className=\"text-3xl text-blue-600\" />;\r\n      default:\r\n        return <FiInfo className=\"text-3xl text-blue-600\" />;\r\n    }\r\n  };\r\n\r\n  const getBgColor = () => {\r\n    switch (type) {\r\n      case 'success':\r\n        return 'bg-green-100';\r\n      case 'error':\r\n        return 'bg-red-100';\r\n      case 'warning':\r\n        return 'bg-yellow-100';\r\n      case 'info':\r\n        return 'bg-blue-100';\r\n      default:\r\n        return 'bg-blue-100';\r\n    }\r\n  };\r\n\r\n  const getTitle = () => {\r\n    switch (type) {\r\n      case 'success':\r\n        return 'Success!';\r\n      case 'error':\r\n        return 'Error';\r\n      case 'warning':\r\n        return 'Warning';\r\n      case 'info':\r\n        return 'Information';\r\n      default:\r\n        return 'Notification';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4\">\r\n      <div className=\"bg-white rounded-xl shadow-2xl p-8 max-w-md w-full mx-4 transform transition-all animate-in fade-in zoom-in\">\r\n        <div className=\"text-center\">\r\n          <div className={`w-16 h-16 ${getBgColor()} rounded-full flex items-center justify-center mx-auto mb-4`}>\r\n            {getIcon()}\r\n          </div>\r\n          <h3 className=\"text-2xl font-bold text-gray-800 mb-2\">{getTitle()}</h3>\r\n          <p className=\"text-lg text-gray-600 mb-6 whitespace-pre-line\">{message}</p>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"px-6 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors font-medium shadow-md hover:shadow-lg\"\r\n          >\r\n            OK\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\nimport { useEffect } from 'react';\r\nimport { FiCheck, FiX, FiAlertCircle, FiInfo } from 'react-icons/fi';\r\n\r\nexport type NotificationType = 'success' | 'error' | 'warning' | 'info';\r\n\r\ninterface NotificationProps {\r\n  message: string;\r\n  type?: NotificationType;\r\n  onClose: () => void;\r\n  duration?: number;\r\n}\r\n\r\nexport default function Notification({\r\n  message,\r\n  type = 'info',\r\n  onClose,\r\n  duration = 3000,\r\n}: NotificationProps) {\r\n  useEffect(() => {\r\n    if (duration > 0) {\r\n      const timer = setTimeout(() => {\r\n        onClose();\r\n      }, duration);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [duration, onClose]);\r\n\r\n  const getIcon = () => {\r\n    switch (type) {\r\n      case 'success':\r\n        return <FiCheck className=\"text-3xl text-green-600\" />;\r\n      case 'error':\r\n        return <FiX className=\"text-3xl text-red-600\" />;\r\n      case 'warning':\r\n        return <FiAlertCircle className=\"text-3xl text-yellow-600\" />;\r\n      case 'info':\r\n        return <FiInfo className=\"text-3xl text-blue-600\" />;\r\n      default:\r\n        return <FiInfo className=\"text-3xl text-blue-600\" />;\r\n    }\r\n  };\r\n\r\n  const getBgColor = () => {\r\n    switch (type) {\r\n      case 'success':\r\n        return 'bg-green-100';\r\n      case 'error':\r\n        return 'bg-red-100';\r\n      case 'warning':\r\n        return 'bg-yellow-100';\r\n      case 'info':\r\n        return 'bg-blue-100';\r\n      default:\r\n        return 'bg-blue-100';\r\n    }\r\n  };\r\n\r\n  const getTitle = () => {\r\n    switch (type) {\r\n      case 'success':\r\n        return 'Success!';\r\n      case 'error':\r\n        return 'Error';\r\n      case 'warning':\r\n        return 'Warning';\r\n      case 'info':\r\n        return 'Information';\r\n      default:\r\n        return 'Notification';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4\">\r\n      <div className=\"bg-white rounded-xl shadow-2xl p-8 max-w-md w-full mx-4 transform transition-all animate-in fade-in zoom-in\">\r\n        <div className=\"text-center\">\r\n          <div className={`w-16 h-16 ${getBgColor()} rounded-full flex items-center justify-center mx-auto mb-4`}>\r\n            {getIcon()}\r\n          </div>\r\n          <h3 className=\"text-2xl font-bold text-gray-800 mb-2\">{getTitle()}</h3>\r\n          <p className=\"text-lg text-gray-600 mb-6 whitespace-pre-line\">{message}</p>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"px-6 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors font-medium shadow-md hover:shadow-lg\"\r\n          >\r\n            OK\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 334, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/context/NotificationContext.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { createContext, useContext, useState, ReactNode } from 'react';\r\nimport Notification, { NotificationType } from '@/components/Notification';\r\n\r\ninterface NotificationData {\r\n  message: string;\r\n  type: NotificationType;\r\n  duration?: number;\r\n}\r\n\r\ninterface NotificationContextType {\r\n  showNotification: (message: string, type?: NotificationType, duration?: number) => void;\r\n}\r\n\r\nconst NotificationContext = createContext<NotificationContextType | undefined>(undefined);\r\n\r\nexport const NotificationProvider = ({ children }: { children: ReactNode }) => {\r\n  const [notification, setNotification] = useState<NotificationData | null>(null);\r\n\r\n  const showNotification = (\r\n    message: string,\r\n    type: NotificationType = 'info',\r\n    duration: number = 3000\r\n  ) => {\r\n    setNotification({ message, type, duration });\r\n  };\r\n\r\n  const closeNotification = () => {\r\n    setNotification(null);\r\n  };\r\n\r\n  return (\r\n    <NotificationContext.Provider value={{ showNotification }}>\r\n      {children}\r\n      {notification && (\r\n        <Notification\r\n          message={notification.message}\r\n          type={notification.type}\r\n          duration={notification.duration}\r\n          onClose={closeNotification}\r\n        />\r\n      )}\r\n    </NotificationContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useNotification = () => {\r\n  const context = useContext(NotificationContext);\r\n  if (context === undefined) {\r\n    throw new Error('useNotification must be used within a NotificationProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\n\r\n\r\nimport { createContext, useContext, useState, ReactNode } from 'react';\r\nimport Notification, { NotificationType } from '@/components/Notification';\r\n\r\ninterface NotificationData {\r\n  message: string;\r\n  type: NotificationType;\r\n  duration?: number;\r\n}\r\n\r\ninterface NotificationContextType {\r\n  showNotification: (message: string, type?: NotificationType, duration?: number) => void;\r\n}\r\n\r\nconst NotificationContext = createContext<NotificationContextType | undefined>(undefined);\r\n\r\nexport const NotificationProvider = ({ children }: { children: ReactNode }) => {\r\n  const [notification, setNotification] = useState<NotificationData | null>(null);\r\n\r\n  const showNotification = (\r\n    message: string,\r\n    type: NotificationType = 'info',\r\n    duration: number = 3000\r\n  ) => {\r\n    setNotification({ message, type, duration });\r\n  };\r\n\r\n  const closeNotification = () => {\r\n    setNotification(null);\r\n  };\r\n\r\n  return (\r\n    <NotificationContext.Provider value={{ showNotification }}>\r\n      {children}\r\n      {notification && (\r\n        <Notification\r\n          message={notification.message}\r\n          type={notification.type}\r\n          duration={notification.duration}\r\n          onClose={closeNotification}\r\n        />\r\n      )}\r\n    </NotificationContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useNotification = () => {\r\n  const context = useContext(NotificationContext);\r\n  if (context === undefined) {\r\n    throw new Error('useNotification must be used within a NotificationProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\n\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;;;AAHA;;;AAeA,MAAM,oCAAsB,IAAA,6NAAa,EAAsC;AAExE,MAAM,uBAAuB,CAAC,EAAE,QAAQ,EAA2B;;IACxE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,wNAAQ,EAA0B;IAE1E,MAAM,mBAAmB,CACvB,SACA,OAAyB,MAAM,EAC/B,WAAmB,IAAI;QAEvB,gBAAgB;YAAE;YAAS;YAAM;QAAS;IAC5C;IAEA,MAAM,oBAAoB;QACxB,gBAAgB;IAClB;IAEA,qBACE,4OAAC,oBAAoB,QAAQ;QAAC,OAAO;YAAE;QAAiB;;YACrD;YACA,8BACC,4OAAC,wLAAY;gBACX,SAAS,aAAa,OAAO;gBAC7B,MAAM,aAAa,IAAI;gBACvB,UAAU,aAAa,QAAQ;gBAC/B,SAAS;;;;;;;;;;;;AAKnB;GA5Ba;KAAA;AA8BN,MAAM,kBAAkB;;IAC7B,MAAM,UAAU,IAAA,0NAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANa;;;AAuBb,MAAM,oCAAsB,IAAA,6NAAa,EAAsC;AAExE,MAAM,uBAAuB,CAAC,EAAE,QAAQ,EAA2B;;IACxE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,wNAAQ,EAA0B;IAE1E,MAAM,mBAAmB,CACvB,SACA,OAAyB,MAAM,EAC/B,WAAmB,IAAI;QAEvB,gBAAgB;YAAE;YAAS;YAAM;QAAS;IAC5C;IAEA,MAAM,oBAAoB;QACxB,gBAAgB;IAClB;IAEA,qBACE,4OAAC,oBAAoB,QAAQ;QAAC,OAAO;YAAE;QAAiB;;YACrD;YACA,8BACC,4OAAC,wLAAY;gBACX,SAAS,aAAa,OAAO;gBAC7B,MAAM,aAAa,IAAI;gBACvB,UAAU,aAAa,QAAQ;gBAC/B,SAAS;;;;;;;;;;;;AAKnB;IA5Ba;MAAA;AA8BN,MAAM,kBAAkB;;IAC7B,MAAM,UAAU,IAAA,0NAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANa","debugId":null}},
    {"offset": {"line": 456, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/components/Loading.tsx"],"sourcesContent":["const Loading = () => {\r\n  return (\r\n    <div className=\"flex items-center justify-center min-h-screen\">\r\n      <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-600\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loading;\r\n\r\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,UAAU;IACd,qBACE,4OAAC;QAAI,WAAU;kBACb,cAAA,4OAAC;YAAI,WAAU;;;;;;;;;;;AAGrB;KANM;uCAQS","debugId":null}},
    {"offset": {"line": 489, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/components/DoctorSidebar.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { useAuth } from '@/context/AuthContext';\nimport { \n  FiChevronRight,\n  FiHome, \n  FiUser, \n  FiCalendar, \n  FiFileText, \n  FiUsers, \n  FiMessageCircle,\n  FiLogOut\n} from 'react-icons/fi';\nimport { useState } from 'react';\n\ninterface DoctorSidebarProps {\n  user: any;\n  logout: () => void;\n}\n\nconst DoctorSidebar = ({ user, logout }: DoctorSidebarProps) => {\n  const pathname = usePathname();\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\n\n  const getInitials = (name: string) => {\n    return name\n      ?.split(' ')\n      ?.map((n: string) => n[0])\n      ?.join('')\n      ?.toUpperCase()\n      ?.slice(0, 2) || 'D';\n  };\n\n  const menu = [\n    { href: '/doctor/dashboard', label: 'Dashboard', icon: FiHome },\n    { href: '/doctor/appointments', label: 'Appointments', icon: FiCalendar },\n    { href: '/doctor/patients', label: 'My Patients', icon: FiUsers },\n    { href: '/doctor/prescriptions', label: 'Prescriptions', icon: FiFileText },\n    { href: '/doctor/chat', label: 'Chats', icon: FiMessageCircle },\n    { href: '/doctor/profile', label: 'My Profile', icon: FiUser },\n  ];\n\n  return (\n    <div className={`${sidebarCollapsed ? 'w-16' : 'w-64'} bg-teal-600 text-white transition-all duration-300 fixed left-0 top-0 h-full z-20`}>\n      <div className=\"p-4\">\n        {/* Collapse/Expand Button */}\n        <button\n          onClick={() => setSidebarCollapsed(!sidebarCollapsed)}\n          className=\"w-full flex items-center justify-center p-2 hover:bg-teal-700 rounded-lg transition-colors mb-4\"\n        >\n          <FiChevronRight className={`text-xl transform transition-transform ${sidebarCollapsed ? '' : 'rotate-180'}`} />\n        </button>\n\n        {/* Medical Symbol / Logo */}\n        {!sidebarCollapsed && (\n          <div className=\"flex items-center justify-center mb-6\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-2xl\">ü©∫</span>\n              <span className=\"text-xl font-bold\">MediWise</span>\n            </div>\n          </div>\n        )}\n\n        {/* Doctor Profile Section */}\n        {!sidebarCollapsed && (\n          <div className=\"mb-6 pb-6 border-b border-teal-500\">\n            <div className=\"flex items-center gap-3 mb-3\">\n              <div className=\"w-10 h-10 rounded-full bg-white bg-opacity-20 flex items-center justify-center text-sm font-semibold\">\n                {getInitials(user?.name || 'D')}\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-semibold truncate\">Dr. {user?.name}</p>\n                <p className=\"text-xs text-teal-200 capitalize\">Doctor</p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Navigation Links */}\n        <nav className=\"space-y-1\">\n          {menu.map((item) => {\n            const Icon = item.icon;\n            const isActive = pathname === item.href;\n            return (\n              <Link\n                key={item.href}\n                href={item.href}\n                className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${\n                  isActive\n                    ? 'bg-teal-700 text-white font-semibold'\n                    : 'text-teal-100 hover:bg-teal-700 hover:text-white'\n                }`}\n              >\n                <Icon className=\"text-xl flex-shrink-0\" />\n                {!sidebarCollapsed && <span className=\"text-sm\">{item.label}</span>}\n              </Link>\n            );\n          })}\n        </nav>\n\n        {/* Logout Button */}\n        <div className=\"absolute bottom-4 left-4 right-4\">\n          <button\n            onClick={logout}\n            className=\"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-teal-100 hover:bg-teal-700 hover:text-white\"\n          >\n            <FiLogOut className=\"text-xl flex-shrink-0\" />\n            {!sidebarCollapsed && <span className=\"text-sm\">Logout</span>}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DoctorSidebar;\n\n\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { useAuth } from '@/context/AuthContext';\nimport { \n  FiChevronRight,\n  FiHome, \n  FiUser, \n  FiCalendar, \n  FiFileText, \n  FiUsers, \n  FiMessageCircle,\n  FiLogOut\n} from 'react-icons/fi';\nimport { useState } from 'react';\n\ninterface DoctorSidebarProps {\n  user: any;\n  logout: () => void;\n}\n\nconst DoctorSidebar = ({ user, logout }: DoctorSidebarProps) => {\n  const pathname = usePathname();\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\n\n  const getInitials = (name: string) => {\n    return name\n      ?.split(' ')\n      ?.map((n: string) => n[0])\n      ?.join('')\n      ?.toUpperCase()\n      ?.slice(0, 2) || 'D';\n  };\n\n  const menu = [\n    { href: '/doctor/dashboard', label: 'Dashboard', icon: FiHome },\n    { href: '/doctor/appointments', label: 'Appointments', icon: FiCalendar },\n    { href: '/doctor/patients', label: 'My Patients', icon: FiUsers },\n    { href: '/doctor/prescriptions', label: 'Prescriptions', icon: FiFileText },\n    { href: '/doctor/chat', label: 'Chats', icon: FiMessageCircle },\n    { href: '/doctor/profile', label: 'My Profile', icon: FiUser },\n  ];\n\n  return (\n    <div className={`${sidebarCollapsed ? 'w-16' : 'w-64'} bg-teal-600 text-white transition-all duration-300 fixed left-0 top-0 h-full z-20`}>\n      <div className=\"p-4\">\n        {/* Collapse/Expand Button */}\n        <button\n          onClick={() => setSidebarCollapsed(!sidebarCollapsed)}\n          className=\"w-full flex items-center justify-center p-2 hover:bg-teal-700 rounded-lg transition-colors mb-4\"\n        >\n          <FiChevronRight className={`text-xl transform transition-transform ${sidebarCollapsed ? '' : 'rotate-180'}`} />\n        </button>\n\n        {/* Medical Symbol / Logo */}\n        {!sidebarCollapsed && (\n          <div className=\"flex items-center justify-center mb-6\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-2xl\">ü©∫</span>\n              <span className=\"text-xl font-bold\">MediWise</span>\n            </div>\n          </div>\n        )}\n\n        {/* Doctor Profile Section */}\n        {!sidebarCollapsed && (\n          <div className=\"mb-6 pb-6 border-b border-teal-500\">\n            <div className=\"flex items-center gap-3 mb-3\">\n              <div className=\"w-10 h-10 rounded-full bg-white bg-opacity-20 flex items-center justify-center text-sm font-semibold\">\n                {getInitials(user?.name || 'D')}\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-semibold truncate\">Dr. {user?.name}</p>\n                <p className=\"text-xs text-teal-200 capitalize\">Doctor</p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Navigation Links */}\n        <nav className=\"space-y-1\">\n          {menu.map((item) => {\n            const Icon = item.icon;\n            const isActive = pathname === item.href;\n            return (\n              <Link\n                key={item.href}\n                href={item.href}\n                className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${\n                  isActive\n                    ? 'bg-teal-700 text-white font-semibold'\n                    : 'text-teal-100 hover:bg-teal-700 hover:text-white'\n                }`}\n              >\n                <Icon className=\"text-xl flex-shrink-0\" />\n                {!sidebarCollapsed && <span className=\"text-sm\">{item.label}</span>}\n              </Link>\n            );\n          })}\n        </nav>\n\n        {/* Logout Button */}\n        <div className=\"absolute bottom-4 left-4 right-4\">\n          <button\n            onClick={logout}\n            className=\"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-teal-100 hover:bg-teal-700 hover:text-white\"\n          >\n            <FiLogOut className=\"text-xl flex-shrink-0\" />\n            {!sidebarCollapsed && <span className=\"text-sm\">Logout</span>}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DoctorSidebar;\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 979, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/lib/api.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000/api';\r\n\r\nconst api = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    if (typeof window !== 'undefined') {\r\n      const token = localStorage.getItem('token');\r\n      if (token) {\r\n        config.headers.Authorization = `Bearer ${token}`;\r\n      }\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response?.status === 401) {\r\n      if (typeof window !== 'undefined') {\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('user');\r\n        window.location.href = '/login';\r\n      }\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default api;\r\n\r\n"],"names":[],"mappings":";;;;AAEgB;AAFhB;;AAEA,MAAM,UAAU,0NAAO,CAAC,GAAG,CAAC,mBAAmB,IAAI;AAEnD,MAAM,MAAM,kMAAK,CAAC,MAAM,CAAC;IACvB,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAC1B,CAAC;IACC,wCAAmC;QACjC,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAI,OAAO;YACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;QAClD;IACF;IACA,OAAO;AACT,GACA,CAAC;IACC,OAAO,QAAQ,MAAM,CAAC;AACxB;AAGF,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC,WAAa,UACd,CAAC;IACC,IAAI,MAAM,QAAQ,EAAE,WAAW,KAAK;QAClC,wCAAmC;YACjC,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB;IACF;IACA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa","debugId":null}},
    {"offset": {"line": 1022, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/app/doctor/prescriptions/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useNotification } from '@/context/NotificationContext';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport Link from 'next/link';\nimport Loading from '@/components/Loading';\nimport DoctorSidebar from '@/components/DoctorSidebar';\nimport api from '@/lib/api';\nimport { format, parseISO } from 'date-fns';\nimport { FiX, FiZap, FiCheck, FiEdit2, FiXCircle, FiFileText, FiMail, FiClipboard, FiActivity, FiBarChart2, FiAlertCircle, FiHeart, FiSave, FiEye, FiPrinter, FiPlus, FiCalendar, FiClock } from 'react-icons/fi';\n\nexport default function DoctorPrescriptionsPage() {\n  const { user, loading: authLoading, logout } = useAuth();\n  const { showNotification } = useNotification();\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const [prescriptions, setPrescriptions] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [problem, setProblem] = useState('');\n  const [loadingSuggestions, setLoadingSuggestions] = useState(false);\n  const [suggestions, setSuggestions] = useState<any>(null);\n  const [prescriptionForm, setPrescriptionForm] = useState({\n    patientEmail: '',\n    diagnosis: '',\n    medicines: '',\n    tests: '',\n    rules: '',\n    instructions: '',\n    chiefComplaints: '',\n    history: '',\n    advice: '',\n    followUp: '',\n  });\n  const [doctorProfile, setDoctorProfile] = useState<any>(null);\n  const [patientInfo, setPatientInfo] = useState<any>(null);\n  const [loadingPatient, setLoadingPatient] = useState(false);\n\n  useEffect(() => {\n    if (!authLoading && (!user || user.role !== 'doctor')) {\n      router.push('/login');\n    }\n  }, [user, authLoading, router]);\n\n  useEffect(() => {\n    if (user && user.role === 'doctor') {\n      fetchPrescriptions();\n      fetchDoctorProfile();\n    }\n  }, [user]);\n\n  // Fetch patient info when email changes\n  useEffect(() => {\n    if (prescriptionForm.patientEmail && showCreateModal) {\n      const debounceTimer = setTimeout(() => {\n        fetchPatientInfo(prescriptionForm.patientEmail);\n      }, 500);\n      return () => clearTimeout(debounceTimer);\n    } else {\n      setPatientInfo(null);\n    }\n  }, [prescriptionForm.patientEmail, showCreateModal]);\n\n  // Check for patientEmail in query params and pre-fill form\n  useEffect(() => {\n    const patientEmail = searchParams.get('patientEmail');\n    if (patientEmail) {\n      setPrescriptionForm((prev) => ({\n        ...prev,\n        patientEmail: decodeURIComponent(patientEmail),\n      }));\n      setShowCreateModal(true);\n      // Clean up URL\n      router.replace('/doctor/prescriptions', { scroll: false });\n    }\n  }, [searchParams, router]);\n\n  const fetchPrescriptions = async () => {\n    try {\n      setLoading(true);\n      const response = await api.get('/prescriptions?limit=100');\n      setPrescriptions(response.data.prescriptions || []);\n    } catch (error) {\n      console.error('Error fetching prescriptions:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchDoctorProfile = async () => {\n    try {\n      const response = await api.get('/doctors/profile/me');\n      setDoctorProfile(response.data.doctor);\n    } catch (error) {\n      console.error('Error fetching doctor profile:', error);\n    }\n  };\n\n  const fetchPatientInfo = async (email: string) => {\n    if (!email || !email.includes('@')) {\n      setPatientInfo(null);\n      return;\n    }\n    try {\n      setLoadingPatient(true);\n      // Search for user by email using admin endpoint (doctors may have limited access)\n      // Fallback: try to find patient from prescriptions\n      let patient = null;\n      try {\n        const response = await api.get(`/admin/users?email=${encodeURIComponent(email)}&role=patient&limit=1`);\n        if (response.data.users && response.data.users.length > 0) {\n          patient = response.data.users[0];\n        }\n      } catch (adminError) {\n        // If admin endpoint fails, try finding from prescriptions\n        try {\n          const presResponse = await api.get(`/prescriptions?limit=100`);\n          const prescriptions = presResponse.data.prescriptions || [];\n          const foundPrescription = prescriptions.find((p: any) => p.patient?.email === email);\n          if (foundPrescription?.patient) {\n            patient = foundPrescription.patient;\n          }\n        } catch (presError) {\n          console.error('Error fetching patient from prescriptions:', presError);\n        }\n      }\n      \n      if (patient) {\n        // Calculate age\n        let age = '';\n        if (patient.dateOfBirth) {\n          const birthDate = new Date(patient.dateOfBirth);\n          const today = new Date();\n          let years = today.getFullYear() - birthDate.getFullYear();\n          const monthDiff = today.getMonth() - birthDate.getMonth();\n          if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {\n            years--;\n          }\n          age = `${years} years`;\n        }\n        setPatientInfo({\n          ...patient,\n          age,\n        });\n      } else {\n        setPatientInfo(null);\n      }\n    } catch (error) {\n      console.error('Error fetching patient info:', error);\n      setPatientInfo(null);\n    } finally {\n      setLoadingPatient(false);\n    }\n  };\n\n  const fetchAISuggestions = async () => {\n    if (!problem.trim()) {\n      showNotification('Please describe the patient\\'s problem first', 'error');\n      return;\n    }\n\n    try {\n      setLoadingSuggestions(true);\n      const response = await api.post('/prescriptions/ai-suggestions', {\n        problem: problem.trim(),\n      });\n      setSuggestions(response.data.suggestions);\n      // No success notification - suggestions will show directly\n    } catch (error: any) {\n      console.error('Error fetching AI suggestions:', error);\n      showNotification(error.response?.data?.message || 'Failed to generate AI suggestions', 'error');\n    } finally {\n      setLoadingSuggestions(false);\n    }\n  };\n\n  const acceptSuggestion = (field: string, value: string) => {\n    setPrescriptionForm((prev) => ({\n      ...prev,\n      [field]: value,\n    }));\n  };\n\n  const handleCreatePrescription = async (e?: React.FormEvent) => {\n    if (e) e.preventDefault();\n    try {\n      const medicinesArray = prescriptionForm.medicines\n        .split('\\n')\n        .map((m) => m.trim())\n        .filter((m) => m.length > 0)\n        .map((m) => {\n          const parts = m.split('-').map((p) => p.trim());\n          return {\n            name: parts[0] || m,\n            dosage: parts[1] || '',\n            frequency: parts[2] || '',\n          };\n        });\n\n      const testsArray = prescriptionForm.tests\n        .split('\\n')\n        .map((t) => t.trim())\n        .filter((t) => t.length > 0)\n        .map((t) => ({ name: t, description: '' }));\n\n      const rulesArray = prescriptionForm.rules\n        .split('\\n')\n        .map((r) => r.trim())\n        .filter((r) => r.length > 0)\n        .map((r) => ({ title: r, description: '' }));\n\n      // Combine chiefComplaints, history, and followUp into instructions\n      const combinedInstructions = [\n        prescriptionForm.chiefComplaints && `Chief Complaints:\\n${prescriptionForm.chiefComplaints}`,\n        prescriptionForm.history && `History:\\n${prescriptionForm.history}`,\n        prescriptionForm.instructions,\n        prescriptionForm.followUp && `Follow-up:\\n${prescriptionForm.followUp}`,\n      ].filter(Boolean).join('\\n\\n');\n\n      // Use advice for rules if rules is empty\n      const finalRules = rulesArray.length > 0 ? rulesArray : \n        (prescriptionForm.advice ? prescriptionForm.advice.split('\\n').filter(a => a.trim()).map((a) => ({ title: a.trim(), description: '' })) : []);\n\n      await api.post('/prescriptions', {\n        patientEmail: prescriptionForm.patientEmail,\n        diagnosis: prescriptionForm.diagnosis,\n        medicines: medicinesArray,\n        tests: testsArray,\n        rules: finalRules,\n        instructions: combinedInstructions || prescriptionForm.instructions,\n      });\n\n      showNotification('Prescription created successfully', 'success');\n      setShowCreateModal(false);\n      setPrescriptionForm({ patientEmail: '', diagnosis: '', medicines: '', tests: '', rules: '', instructions: '', chiefComplaints: '', history: '', advice: '', followUp: '' });\n      setProblem('');\n      setSuggestions(null);\n      fetchPrescriptions();\n    } catch (error: any) {\n      showNotification(error.response?.data?.message || 'Failed to create prescription', 'error');\n    }\n  };\n\n  const getInitials = (name: string) => {\n    return name\n      .split(' ')\n      .map((n) => n[0])\n      .join('')\n      .toUpperCase()\n      .slice(0, 2);\n  };\n\n  if (authLoading || loading) {\n    return <Loading />;\n  }\n\n  if (!user || user.role !== 'doctor') {\n    return null;\n  }\n\n  return (\n    <div className=\"flex min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors\">\n      <DoctorSidebar user={user} logout={logout} />\n      <main className=\"ml-64 flex-1 p-8 transition-all duration-300\">\n        <div className=\"flex justify-between items-start mb-8\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-2\">Prescriptions</h1>\n            <p className=\"text-gray-600 dark:text-gray-400\">Manage patient prescriptions</p>\n          </div>\n          <button\n            onClick={() => setShowCreateModal(true)}\n            className=\"px-6 py-2 bg-teal-600 dark:bg-teal-700 text-white rounded-lg hover:bg-teal-700 dark:hover:bg-teal-600 transition-colors font-medium\"\n          >\n            + New Prescription\n          </button>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {prescriptions.map((prescription) => (\n            <div\n              key={prescription.id}\n              className=\"bg-white dark:bg-gray-800 rounded-xl shadow-md p-5 hover:shadow-lg transition-all border border-gray-100 dark:border-gray-700\"\n            >\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex-1\">\n                  <h3 className=\"text-lg font-semibold text-gray-800 dark:text-gray-100\">{prescription.patient?.name}</h3>\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">{prescription.patient?.email}</p>\n                </div>\n              </div>\n              {prescription.diagnosis && (\n                <div className=\"mb-3\">\n                  <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Diagnosis:</p>\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">{prescription.diagnosis}</p>\n                </div>\n              )}\n              {prescription.medicines && Array.isArray(prescription.medicines) && prescription.medicines.length > 0 && (\n                <div className=\"mb-3\">\n                  <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Medicines:</p>\n                  <ul className=\"text-sm text-gray-600 dark:text-gray-400 list-disc list-inside\">\n                    {prescription.medicines.map((med: any, idx: number) => (\n                      <li key={idx}>{typeof med === 'string' ? med : med.name || med}</li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n              {prescription.instructions && (\n                <div className=\"mb-3\">\n                  <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Instructions:</p>\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">{prescription.instructions}</p>\n                </div>\n              )}\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\n                {format(parseISO(prescription.prescriptionDate || prescription.createdAt), 'MMM dd, yyyy')}\n              </p>\n            </div>\n          ))}\n        </div>\n\n        {prescriptions.length === 0 && (\n          <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-md p-12 text-center border border-gray-100 dark:border-gray-700\">\n            <p className=\"text-gray-500 dark:text-gray-400 text-lg\">No prescriptions yet</p>\n          </div>\n        )}\n\n        {/* Create Prescription Modal - Professional Template */}\n        {showCreateModal && (\n          <div\n            className=\"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn overflow-y-auto\"\n            onClick={(e) => {\n              if (e.target === e.currentTarget) {\n                setShowCreateModal(false);\n              }\n            }}\n          >\n            <div className=\"bg-white dark:bg-gray-800 shadow-2xl max-w-5xl w-full my-8 flex flex-col transform transition-all animate-slideUp\" style={{ minHeight: '90vh' }}>\n              {/* Professional Prescription Header */}\n              <div className=\"p-6 border-b-2 border-gray-400 dark:border-gray-500 bg-white dark:bg-gray-800\">\n                <div className=\"flex justify-between items-start\">\n                  {/* Doctor Info - Left Side */}\n                  <div className=\"flex-1\">\n                    <h2 className=\"text-3xl font-bold text-teal-600 dark:text-teal-400 mb-2\">\n                      {doctorProfile?.user?.name ? `Dr. ${doctorProfile.user.name}` : user?.name ? `Dr. ${user.name}` : 'Dr. Name'}\n                    </h2>\n                    <p className=\"text-base text-gray-800 dark:text-gray-200 font-medium mb-1\">\n                      {doctorProfile?.qualification || 'MBBS, FCPS, PGT (Diploma)'}\n                    </p>\n                    {doctorProfile?.specialization && (\n                      <p className=\"text-sm text-gray-700 dark:text-gray-300 mb-1\">\n                        {doctorProfile.specialization}\n                      </p>\n                    )}\n                    {doctorProfile?.department?.name && (\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2\">\n                        {doctorProfile.department.name}\n                      </p>\n                    )}\n                    <div className=\"space-y-0.5 text-sm text-gray-700 dark:text-gray-300\">\n                      {doctorProfile?.user?.email && (\n                        <p>Email: {doctorProfile.user.email}</p>\n                      )}\n                      {doctorProfile?.user?.phone && (\n                        <p>Cell: {doctorProfile.user.phone}</p>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Date & Time - Right Side */}\n                  <div className=\"text-right\">\n                    <p className=\"text-base font-semibold text-gray-800 dark:text-gray-200 mb-1\">\n                      Date: {format(new Date(), 'dd MMMM, yyyy')}\n                    </p>\n                    <p className=\"text-base font-semibold text-gray-800 dark:text-gray-200\">\n                      Time: {format(new Date(), 'h:mm a')}\n                    </p>\n                  </div>\n                </div>\n\n                {/* Patient Info Section */}\n                <div className=\"border-t-2 border-gray-400 dark:border-gray-500 pt-3 mt-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex-1 mr-4\">\n                      <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1\">\n                        Patient Email <span className=\"text-red-500\">*</span>\n                      </label>\n                      <input\n                        type=\"email\"\n                        value={prescriptionForm.patientEmail}\n                        onChange={(e) => setPrescriptionForm({ ...prescriptionForm, patientEmail: e.target.value })}\n                        required\n                        className=\"w-full max-w-sm px-3 py-1.5 border-2 border-gray-400 dark:border-gray-500 rounded focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 text-sm\"\n                        placeholder=\"patient@example.com\"\n                      />\n                    </div>\n                    {patientInfo && (\n                      <div className=\"text-right\">\n                        <p className=\"text-base font-semibold text-gray-800 dark:text-gray-200\">\n                          Patient: {patientInfo.name || 'N/A'}\n                        </p>\n                        {patientInfo.age && (\n                          <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                            Age: {patientInfo.age} {patientInfo.weight ? `years | Weight: ${patientInfo.weight}` : 'years'}\n                          </p>\n                        )}\n                      </div>\n                    )}\n                    {loadingPatient && (\n                      <div className=\"text-right\">\n                        <p className=\"text-sm text-gray-500 italic\">Loading...</p>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n\n              {/* Professional Prescription Body - Two Column Layout */}\n              <div className=\"overflow-y-auto flex-1 p-8 bg-white dark:bg-gray-800\">\n                <form onSubmit={handleCreatePrescription} className=\"space-y-6\">\n                  {/* Problem Input & AI Suggestions Section */}\n                  <div className=\"mb-5 p-3 bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-300 dark:border-blue-700\">\n                    <label className=\"block text-sm font-bold text-gray-800 dark:text-gray-200 mb-2\">\n                      üìù Patient Problem / Notes\n                    </label>\n                    <textarea\n                      value={problem}\n                      onChange={(e) => setProblem(e.target.value)}\n                      rows={3}\n                      className=\"w-full px-3 py-2 border-2 border-gray-400 dark:border-gray-500 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 text-sm resize-none\"\n                      placeholder=\"Describe the patient's symptoms, complaints, or medical issues here...\"\n                    />\n                    <div className=\"mt-2 flex items-center gap-2\">\n                      <button\n                        type=\"button\"\n                        onClick={fetchAISuggestions}\n                        disabled={!problem.trim() || loadingSuggestions}\n                        className=\"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 text-sm font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 shadow-md\"\n                      >\n                        <FiZap className={loadingSuggestions ? 'animate-spin' : ''} />\n                        {loadingSuggestions ? 'Generating...' : '‚ú® Get AI Suggestions'}\n                      </button>\n                      {suggestions && (\n                        <button\n                          type=\"button\"\n                          onClick={() => setSuggestions(null)}\n                          className=\"px-3 py-2 border-2 border-gray-400 dark:border-gray-500 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300\"\n                        >\n                          Clear\n                        </button>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* AI Suggestions */}\n                  {suggestions && (\n                    <div className=\"mb-5 p-4 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/30 dark:to-pink-900/30 border-2 border-purple-300 dark:border-purple-700\">\n                      <h3 className=\"font-bold text-gray-800 dark:text-gray-100 text-base mb-3 flex items-center gap-2\">\n                        <FiZap className=\"text-purple-600 dark:text-purple-400\" />\n                        AI-Powered Suggestions\n                      </h3>\n                      <div className=\"space-y-2.5 mb-3\">\n                        {suggestions.diagnosis && (\n                          <div className=\"p-2.5 bg-white dark:bg-gray-800 border-2 border-purple-200 dark:border-purple-700\">\n                            <p className=\"text-xs font-bold text-gray-800 dark:text-gray-200 mb-1\">Diagnosis:</p>\n                            <p className=\"text-xs text-gray-700 dark:text-gray-300 leading-relaxed\">{suggestions.diagnosis}</p>\n                          </div>\n                        )}\n                        {suggestions.medicines && (\n                          <div className=\"p-2.5 bg-white dark:bg-gray-800 border-2 border-purple-200 dark:border-purple-700\">\n                            <p className=\"text-xs font-bold text-gray-800 dark:text-gray-200 mb-1\">Medicines:</p>\n                            <pre className=\"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap font-mono leading-relaxed\">{suggestions.medicines}</pre>\n                          </div>\n                        )}\n                        {suggestions.tests && (\n                          <div className=\"p-2.5 bg-white dark:bg-gray-800 border-2 border-purple-200 dark:border-purple-700\">\n                            <p className=\"text-xs font-bold text-gray-800 dark:text-gray-200 mb-1\">Tests:</p>\n                            <pre className=\"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap leading-relaxed\">{suggestions.tests}</pre>\n                          </div>\n                        )}\n                        {suggestions.rules && (\n                          <div className=\"p-2.5 bg-white dark:bg-gray-800 border-2 border-purple-200 dark:border-purple-700\">\n                            <p className=\"text-xs font-bold text-gray-800 dark:text-gray-200 mb-1\">Rules:</p>\n                            <pre className=\"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap leading-relaxed\">{suggestions.rules}</pre>\n                          </div>\n                        )}\n                        {suggestions.instructions && (\n                          <div className=\"p-2.5 bg-white dark:bg-gray-800 border-2 border-purple-200 dark:border-purple-700\">\n                            <p className=\"text-xs font-bold text-gray-800 dark:text-gray-200 mb-1\">Instructions:</p>\n                            <pre className=\"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap leading-relaxed\">{suggestions.instructions}</pre>\n                          </div>\n                        )}\n                      </div>\n                      <div className=\"flex gap-3 pt-3 border-t-2 border-purple-300 dark:border-purple-700\">\n                        <button\n                          type=\"button\"\n                          onClick={() => setSuggestions(null)}\n                          className=\"flex-1 px-4 py-2 border-2 border-gray-400 dark:border-gray-500 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-sm font-semibold text-gray-700 dark:text-gray-300\"\n                        >\n                          Cancel\n                        </button>\n                        <button\n                          type=\"button\"\n                          onClick={() => {\n                            if (suggestions.diagnosis) setPrescriptionForm(prev => ({ ...prev, diagnosis: suggestions.diagnosis }));\n                            if (suggestions.medicines) setPrescriptionForm(prev => ({ ...prev, medicines: suggestions.medicines }));\n                            if (suggestions.tests) setPrescriptionForm(prev => ({ ...prev, tests: suggestions.tests }));\n                            if (suggestions.rules) setPrescriptionForm(prev => ({ ...prev, rules: suggestions.rules }));\n                            if (suggestions.instructions) setPrescriptionForm(prev => ({ ...prev, instructions: suggestions.instructions }));\n                            setSuggestions(null);\n                          }}\n                          className=\"flex-1 px-4 py-2 bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-lg hover:from-green-600 hover:to-teal-600 text-sm font-semibold shadow-md\"\n                        >\n                          <FiCheck className=\"inline mr-1\" />\n                          Approve & Fill\n                        </button>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Two Column Layout - Professional Prescription Style */}\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 mt-4\">\n                    {/* Left Column */}\n                    <div className=\"space-y-5\">\n                      {/* Chief Complaints */}\n                      <div className=\"border-b-2 border-gray-400 dark:border-gray-500 pb-3\">\n                        <label className=\"flex items-center gap-2 text-base font-bold text-gray-900 dark:text-gray-100 mb-2\">\n                          Chief Complaints\n                          <FiEdit2 className=\"text-sm text-gray-500 cursor-pointer hover:text-teal-600\" />\n                        </label>\n                        <textarea\n                          value={prescriptionForm.chiefComplaints}\n                          onChange={(e) => setPrescriptionForm({ ...prescriptionForm, chiefComplaints: e.target.value })}\n                          rows={4}\n                          className=\"w-full px-3 py-2 border-2 border-gray-400 dark:border-gray-500 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-sm bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 resize-none font-medium\"\n                          placeholder=\"Enter chief complaints (one per line)\"\n                        />\n                      </div>\n\n                      {/* History */}\n                      <div className=\"border-b-2 border-gray-400 dark:border-gray-500 pb-3\">\n                        <label className=\"flex items-center gap-2 text-base font-bold text-gray-900 dark:text-gray-100 mb-2\">\n                          History\n                          <FiEdit2 className=\"text-sm text-gray-500 cursor-pointer hover:text-teal-600\" />\n                        </label>\n                        <textarea\n                          value={prescriptionForm.history}\n                          onChange={(e) => setPrescriptionForm({ ...prescriptionForm, history: e.target.value })}\n                          rows={4}\n                          className=\"w-full px-3 py-2 border-2 border-gray-400 dark:border-gray-500 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-sm bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 resize-none font-medium\"\n                          placeholder=\"Enter medical history (one per line)\"\n                        />\n                      </div>\n\n                      {/* Diagnosis */}\n                      <div className=\"border-b-2 border-gray-400 dark:border-gray-500 pb-3\">\n                        <label className=\"flex items-center gap-2 text-base font-bold text-gray-900 dark:text-gray-100 mb-2\">\n                          Diagnosis\n                          <FiEdit2 className=\"text-sm text-gray-500 cursor-pointer hover:text-teal-600\" />\n                        </label>\n                        <textarea\n                          value={prescriptionForm.diagnosis}\n                          onChange={(e) => setPrescriptionForm({ ...prescriptionForm, diagnosis: e.target.value })}\n                          rows={3}\n                          className=\"w-full px-3 py-2 border-2 border-gray-400 dark:border-gray-500 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-sm bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 resize-none font-medium\"\n                          placeholder=\"Enter diagnosis (one per line)\"\n                        />\n                      </div>\n\n                      {/* Investigation */}\n                      <div className=\"border-b-2 border-gray-400 dark:border-gray-500 pb-3\">\n                        <label className=\"flex items-center gap-2 text-base font-bold text-gray-900 dark:text-gray-100 mb-2\">\n                          Investigation\n                          <FiEdit2 className=\"text-sm text-gray-500 cursor-pointer hover:text-teal-600\" />\n                        </label>\n                        <textarea\n                          value={prescriptionForm.tests}\n                          onChange={(e) => setPrescriptionForm({ ...prescriptionForm, tests: e.target.value })}\n                          rows={3}\n                          className=\"w-full px-3 py-2 border-2 border-gray-400 dark:border-gray-500 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-sm bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 resize-none font-medium\"\n                          placeholder=\"Enter lab tests/investigations (one per line)\"\n                        />\n                      </div>\n                    </div>\n\n                    {/* Right Column */}\n                    <div className=\"space-y-5\">\n                      {/* Medicine (Rx) */}\n                      <div className=\"border-b-2 border-gray-400 dark:border-gray-500 pb-3\">\n                        <label className=\"flex items-center gap-2 text-base font-bold text-gray-900 dark:text-gray-100 mb-2\">\n                          Medicine (Rx)\n                          <FiEdit2 className=\"text-sm text-gray-500 cursor-pointer hover:text-teal-600\" />\n                        </label>\n                        <textarea\n                          value={prescriptionForm.medicines}\n                          onChange={(e) => setPrescriptionForm({ ...prescriptionForm, medicines: e.target.value })}\n                          rows={8}\n                          className=\"w-full px-3 py-2 border-2 border-gray-400 dark:border-gray-500 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 font-mono text-sm bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 resize-none\"\n                          placeholder=\"Medicine Name - Dosage - Frequency&#10;Example: Paracetamol - 500mg - 2 times daily\"\n                        />\n                      </div>\n\n                      {/* Advice */}\n                      <div className=\"border-b-2 border-gray-400 dark:border-gray-500 pb-3\">\n                        <label className=\"flex items-center gap-2 text-base font-bold text-gray-900 dark:text-gray-100 mb-2\">\n                          Advice\n                          <FiPlus className=\"text-sm text-gray-500 cursor-pointer hover:text-teal-600\" />\n                        </label>\n                        <textarea\n                          value={prescriptionForm.advice || prescriptionForm.rules}\n                          onChange={(e) => {\n                            setPrescriptionForm({ ...prescriptionForm, advice: e.target.value, rules: e.target.value });\n                          }}\n                          rows={4}\n                          className=\"w-full px-3 py-2 border-2 border-gray-400 dark:border-gray-500 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-sm bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 resize-none font-medium\"\n                          placeholder=\"Enter advice/guidelines (one per line)\"\n                        />\n                      </div>\n\n                      {/* Follow up */}\n                      <div className=\"border-b-2 border-gray-400 dark:border-gray-500 pb-3\">\n                        <label className=\"flex items-center gap-2 text-base font-bold text-gray-900 dark:text-gray-100 mb-2\">\n                          Follow up\n                          <FiPlus className=\"text-sm text-gray-500 cursor-pointer hover:text-teal-600\" />\n                        </label>\n                        <textarea\n                          value={prescriptionForm.followUp || prescriptionForm.instructions}\n                          onChange={(e) => {\n                            setPrescriptionForm({ ...prescriptionForm, followUp: e.target.value, instructions: e.target.value });\n                          }}\n                          rows={3}\n                          className=\"w-full px-3 py-2 border-2 border-gray-400 dark:border-gray-500 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-sm bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 resize-none font-medium\"\n                          placeholder=\"Enter follow-up instructions\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Action Buttons */}\n                  <div className=\"flex flex-wrap gap-3 pt-5 border-t-2 border-gray-400 dark:border-gray-500 mt-8\">\n                    <button\n                      type=\"submit\"\n                      onClick={handleCreatePrescription}\n                      className=\"px-5 py-2.5 bg-teal-600 dark:bg-teal-700 text-white rounded-lg hover:bg-teal-700 dark:hover:bg-teal-600 font-bold transition-colors flex items-center gap-2 text-sm shadow-md\"\n                    >\n                      <FiCheck className=\"text-base\" />\n                      Save & Send\n                    </button>\n                    <button\n                      type=\"button\"\n                      className=\"px-5 py-2.5 border-2 border-gray-400 dark:border-gray-500 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 font-semibold text-gray-700 dark:text-gray-300 transition-colors flex items-center gap-2 text-sm\"\n                    >\n                      <FiEye className=\"text-base\" />\n                      Preview\n                    </button>\n                    <button\n                      type=\"button\"\n                      className=\"px-5 py-2.5 border-2 border-gray-400 dark:border-gray-500 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 font-semibold text-gray-700 dark:text-gray-300 transition-colors text-sm\"\n                    >\n                      Save as Template\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => window.print()}\n                      className=\"px-5 py-2.5 border-2 border-gray-400 dark:border-gray-500 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 font-semibold text-gray-700 dark:text-gray-300 transition-colors flex items-center gap-2 text-sm\"\n                    >\n                      <FiPrinter className=\"text-base\" />\n                      Print\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        setShowCreateModal(false);\n                        setPrescriptionForm({ patientEmail: '', diagnosis: '', medicines: '', tests: '', rules: '', instructions: '', chiefComplaints: '', history: '', advice: '', followUp: '' });\n                        setProblem('');\n                        setSuggestions(null);\n                      }}\n                      className=\"px-5 py-2.5 border-2 border-gray-400 dark:border-gray-500 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 font-semibold text-gray-700 dark:text-gray-300 transition-colors flex items-center gap-2 text-sm ml-auto\"\n                    >\n                      <FiX className=\"text-base\" />\n                      Cancel\n                    </button>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n\n\nimport { useEffect, useState } from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useNotification } from '@/context/NotificationContext';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport Link from 'next/link';\nimport Loading from '@/components/Loading';\nimport DoctorSidebar from '@/components/DoctorSidebar';\nimport api from '@/lib/api';\nimport { format, parseISO } from 'date-fns';\nimport { FiX, FiZap, FiCheck, FiEdit2, FiXCircle, FiFileText, FiMail, FiClipboard, FiActivity, FiBarChart2, FiAlertCircle, FiHeart, FiSave, FiEye, FiPrinter, FiPlus, FiCalendar, FiClock } from 'react-icons/fi';\n\nexport default function DoctorPrescriptionsPage() {\n  const { user, loading: authLoading, logout } = useAuth();\n  const { showNotification } = useNotification();\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const [prescriptions, setPrescriptions] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [problem, setProblem] = useState('');\n  const [loadingSuggestions, setLoadingSuggestions] = useState(false);\n  const [suggestions, setSuggestions] = useState<any>(null);\n  const [prescriptionForm, setPrescriptionForm] = useState({\n    patientEmail: '',\n    diagnosis: '',\n    medicines: '',\n    tests: '',\n    rules: '',\n    instructions: '',\n    chiefComplaints: '',\n    history: '',\n    advice: '',\n    followUp: '',\n  });\n  const [doctorProfile, setDoctorProfile] = useState<any>(null);\n  const [patientInfo, setPatientInfo] = useState<any>(null);\n  const [loadingPatient, setLoadingPatient] = useState(false);\n\n  useEffect(() => {\n    if (!authLoading && (!user || user.role !== 'doctor')) {\n      router.push('/login');\n    }\n  }, [user, authLoading, router]);\n\n  useEffect(() => {\n    if (user && user.role === 'doctor') {\n      fetchPrescriptions();\n      fetchDoctorProfile();\n    }\n  }, [user]);\n\n  // Fetch patient info when email changes\n  useEffect(() => {\n    if (prescriptionForm.patientEmail && showCreateModal) {\n      const debounceTimer = setTimeout(() => {\n        fetchPatientInfo(prescriptionForm.patientEmail);\n      }, 500);\n      return () => clearTimeout(debounceTimer);\n    } else {\n      setPatientInfo(null);\n    }\n  }, [prescriptionForm.patientEmail, showCreateModal]);\n\n  // Check for patientEmail in query params and pre-fill form\n  useEffect(() => {\n    const patientEmail = searchParams.get('patientEmail');\n    if (patientEmail) {\n      setPrescriptionForm((prev) => ({\n        ...prev,\n        patientEmail: decodeURIComponent(patientEmail),\n      }));\n      setShowCreateModal(true);\n      // Clean up URL\n      router.replace('/doctor/prescriptions', { scroll: false });\n    }\n  }, [searchParams, router]);\n\n  const fetchPrescriptions = async () => {\n    try {\n      setLoading(true);\n      const response = await api.get('/prescriptions?limit=100');\n      setPrescriptions(response.data.prescriptions || []);\n    } catch (error) {\n      console.error('Error fetching prescriptions:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchDoctorProfile = async () => {\n    try {\n      const response = await api.get('/doctors/profile/me');\n      setDoctorProfile(response.data.doctor);\n    } catch (error) {\n      console.error('Error fetching doctor profile:', error);\n    }\n  };\n\n  const fetchPatientInfo = async (email: string) => {\n    if (!email || !email.includes('@')) {\n      setPatientInfo(null);\n      return;\n    }\n    try {\n      setLoadingPatient(true);\n      // Search for user by email using admin endpoint (doctors may have limited access)\n      // Fallback: try to find patient from prescriptions\n      let patient = null;\n      try {\n        const response = await api.get(`/admin/users?email=${encodeURIComponent(email)}&role=patient&limit=1`);\n        if (response.data.users && response.data.users.length > 0) {\n          patient = response.data.users[0];\n        }\n      } catch (adminError) {\n        // If admin endpoint fails, try finding from prescriptions\n        try {\n          const presResponse = await api.get(`/prescriptions?limit=100`);\n          const prescriptions = presResponse.data.prescriptions || [];\n          const foundPrescription = prescriptions.find((p: any) => p.patient?.email === email);\n          if (foundPrescription?.patient) {\n            patient = foundPrescription.patient;\n          }\n        } catch (presError) {\n          console.error('Error fetching patient from prescriptions:', presError);\n        }\n      }\n      \n      if (patient) {\n        // Calculate age\n        let age = '';\n        if (patient.dateOfBirth) {\n          const birthDate = new Date(patient.dateOfBirth);\n          const today = new Date();\n          let years = today.getFullYear() - birthDate.getFullYear();\n          const monthDiff = today.getMonth() - birthDate.getMonth();\n          if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {\n            years--;\n          }\n          age = `${years} years`;\n        }\n        setPatientInfo({\n          ...patient,\n          age,\n        });\n      } else {\n        setPatientInfo(null);\n      }\n    } catch (error) {\n      console.error('Error fetching patient info:', error);\n      setPatientInfo(null);\n    } finally {\n      setLoadingPatient(false);\n    }\n  };\n\n  const fetchAISuggestions = async () => {\n    if (!problem.trim()) {\n      showNotification('Please describe the patient\\'s problem first', 'error');\n      return;\n    }\n\n    try {\n      setLoadingSuggestions(true);\n      const response = await api.post('/prescriptions/ai-suggestions', {\n        problem: problem.trim(),\n      });\n      setSuggestions(response.data.suggestions);\n      // No success notification - suggestions will show directly\n    } catch (error: any) {\n      console.error('Error fetching AI suggestions:', error);\n      showNotification(error.response?.data?.message || 'Failed to generate AI suggestions', 'error');\n    } finally {\n      setLoadingSuggestions(false);\n    }\n  };\n\n  const acceptSuggestion = (field: string, value: string) => {\n    setPrescriptionForm((prev) => ({\n      ...prev,\n      [field]: value,\n    }));\n  };\n\n  const handleCreatePrescription = async (e?: React.FormEvent) => {\n    if (e) e.preventDefault();\n    try {\n      const medicinesArray = prescriptionForm.medicines\n        .split('\\n')\n        .map((m) => m.trim())\n        .filter((m) => m.length > 0)\n        .map((m) => {\n          const parts = m.split('-').map((p) => p.trim());\n          return {\n            name: parts[0] || m,\n            dosage: parts[1] || '',\n            frequency: parts[2] || '',\n          };\n        });\n\n      const testsArray = prescriptionForm.tests\n        .split('\\n')\n        .map((t) => t.trim())\n        .filter((t) => t.length > 0)\n        .map((t) => ({ name: t, description: '' }));\n\n      const rulesArray = prescriptionForm.rules\n        .split('\\n')\n        .map((r) => r.trim())\n        .filter((r) => r.length > 0)\n        .map((r) => ({ title: r, description: '' }));\n\n      // Combine chiefComplaints, history, and followUp into instructions\n      const combinedInstructions = [\n        prescriptionForm.chiefComplaints && `Chief Complaints:\\n${prescriptionForm.chiefComplaints}`,\n        prescriptionForm.history && `History:\\n${prescriptionForm.history}`,\n        prescriptionForm.instructions,\n        prescriptionForm.followUp && `Follow-up:\\n${prescriptionForm.followUp}`,\n      ].filter(Boolean).join('\\n\\n');\n\n      // Use advice for rules if rules is empty\n      const finalRules = rulesArray.length > 0 ? rulesArray : \n        (prescriptionForm.advice ? prescriptionForm.advice.split('\\n').filter(a => a.trim()).map((a) => ({ title: a.trim(), description: '' })) : []);\n\n      await api.post('/prescriptions', {\n        patientEmail: prescriptionForm.patientEmail,\n        diagnosis: prescriptionForm.diagnosis,\n        medicines: medicinesArray,\n        tests: testsArray,\n        rules: finalRules,\n        instructions: combinedInstructions || prescriptionForm.instructions,\n      });\n\n      showNotification('Prescription created successfully', 'success');\n      setShowCreateModal(false);\n      setPrescriptionForm({ patientEmail: '', diagnosis: '', medicines: '', tests: '', rules: '', instructions: '', chiefComplaints: '', history: '', advice: '', followUp: '' });\n      setProblem('');\n      setSuggestions(null);\n      fetchPrescriptions();\n    } catch (error: any) {\n      showNotification(error.response?.data?.message || 'Failed to create prescription', 'error');\n    }\n  };\n\n  const getInitials = (name: string) => {\n    return name\n      .split(' ')\n      .map((n) => n[0])\n      .join('')\n      .toUpperCase()\n      .slice(0, 2);\n  };\n\n  if (authLoading || loading) {\n    return <Loading />;\n  }\n\n  if (!user || user.role !== 'doctor') {\n    return null;\n  }\n\n  return (\n    <div className=\"flex min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors\">\n      <DoctorSidebar user={user} logout={logout} />\n      <main className=\"ml-64 flex-1 p-8 transition-all duration-300\">\n        <div className=\"flex justify-between items-start mb-8\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-2\">Prescriptions</h1>\n            <p className=\"text-gray-600 dark:text-gray-400\">Manage patient prescriptions</p>\n          </div>\n          <button\n            onClick={() => setShowCreateModal(true)}\n            className=\"px-6 py-2 bg-teal-600 dark:bg-teal-700 text-white rounded-lg hover:bg-teal-700 dark:hover:bg-teal-600 transition-colors font-medium\"\n          >\n            + New Prescription\n          </button>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {prescriptions.map((prescription) => (\n            <div\n              key={prescription.id}\n              className=\"bg-white dark:bg-gray-800 rounded-xl shadow-md p-5 hover:shadow-lg transition-all border border-gray-100 dark:border-gray-700\"\n            >\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex-1\">\n                  <h3 className=\"text-lg font-semibold text-gray-800 dark:text-gray-100\">{prescription.patient?.name}</h3>\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">{prescription.patient?.email}</p>\n                </div>\n              </div>\n              {prescription.diagnosis && (\n                <div className=\"mb-3\">\n                  <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Diagnosis:</p>\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">{prescription.diagnosis}</p>\n                </div>\n              )}\n              {prescription.medicines && Array.isArray(prescription.medicines) && prescription.medicines.length > 0 && (\n                <div className=\"mb-3\">\n                  <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Medicines:</p>\n                  <ul className=\"text-sm text-gray-600 dark:text-gray-400 list-disc list-inside\">\n                    {prescription.medicines.map((med: any, idx: number) => (\n                      <li key={idx}>{typeof med === 'string' ? med : med.name || med}</li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n              {prescription.instructions && (\n                <div className=\"mb-3\">\n                  <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Instructions:</p>\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">{prescription.instructions}</p>\n                </div>\n              )}\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\n                {format(parseISO(prescription.prescriptionDate || prescription.createdAt), 'MMM dd, yyyy')}\n              </p>\n            </div>\n          ))}\n        </div>\n\n        {prescriptions.length === 0 && (\n          <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-md p-12 text-center border border-gray-100 dark:border-gray-700\">\n            <p className=\"text-gray-500 dark:text-gray-400 text-lg\">No prescriptions yet</p>\n          </div>\n        )}\n\n        {/* Create Prescription Modal - Professional Template */}\n        {showCreateModal && (\n          <div\n            className=\"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn overflow-y-auto\"\n            onClick={(e) => {\n              if (e.target === e.currentTarget) {\n                setShowCreateModal(false);\n              }\n            }}\n          >\n            <div className=\"bg-white dark:bg-gray-800 shadow-2xl max-w-5xl w-full my-8 flex flex-col transform transition-all animate-slideUp\" style={{ minHeight: '90vh' }}>\n              {/* Professional Prescription Header */}\n              <div className=\"p-6 border-b-2 border-gray-400 dark:border-gray-500 bg-white dark:bg-gray-800\">\n                <div className=\"flex justify-between items-start\">\n                  {/* Doctor Info - Left Side */}\n                  <div className=\"flex-1\">\n                    <h2 className=\"text-3xl font-bold text-teal-600 dark:text-teal-400 mb-2\">\n                      {doctorProfile?.user?.name ? `Dr. ${doctorProfile.user.name}` : user?.name ? `Dr. ${user.name}` : 'Dr. Name'}\n                    </h2>\n                    <p className=\"text-base text-gray-800 dark:text-gray-200 font-medium mb-1\">\n                      {doctorProfile?.qualification || 'MBBS, FCPS, PGT (Diploma)'}\n                    </p>\n                    {doctorProfile?.specialization && (\n                      <p className=\"text-sm text-gray-700 dark:text-gray-300 mb-1\">\n                        {doctorProfile.specialization}\n                      </p>\n                    )}\n                    {doctorProfile?.department?.name && (\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2\">\n                        {doctorProfile.department.name}\n                      </p>\n                    )}\n                    <div className=\"space-y-0.5 text-sm text-gray-700 dark:text-gray-300\">\n                      {doctorProfile?.user?.email && (\n                        <p>Email: {doctorProfile.user.email}</p>\n                      )}\n                      {doctorProfile?.user?.phone && (\n                        <p>Cell: {doctorProfile.user.phone}</p>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Date & Time - Right Side */}\n                  <div className=\"text-right\">\n                    <p className=\"text-base font-semibold text-gray-800 dark:text-gray-200 mb-1\">\n                      Date: {format(new Date(), 'dd MMMM, yyyy')}\n                    </p>\n                    <p className=\"text-base font-semibold text-gray-800 dark:text-gray-200\">\n                      Time: {format(new Date(), 'h:mm a')}\n                    </p>\n                  </div>\n                </div>\n\n                {/* Patient Info Section */}\n                <div className=\"border-t-2 border-gray-400 dark:border-gray-500 pt-3 mt-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex-1 mr-4\">\n                      <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1\">\n                        Patient Email <span className=\"text-red-500\">*</span>\n                      </label>\n                      <input\n                        type=\"email\"\n                        value={prescriptionForm.patientEmail}\n                        onChange={(e) => setPrescriptionForm({ ...prescriptionForm, patientEmail: e.target.value })}\n                        required\n                        className=\"w-full max-w-sm px-3 py-1.5 border-2 border-gray-400 dark:border-gray-500 rounded focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 text-sm\"\n                        placeholder=\"patient@example.com\"\n                      />\n                    </div>\n                    {patientInfo && (\n                      <div className=\"text-right\">\n                        <p className=\"text-base font-semibold text-gray-800 dark:text-gray-200\">\n                          Patient: {patientInfo.name || 'N/A'}\n                        </p>\n                        {patientInfo.age && (\n                          <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                            Age: {patientInfo.age} {patientInfo.weight ? `years | Weight: ${patientInfo.weight}` : 'years'}\n                          </p>\n                        )}\n                      </div>\n                    )}\n                    {loadingPatient && (\n                      <div className=\"text-right\">\n                        <p className=\"text-sm text-gray-500 italic\">Loading...</p>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n\n              {/* Professional Prescription Body - Two Column Layout */}\n              <div className=\"overflow-y-auto flex-1 p-8 bg-white dark:bg-gray-800\">\n                <form onSubmit={handleCreatePrescription} className=\"space-y-6\">\n                  {/* Problem Input & AI Suggestions Section */}\n                  <div className=\"mb-5 p-3 bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-300 dark:border-blue-700\">\n                    <label className=\"block text-sm font-bold text-gray-800 dark:text-gray-200 mb-2\">\n                      üìù Patient Problem / Notes\n                    </label>\n                    <textarea\n                      value={problem}\n                      onChange={(e) => setProblem(e.target.value)}\n                      rows={3}\n                      className=\"w-full px-3 py-2 border-2 border-gray-400 dark:border-gray-500 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 text-sm resize-none\"\n                      placeholder=\"Describe the patient's symptoms, complaints, or medical issues here...\"\n                    />\n                    <div className=\"mt-2 flex items-center gap-2\">\n                      <button\n                        type=\"button\"\n                        onClick={fetchAISuggestions}\n                        disabled={!problem.trim() || loadingSuggestions}\n                        className=\"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 text-sm font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 shadow-md\"\n                      >\n                        <FiZap className={loadingSuggestions ? 'animate-spin' : ''} />\n                        {loadingSuggestions ? 'Generating...' : '‚ú® Get AI Suggestions'}\n                      </button>\n                      {suggestions && (\n                        <button\n                          type=\"button\"\n                          onClick={() => setSuggestions(null)}\n                          className=\"px-3 py-2 border-2 border-gray-400 dark:border-gray-500 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300\"\n                        >\n                          Clear\n                        </button>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* AI Suggestions */}\n                  {suggestions && (\n                    <div className=\"mb-5 p-4 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/30 dark:to-pink-900/30 border-2 border-purple-300 dark:border-purple-700\">\n                      <h3 className=\"font-bold text-gray-800 dark:text-gray-100 text-base mb-3 flex items-center gap-2\">\n                        <FiZap className=\"text-purple-600 dark:text-purple-400\" />\n                        AI-Powered Suggestions\n                      </h3>\n                      <div className=\"space-y-2.5 mb-3\">\n                        {suggestions.diagnosis && (\n                          <div className=\"p-2.5 bg-white dark:bg-gray-800 border-2 border-purple-200 dark:border-purple-700\">\n                            <p className=\"text-xs font-bold text-gray-800 dark:text-gray-200 mb-1\">Diagnosis:</p>\n                            <p className=\"text-xs text-gray-700 dark:text-gray-300 leading-relaxed\">{suggestions.diagnosis}</p>\n                          </div>\n                        )}\n                        {suggestions.medicines && (\n                          <div className=\"p-2.5 bg-white dark:bg-gray-800 border-2 border-purple-200 dark:border-purple-700\">\n                            <p className=\"text-xs font-bold text-gray-800 dark:text-gray-200 mb-1\">Medicines:</p>\n                            <pre className=\"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap font-mono leading-relaxed\">{suggestions.medicines}</pre>\n                          </div>\n                        )}\n                        {suggestions.tests && (\n                          <div className=\"p-2.5 bg-white dark:bg-gray-800 border-2 border-purple-200 dark:border-purple-700\">\n                            <p className=\"text-xs font-bold text-gray-800 dark:text-gray-200 mb-1\">Tests:</p>\n                            <pre className=\"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap leading-relaxed\">{suggestions.tests}</pre>\n                          </div>\n                        )}\n                        {suggestions.rules && (\n                          <div className=\"p-2.5 bg-white dark:bg-gray-800 border-2 border-purple-200 dark:border-purple-700\">\n                            <p className=\"text-xs font-bold text-gray-800 dark:text-gray-200 mb-1\">Rules:</p>\n                            <pre className=\"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap leading-relaxed\">{suggestions.rules}</pre>\n                          </div>\n                        )}\n                        {suggestions.instructions && (\n                          <div className=\"p-2.5 bg-white dark:bg-gray-800 border-2 border-purple-200 dark:border-purple-700\">\n                            <p className=\"text-xs font-bold text-gray-800 dark:text-gray-200 mb-1\">Instructions:</p>\n                            <pre className=\"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap leading-relaxed\">{suggestions.instructions}</pre>\n                          </div>\n                        )}\n                      </div>\n                      <div className=\"flex gap-3 pt-3 border-t-2 border-purple-300 dark:border-purple-700\">\n                        <button\n                          type=\"button\"\n                          onClick={() => setSuggestions(null)}\n                          className=\"flex-1 px-4 py-2 border-2 border-gray-400 dark:border-gray-500 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-sm font-semibold text-gray-700 dark:text-gray-300\"\n                        >\n                          Cancel\n                        </button>\n                        <button\n                          type=\"button\"\n                          onClick={() => {\n                            if (suggestions.diagnosis) setPrescriptionForm(prev => ({ ...prev, diagnosis: suggestions.diagnosis }));\n                            if (suggestions.medicines) setPrescriptionForm(prev => ({ ...prev, medicines: suggestions.medicines }));\n                            if (suggestions.tests) setPrescriptionForm(prev => ({ ...prev, tests: suggestions.tests }));\n                            if (suggestions.rules) setPrescriptionForm(prev => ({ ...prev, rules: suggestions.rules }));\n                            if (suggestions.instructions) setPrescriptionForm(prev => ({ ...prev, instructions: suggestions.instructions }));\n                            setSuggestions(null);\n                          }}\n                          className=\"flex-1 px-4 py-2 bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-lg hover:from-green-600 hover:to-teal-600 text-sm font-semibold shadow-md\"\n                        >\n                          <FiCheck className=\"inline mr-1\" />\n                          Approve & Fill\n                        </button>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Two Column Layout - Professional Prescription Style */}\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 mt-4\">\n                    {/* Left Column */}\n                    <div className=\"space-y-5\">\n                      {/* Chief Complaints */}\n                      <div className=\"border-b-2 border-gray-400 dark:border-gray-500 pb-3\">\n                        <label className=\"flex items-center gap-2 text-base font-bold text-gray-900 dark:text-gray-100 mb-2\">\n                          Chief Complaints\n                          <FiEdit2 className=\"text-sm text-gray-500 cursor-pointer hover:text-teal-600\" />\n                        </label>\n                        <textarea\n                          value={prescriptionForm.chiefComplaints}\n                          onChange={(e) => setPrescriptionForm({ ...prescriptionForm, chiefComplaints: e.target.value })}\n                          rows={4}\n                          className=\"w-full px-3 py-2 border-2 border-gray-400 dark:border-gray-500 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-sm bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 resize-none font-medium\"\n                          placeholder=\"Enter chief complaints (one per line)\"\n                        />\n                      </div>\n\n                      {/* History */}\n                      <div className=\"border-b-2 border-gray-400 dark:border-gray-500 pb-3\">\n                        <label className=\"flex items-center gap-2 text-base font-bold text-gray-900 dark:text-gray-100 mb-2\">\n                          History\n                          <FiEdit2 className=\"text-sm text-gray-500 cursor-pointer hover:text-teal-600\" />\n                        </label>\n                        <textarea\n                          value={prescriptionForm.history}\n                          onChange={(e) => setPrescriptionForm({ ...prescriptionForm, history: e.target.value })}\n                          rows={4}\n                          className=\"w-full px-3 py-2 border-2 border-gray-400 dark:border-gray-500 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-sm bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 resize-none font-medium\"\n                          placeholder=\"Enter medical history (one per line)\"\n                        />\n                      </div>\n\n                      {/* Diagnosis */}\n                      <div className=\"border-b-2 border-gray-400 dark:border-gray-500 pb-3\">\n                        <label className=\"flex items-center gap-2 text-base font-bold text-gray-900 dark:text-gray-100 mb-2\">\n                          Diagnosis\n                          <FiEdit2 className=\"text-sm text-gray-500 cursor-pointer hover:text-teal-600\" />\n                        </label>\n                        <textarea\n                          value={prescriptionForm.diagnosis}\n                          onChange={(e) => setPrescriptionForm({ ...prescriptionForm, diagnosis: e.target.value })}\n                          rows={3}\n                          className=\"w-full px-3 py-2 border-2 border-gray-400 dark:border-gray-500 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-sm bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 resize-none font-medium\"\n                          placeholder=\"Enter diagnosis (one per line)\"\n                        />\n                      </div>\n\n                      {/* Investigation */}\n                      <div className=\"border-b-2 border-gray-400 dark:border-gray-500 pb-3\">\n                        <label className=\"flex items-center gap-2 text-base font-bold text-gray-900 dark:text-gray-100 mb-2\">\n                          Investigation\n                          <FiEdit2 className=\"text-sm text-gray-500 cursor-pointer hover:text-teal-600\" />\n                        </label>\n                        <textarea\n                          value={prescriptionForm.tests}\n                          onChange={(e) => setPrescriptionForm({ ...prescriptionForm, tests: e.target.value })}\n                          rows={3}\n                          className=\"w-full px-3 py-2 border-2 border-gray-400 dark:border-gray-500 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-sm bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 resize-none font-medium\"\n                          placeholder=\"Enter lab tests/investigations (one per line)\"\n                        />\n                      </div>\n                    </div>\n\n                    {/* Right Column */}\n                    <div className=\"space-y-5\">\n                      {/* Medicine (Rx) */}\n                      <div className=\"border-b-2 border-gray-400 dark:border-gray-500 pb-3\">\n                        <label className=\"flex items-center gap-2 text-base font-bold text-gray-900 dark:text-gray-100 mb-2\">\n                          Medicine (Rx)\n                          <FiEdit2 className=\"text-sm text-gray-500 cursor-pointer hover:text-teal-600\" />\n                        </label>\n                        <textarea\n                          value={prescriptionForm.medicines}\n                          onChange={(e) => setPrescriptionForm({ ...prescriptionForm, medicines: e.target.value })}\n                          rows={8}\n                          className=\"w-full px-3 py-2 border-2 border-gray-400 dark:border-gray-500 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 font-mono text-sm bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 resize-none\"\n                          placeholder=\"Medicine Name - Dosage - Frequency&#10;Example: Paracetamol - 500mg - 2 times daily\"\n                        />\n                      </div>\n\n                      {/* Advice */}\n                      <div className=\"border-b-2 border-gray-400 dark:border-gray-500 pb-3\">\n                        <label className=\"flex items-center gap-2 text-base font-bold text-gray-900 dark:text-gray-100 mb-2\">\n                          Advice\n                          <FiPlus className=\"text-sm text-gray-500 cursor-pointer hover:text-teal-600\" />\n                        </label>\n                        <textarea\n                          value={prescriptionForm.advice || prescriptionForm.rules}\n                          onChange={(e) => {\n                            setPrescriptionForm({ ...prescriptionForm, advice: e.target.value, rules: e.target.value });\n                          }}\n                          rows={4}\n                          className=\"w-full px-3 py-2 border-2 border-gray-400 dark:border-gray-500 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-sm bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 resize-none font-medium\"\n                          placeholder=\"Enter advice/guidelines (one per line)\"\n                        />\n                      </div>\n\n                      {/* Follow up */}\n                      <div className=\"border-b-2 border-gray-400 dark:border-gray-500 pb-3\">\n                        <label className=\"flex items-center gap-2 text-base font-bold text-gray-900 dark:text-gray-100 mb-2\">\n                          Follow up\n                          <FiPlus className=\"text-sm text-gray-500 cursor-pointer hover:text-teal-600\" />\n                        </label>\n                        <textarea\n                          value={prescriptionForm.followUp || prescriptionForm.instructions}\n                          onChange={(e) => {\n                            setPrescriptionForm({ ...prescriptionForm, followUp: e.target.value, instructions: e.target.value });\n                          }}\n                          rows={3}\n                          className=\"w-full px-3 py-2 border-2 border-gray-400 dark:border-gray-500 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-sm bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 resize-none font-medium\"\n                          placeholder=\"Enter follow-up instructions\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Action Buttons */}\n                  <div className=\"flex flex-wrap gap-3 pt-5 border-t-2 border-gray-400 dark:border-gray-500 mt-8\">\n                    <button\n                      type=\"submit\"\n                      onClick={handleCreatePrescription}\n                      className=\"px-5 py-2.5 bg-teal-600 dark:bg-teal-700 text-white rounded-lg hover:bg-teal-700 dark:hover:bg-teal-600 font-bold transition-colors flex items-center gap-2 text-sm shadow-md\"\n                    >\n                      <FiCheck className=\"text-base\" />\n                      Save & Send\n                    </button>\n                    <button\n                      type=\"button\"\n                      className=\"px-5 py-2.5 border-2 border-gray-400 dark:border-gray-500 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 font-semibold text-gray-700 dark:text-gray-300 transition-colors flex items-center gap-2 text-sm\"\n                    >\n                      <FiEye className=\"text-base\" />\n                      Preview\n                    </button>\n                    <button\n                      type=\"button\"\n                      className=\"px-5 py-2.5 border-2 border-gray-400 dark:border-gray-500 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 font-semibold text-gray-700 dark:text-gray-300 transition-colors text-sm\"\n                    >\n                      Save as Template\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => window.print()}\n                      className=\"px-5 py-2.5 border-2 border-gray-400 dark:border-gray-500 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 font-semibold text-gray-700 dark:text-gray-300 transition-colors flex items-center gap-2 text-sm\"\n                    >\n                      <FiPrinter className=\"text-base\" />\n                      Print\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        setShowCreateModal(false);\n                        setPrescriptionForm({ patientEmail: '', diagnosis: '', medicines: '', tests: '', rules: '', instructions: '', chiefComplaints: '', history: '', advice: '', followUp: '' });\n                        setProblem('');\n                        setSuggestions(null);\n                      }}\n                      className=\"px-5 py-2.5 border-2 border-gray-400 dark:border-gray-500 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 font-semibold text-gray-700 dark:text-gray-300 transition-colors flex items-center gap-2 text-sm ml-auto\"\n                    >\n                      <FiX className=\"text-base\" />\n                      Cancel\n                    </button>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}