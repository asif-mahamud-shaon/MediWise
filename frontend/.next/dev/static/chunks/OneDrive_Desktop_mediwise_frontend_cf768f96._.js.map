{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/components/Loading.tsx"],"sourcesContent":["const Loading = () => {\r\n  return (\r\n    <div className=\"flex items-center justify-center min-h-screen\">\r\n      <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-600\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loading;\r\n\r\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,UAAU;IACd,qBACE,4OAAC;QAAI,WAAU;kBACb,cAAA,4OAAC;YAAI,WAAU;;;;;;;;;;;AAGrB;KANM;uCAQS","debugId":null}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/app/doctor/chat/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState, useRef } from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useNotification } from '@/context/NotificationContext';\nimport { useRouter } from 'next/navigation';\nimport Loading from '@/components/Loading';\nimport DoctorSidebar from '@/components/DoctorSidebar';\nimport api from '@/lib/api';\nimport { format, formatDistanceToNow } from 'date-fns';\nimport { FiSend, FiSearch } from 'react-icons/fi';\n\nexport default function DoctorChatPage() {\n  const { user, loading: authLoading, logout } = useAuth();\n  const { showNotification } = useNotification();\n  const router = useRouter();\n  const pathname = usePathname();\n  const [allUsers, setAllUsers] = useState<any[]>([]);\n  const [conversations, setConversations] = useState<any[]>([]);\n  const [selectedConversation, setSelectedConversation] = useState<any>(null);\n  const [messages, setMessages] = useState<any[]>([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const pollingIntervalRef = useRef<NodeJS.Timeout | null>(null);\n\n  useEffect(() => {\n    if (!authLoading && (!user || user.role !== 'doctor')) {\n      router.push('/login');\n    }\n  }, [user, authLoading, router]);\n\n  useEffect(() => {\n    if (user && user.role === 'doctor') {\n      fetchChatUsers();\n      fetchConversations();\n      fetchUnreadCount();\n    }\n  }, [user]);\n\n  // Real-time polling: Update users, conversations, and messages every 2 seconds\n  useEffect(() => {\n    if (user && user.role === 'doctor') {\n      // Poll for chat users and conversations even when no conversation is selected\n      const globalPollInterval = setInterval(() => {\n        fetchChatUsers();\n        fetchConversations();\n        fetchUnreadCount();\n        if (selectedConversation) {\n          fetchMessages(selectedConversation.id);\n        }\n      }, 2000);\n\n      return () => {\n        clearInterval(globalPollInterval);\n      };\n    }\n  }, [user, selectedConversation]);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n\n  const fetchChatUsers = async () => {\n    try {\n      const response = await api.get('/chat/users');\n      setAllUsers(response.data.users || []);\n    } catch (error) {\n      console.error('Error fetching chat users:', error);\n    }\n  };\n\n  const fetchConversations = async () => {\n    try {\n      const response = await api.get('/chat/conversations');\n      setConversations(response.data.conversations || []);\n    } catch (error) {\n      console.error('Error fetching conversations:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchMessages = async (userId: string) => {\n    try {\n      const response = await api.get(`/chat/messages/${userId}`);\n      setMessages(response.data.messages || []);\n    } catch (error) {\n      console.error('Error fetching messages:', error);\n    }\n  };\n\n  const fetchUnreadCount = async () => {\n    try {\n      const response = await api.get('/chat/unread-count');\n      setUnreadCount(response.data.count || 0);\n    } catch (error) {\n      console.error('Error fetching unread count:', error);\n    }\n  };\n\n  const handleSelectConversation = (conversation: any) => {\n    setSelectedConversation(conversation);\n    fetchMessages(conversation.id);\n    setSearchQuery('');\n    setShowSuggestions(false);\n  };\n\n  const handleSelectUser = (user: any) => {\n    // Check if conversation exists\n    const existingConversation = conversations.find(c => c.id === user.id);\n    if (existingConversation) {\n      handleSelectConversation(existingConversation);\n    } else {\n      // Create new conversation object\n      const newConversation = {\n        id: user.id,\n        name: user.name,\n        email: user.email,\n        role: user.role,\n        phone: user.phone,\n        lastMessage: user.lastMessage || 'No messages yet',\n        lastMessageTime: user.lastMessageTime || new Date(),\n        unreadCount: user.unreadCount || 0,\n      };\n      setSelectedConversation(newConversation);\n      setMessages([]);\n    }\n    setSearchQuery('');\n    setShowSuggestions(false);\n  };\n\n  const filteredUsers = allUsers.filter((user: any) =>\n    user.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    user.email.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  const handleSendMessage = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!newMessage.trim() || !selectedConversation) return;\n\n    try {\n      await api.post('/chat/send', {\n        receiverId: selectedConversation.id,\n        content: newMessage.trim(),\n      });\n      setNewMessage('');\n      // Immediately fetch new messages and update UI\n      setTimeout(() => {\n        fetchMessages(selectedConversation.id);\n        fetchConversations();\n        fetchChatUsers();\n        fetchUnreadCount();\n      }, 100);\n    } catch (error) {\n      console.error('Error sending message:', error);\n      showNotification('Failed to send message', 'error');\n    }\n  };\n\n  const getInitials = (name: string) => {\n    return name\n      .split(' ')\n      .map((n) => n[0])\n      .join('')\n      .toUpperCase()\n      .slice(0, 2);\n  };\n\n  const getInitialsForUser = (name: string) => {\n    return name\n      ?.split(' ')\n      ?.map((n: string) => n[0])\n      ?.join('')\n      ?.toUpperCase()\n      ?.slice(0, 2) || 'U';\n  };\n\n  if (authLoading || loading) {\n    return <Loading />;\n  }\n\n  if (!user || user.role !== 'doctor') {\n    return null;\n  }\n\n  return (\n    <div className=\"flex min-h-screen bg-gray-50\">\n      {/* Sidebar */}\n      <div className=\"fixed left-0 top-0 h-full w-72 bg-white shadow-lg z-10\">\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"flex flex-col items-center\">\n            {doctorProfile?.profileImage ? (\n              <img\n                src={`data:${doctorProfile.profileImageMimeType || 'image/jpeg'};base64,${doctorProfile.profileImage}`}\n                alt={user.name || 'Doctor'}\n                className=\"w-20 h-20 rounded-full object-cover mb-3 border-2 border-gray-200\"\n              />\n            ) : (\n              <div className=\"w-20 h-20 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white text-2xl font-bold mb-3\">\n                {getInitials(user.name || 'D')}\n              </div>\n            )}\n            <h2 className=\"text-lg font-bold text-gray-800\">{doctorProfile?.user?.name || user.name}</h2>\n            <p className=\"text-sm text-gray-500 mt-1\">{doctorProfile?.specialization || 'Doctor'}</p>\n          </div>\n        </div>\n\n        <nav className=\"p-4 space-y-1\">\n          <Link\n            href=\"/appointments\"\n            className=\"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors\"\n          >\n            <FiCalendar className=\"text-xl\" />\n            <span>APPOINTMENTS</span>\n          </Link>\n          <Link\n            href=\"/doctor/patients\"\n            className=\"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors\"\n          >\n            <FiUser className=\"text-xl\" />\n            <span>MY PATIENTS</span>\n          </Link>\n          <Link\n            href=\"/doctor/chat\"\n            className=\"flex items-center gap-3 px-4 py-3 rounded-lg bg-blue-50 text-blue-600 font-medium border-l-4 border-blue-600\"\n          >\n            <FiMessageCircle className=\"text-xl\" />\n            <span>CHATS</span>\n            {unreadCount > 0 && (\n              <span className=\"ml-auto bg-blue-600 text-white text-xs px-2 py-1 rounded-full\">\n                {unreadCount}\n              </span>\n            )}\n          </Link>\n          <Link\n            href=\"/doctor/prescriptions\"\n            className=\"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors\"\n          >\n            <FiCalendar className=\"text-xl\" />\n            <span>PRESCRIPTIONS</span>\n          </Link>\n          <Link\n            href=\"/doctor/profile\"\n            className=\"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors\"\n          >\n            <FiCalendar className=\"text-xl\" />\n            <span>SETTINGS</span>\n          </Link>\n        </nav>\n\n        {/* Logout Button */}\n        <div className=\"absolute bottom-4 left-4 right-4\">\n          <button\n            onClick={() => {\n              if (confirm('Are you sure you want to logout?')) {\n                logout();\n              }\n            }}\n            className=\"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-red-600 hover:bg-red-50 transition-colors border border-red-200\"\n          >\n            <FiLogOut className=\"text-xl\" />\n            <span>LOGOUT</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <main className=\"ml-72 flex-1 flex h-screen\">\n        {/* Conversations List */}\n        <div className=\"w-1/3 border-r border-gray-200 bg-white flex flex-col\">\n          <div className=\"p-4 border-b border-gray-200\">\n            <h2 className=\"text-xl font-bold text-gray-800 mb-3\">Messages</h2>\n            {/* Search Bar with Auto-suggestions */}\n            <div className=\"relative\">\n              <input\n                type=\"text\"\n                value={searchQuery}\n                onChange={(e) => {\n                  setSearchQuery(e.target.value);\n                  setShowSuggestions(e.target.value.length > 0);\n                }}\n                onFocus={() => {\n                  if (searchQuery.length > 0) {\n                    setShowSuggestions(true);\n                  }\n                }}\n                onBlur={() => {\n                  // Delay hiding to allow click on suggestion\n                  setTimeout(() => setShowSuggestions(false), 200);\n                }}\n                placeholder=\"Search by name or email...\"\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              />\n              {showSuggestions && filteredUsers.length > 0 && (\n                <div className=\"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto\">\n                  {filteredUsers.slice(0, 5).map((user: any) => (\n                    <div\n                      key={user.id}\n                      onMouseDown={(e) => {\n                        e.preventDefault();\n                        handleSelectUser(user);\n                      }}\n                      className=\"px-4 py-3 hover:bg-blue-50 cursor-pointer border-b border-gray-100 last:border-0\"\n                    >\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white font-bold text-sm\">\n                          {getInitialsForUser(user.name)}\n                        </div>\n                        <div className=\"flex-1\">\n                          <p className=\"font-semibold text-gray-800\">{user.name}</p>\n                          <p className=\"text-xs text-gray-600 capitalize\">{user.role}</p>\n                          <p className=\"text-xs text-gray-500 mt-1\">ID: {user.id.slice(0, 8)}...</p>\n                        </div>\n                        {user.unreadCount > 0 && (\n                          <span className=\"bg-blue-600 text-white text-xs px-2 py-1 rounded-full\">\n                            {user.unreadCount}\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n          <div className=\"flex-1 overflow-y-auto\">\n            {/* Show all users (patients/doctors) that can be chatted with */}\n            {allUsers.length === 0 ? (\n              <div className=\"p-8 text-center text-gray-500\">\n                <p>No users available</p>\n              </div>\n            ) : (\n              allUsers.map((user: any) => {\n                const conversation = conversations.find(c => c.id === user.id);\n                const isSelected = selectedConversation?.id === user.id;\n                const displayData = conversation || user;\n                return (\n                  <div\n                    key={user.id}\n                    onClick={() => handleSelectUser(user)}\n                    className={`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors ${\n                      isSelected ? 'bg-blue-50' : ''\n                    }`}\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white font-bold\">\n                        {getInitialsForUser(user.name)}\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-center justify-between\">\n                          <h3 className=\"font-semibold text-gray-800 truncate\">{user.name}</h3>\n                          {displayData.lastMessageTime && (\n                            <span className=\"text-xs text-gray-500\">\n                              {formatDistanceToNow(new Date(displayData.lastMessageTime), { addSuffix: true })}\n                            </span>\n                          )}\n                        </div>\n                        <p className=\"text-sm text-gray-600 truncate mt-1\">{displayData.lastMessage || 'No messages yet'}</p>\n                        <div className=\"flex items-center gap-2 mt-1\">\n                          <p className=\"text-xs text-gray-500\">ID: {user.id.slice(0, 8)}...</p>\n                          <span className=\"text-xs text-gray-400\">â€¢</span>\n                          <p className=\"text-xs text-gray-500 capitalize\">{user.role}</p>\n                        </div>\n                      </div>\n                      {user.unreadCount > 0 && (\n                        <span className=\"bg-blue-600 text-white text-xs px-2 py-1 rounded-full\">\n                          {user.unreadCount}\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                );\n              })\n            )}\n          </div>\n        </div>\n\n        {/* Chat Area */}\n        <div className=\"flex-1 flex flex-col bg-gray-50\">\n          {selectedConversation ? (\n            <>\n              {/* Chat Header */}\n              <div className=\"bg-white border-b border-gray-200 p-4 flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white font-bold\">\n                    {getInitialsForUser(selectedConversation.name)}\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold text-gray-800\">{selectedConversation.name}</h3>\n                    <p className=\"text-xs text-gray-500 capitalize\">{selectedConversation.role}</p>\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  {selectedConversation.phone && (\n                    <a\n                      href={`tel:${selectedConversation.phone}`}\n                      className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n                      title={`Call ${selectedConversation.phone}`}\n                    >\n                      <FiPhone className=\"text-xl text-gray-600\" />\n                    </a>\n                  )}\n                  <button className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\">\n                    <FiMoreVertical className=\"text-xl text-gray-600\" />\n                  </button>\n                </div>\n              </div>\n\n              {/* Messages */}\n              <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n                {messages.map((message) => {\n                  const isOwn = message.senderId === user.id;\n                  return (\n                    <div\n                      key={message.id}\n                      className={`flex ${isOwn ? 'justify-end' : 'justify-start'}`}\n                    >\n                      <div\n                        className={`max-w-xs lg:max-w-md px-4 py-2 rounded-2xl ${\n                          isOwn\n                            ? 'bg-blue-600 text-white'\n                            : 'bg-white text-gray-800 border border-gray-200'\n                        }`}\n                      >\n                        {!isOwn && (\n                          <p className=\"text-xs font-semibold mb-1 opacity-75\">\n                            {message.sender.name}\n                          </p>\n                        )}\n                        <p className=\"text-sm whitespace-pre-wrap\">{message.content}</p>\n                        <div className={`flex items-center gap-1 mt-1 ${isOwn ? 'justify-end' : 'justify-start'}`}>\n                          <p className={`text-xs ${isOwn ? 'text-blue-100' : 'text-gray-500'}`}>\n                            {format(new Date(message.createdAt), 'h:mm a')}\n                          </p>\n                          {isOwn && (\n                            <div className=\"flex items-center\">\n                              {message.isRead ? (\n                                <span className=\"text-blue-300 text-xs ml-1 flex items-center gap-0.5\">\n                                  <svg className=\"w-3.5 h-3.5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                    <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                                    <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                                  </svg>\n                                  <span className=\"text-[10px]\">Seen</span>\n                                </span>\n                              ) : (\n                                <span className=\"text-gray-300 text-xs ml-1\">\n                                  <svg className=\"w-3.5 h-3.5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                    <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                                  </svg>\n                                </span>\n                              )}\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })}\n                <div ref={messagesEndRef} />\n              </div>\n\n              {/* Message Input */}\n              <div className=\"bg-white border-t border-gray-200 p-4\">\n                <form onSubmit={handleSendMessage} className=\"flex items-center gap-2\">\n                  <button\n                    type=\"button\"\n                    className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n                  >\n                    <FiPaperclip className=\"text-xl text-gray-600\" />\n                  </button>\n                  <input\n                    type=\"text\"\n                    value={newMessage}\n                    onChange={(e) => setNewMessage(e.target.value)}\n                    placeholder=\"Type a message...\"\n                    className=\"flex-1 px-4 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  />\n                  <button\n                    type=\"submit\"\n                    disabled={!newMessage.trim()}\n                    className=\"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    <FiSend className=\"text-xl\" />\n                  </button>\n                </form>\n              </div>\n            </>\n          ) : (\n            <div className=\"flex-1 flex items-center justify-center\">\n              <div className=\"text-center\">\n                <FiMessageCircle className=\"text-6xl text-gray-300 mx-auto mb-4\" />\n                <p className=\"text-gray-500 text-lg\">Select a conversation to start chatting</p>\n              </div>\n            </div>\n          )}\n        </div>\n      </main>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}