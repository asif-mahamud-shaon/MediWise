{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/components/Loading.tsx"],"sourcesContent":["const Loading = () => {\r\n  return (\r\n    <div className=\"flex items-center justify-center min-h-screen\">\r\n      <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-600\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loading;\r\n\r\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,UAAU;IACd,qBACE,4OAAC;QAAI,WAAU;kBACb,cAAA,4OAAC;YAAI,WAAU;;;;;;;;;;;AAGrB;KANM;uCAQS","debugId":null}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/app/doctor/patients/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport Loading from '@/components/Loading';\nimport api from '@/lib/api';\nimport { format, parseISO } from 'date-fns';\nimport { FiCalendar, FiMessageCircle, FiPhone, FiChevronRight, FiSearch, FiClock, FiUser, FiLogOut } from 'react-icons/fi';\n\nexport default function DoctorPatientsPage() {\n  const { user, loading: authLoading, logout } = useAuth();\n  const router = useRouter();\n  const [patients, setPatients] = useState<any[]>([]);\n  const [doctorProfile, setDoctorProfile] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (!authLoading && (!user || user.role !== 'doctor')) {\n      router.push('/login');\n    }\n  }, [user, authLoading, router]);\n\n  useEffect(() => {\n    if (user && user.role === 'doctor') {\n      fetchDoctorProfile();\n      fetchPatients();\n    }\n  }, [user]);\n\n  const fetchDoctorProfile = async () => {\n    try {\n      const response = await api.get('/doctors/profile/me');\n      setDoctorProfile(response.data.doctor);\n    } catch (error) {\n      console.error('Error fetching doctor profile:', error);\n    }\n  };\n\n  const fetchPatients = async () => {\n    try {\n      setLoading(true);\n      const response = await api.get('/appointments?limit=1000');\n      const appointments = response.data.appointments || [];\n      \n      // Get unique patients from appointments\n      const uniquePatients = new Map();\n      appointments.forEach((appt: any) => {\n        if (appt.patient && !uniquePatients.has(appt.patient.id)) {\n          uniquePatients.set(appt.patient.id, {\n            ...appt.patient,\n            lastAppointment: appt.appointmentDate,\n            totalAppointments: 1,\n          });\n        } else if (appt.patient) {\n          const patient = uniquePatients.get(appt.patient.id);\n          patient.totalAppointments += 1;\n          if (new Date(appt.appointmentDate) > new Date(patient.lastAppointment)) {\n            patient.lastAppointment = appt.appointmentDate;\n          }\n        }\n      });\n\n      setPatients(Array.from(uniquePatients.values()));\n    } catch (error) {\n      console.error('Error fetching patients:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getInitials = (name: string) => {\n    return name\n      .split(' ')\n      .map((n) => n[0])\n      .join('')\n      .toUpperCase()\n      .slice(0, 2);\n  };\n\n  if (authLoading || loading) {\n    return <Loading />;\n  }\n\n  if (!user || user.role !== 'doctor') {\n    return null;\n  }\n\n  return (\n    <div className=\"flex min-h-screen bg-gray-50\">\n      {/* Sidebar */}\n      <div className=\"fixed left-0 top-0 h-full w-72 bg-white shadow-lg z-10\">\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"flex flex-col items-center\">\n            {doctorProfile?.profileImage ? (\n              <img\n                src={`data:${doctorProfile.profileImageMimeType || 'image/jpeg'};base64,${doctorProfile.profileImage}`}\n                alt={user.name || 'Doctor'}\n                className=\"w-20 h-20 rounded-full object-cover mb-3\"\n              />\n            ) : (\n              <div className=\"w-20 h-20 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white text-2xl font-bold mb-3\">\n                {getInitials(user.name || 'D')}\n              </div>\n            )}\n            <h2 className=\"text-lg font-bold text-gray-800\">{doctorProfile?.user?.name || user.name}</h2>\n            <p className=\"text-sm text-gray-500 mt-1\">{doctorProfile?.specialization || 'Doctor'}</p>\n          </div>\n        </div>\n\n        <nav className=\"p-4 space-y-1\">\n          <Link\n            href=\"/appointments\"\n            className=\"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors\"\n          >\n            <FiCalendar className=\"text-xl\" />\n            <span>APPOINTMENTS</span>\n          </Link>\n          <Link\n            href=\"/doctor/patients\"\n            className=\"flex items-center gap-3 px-4 py-3 rounded-lg bg-blue-50 text-blue-600 font-medium border-l-4 border-blue-600\"\n          >\n            <FiUser className=\"text-xl\" />\n            <span>MY PATIENTS</span>\n          </Link>\n          <Link\n            href=\"/doctor/chat\"\n            className=\"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors\"\n          >\n            <FiMessageCircle className=\"text-xl\" />\n            <span>CHATS</span>\n          </Link>\n          <Link\n            href=\"/doctor/prescriptions\"\n            className=\"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors\"\n          >\n            <FiCalendar className=\"text-xl\" />\n            <span>PRESCRIPTIONS</span>\n          </Link>\n          <Link\n            href=\"/doctor/profile\"\n            className=\"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors\"\n          >\n            <FiCalendar className=\"text-xl\" />\n            <span>SETTINGS</span>\n          </Link>\n        </nav>\n\n        {/* Logout Button */}\n        <div className=\"absolute bottom-4 left-4 right-4\">\n          <button\n            onClick={() => {\n              if (confirm('Are you sure you want to logout?')) {\n                logout();\n              }\n            }}\n            className=\"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-red-600 hover:bg-red-50 transition-colors border border-red-200\"\n          >\n            <FiLogOut className=\"text-xl\" />\n            <span>LOGOUT</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <main className=\"ml-72 flex-1 p-8\">\n        <div className=\"flex justify-between items-start mb-8\">\n          <div>\n            <h1 className=\"text-4xl font-bold text-gray-800 uppercase tracking-tight\">My Patients</h1>\n            <p className=\"text-gray-600 mt-2\">\n              Total {patients.length} patient{patients.length !== 1 ? 's' : ''}\n            </p>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {patients.map((patient) => (\n            <div\n              key={patient.id}\n              className=\"bg-white rounded-xl shadow-sm p-5 hover:shadow-md transition-shadow border border-gray-100\"\n            >\n              <div className=\"flex items-center gap-4 mb-4\">\n                <div className=\"w-16 h-16 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white text-xl font-bold\">\n                  {getInitials(patient.name || 'P')}\n                </div>\n                <div className=\"flex-1\">\n                  <h3 className=\"text-lg font-semibold text-gray-800\">{patient.name}</h3>\n                  <p className=\"text-sm text-gray-500\">{patient.email}</p>\n                  {patient.phone && (\n                    <p className=\"text-sm text-gray-500\">{patient.phone}</p>\n                  )}\n                </div>\n              </div>\n              <div className=\"pt-4 border-t border-gray-100\">\n                <div className=\"flex justify-between text-sm text-gray-600 mb-2\">\n                  <span>Total Visits:</span>\n                  <span className=\"font-semibold\">{patient.totalAppointments || 0}</span>\n                </div>\n                {patient.lastAppointment && (\n                  <div className=\"flex justify-between text-sm text-gray-600\">\n                    <span>Last Visit:</span>\n                    <span className=\"font-semibold\">\n                      {format(parseISO(patient.lastAppointment), 'MMM dd, yyyy')}\n                    </span>\n                  </div>\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {patients.length === 0 && (\n          <div className=\"bg-white rounded-xl shadow-sm p-12 text-center\">\n            <p className=\"text-gray-500 text-lg\">No patients yet</p>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}