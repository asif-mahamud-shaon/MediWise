{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/components/Sidebar.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { useAuth } from '@/context/AuthContext';\nimport { \n  FiHome, \n  FiUser, \n  FiCalendar, \n  FiFileText, \n  FiUsers, \n  FiSettings,\n  FiLogOut,\n  FiMessageCircle\n} from 'react-icons/fi';\n\nconst Sidebar = () => {\n  const pathname = usePathname();\n  const { user, logout } = useAuth();\n\n      const patientMenu = [\n        { href: '/patient/dashboard', label: 'Dashboard', icon: FiHome },\n        { href: '/patient/doctors', label: 'Doctors', icon: FiUsers },\n        { href: '/patient/appointments', label: 'Appointments', icon: FiCalendar },\n        { href: '/patient/chat', label: 'Chats', icon: FiMessageCircle },\n        { href: '/patient/prescriptions', label: 'Prescriptions', icon: FiFileText },\n        { href: '/patient/profile', label: 'My Profile', icon: FiUser },\n      ];\n\n  const doctorMenu = [\n    { href: '/doctor/dashboard', label: 'Dashboard', icon: FiHome },\n    { href: '/doctor/appointments', label: 'Appointments', icon: FiCalendar },\n    { href: '/doctor/prescriptions', label: 'Prescriptions', icon: FiFileText },\n    { href: '/doctor/profile', label: 'Edit Profile', icon: FiUser },\n  ];\n\n  const adminMenu = [\n    { href: '/admin/dashboard', label: 'Dashboard', icon: FiHome },\n    { href: '/admin/doctors', label: 'Doctors', icon: FiUsers },\n    { href: '/admin/appointments', label: 'Appointments', icon: FiCalendar },\n    { href: '/admin/prescriptions', label: 'Prescriptions', icon: FiFileText },\n    { href: '/admin', label: 'Admin Panel', icon: FiSettings },\n  ];\n\n  const menu = user?.role === 'patient' ? patientMenu : \n               user?.role === 'doctor' ? doctorMenu : \n               adminMenu;\n\n  return (\n    <div className=\"fixed left-0 top-0 h-full w-64 bg-white shadow-lg z-10\">\n      <div className=\"p-6 border-b border-gray-200\">\n        <h1 className=\"text-2xl font-bold text-teal-600\">ü©∫ MediWise</h1>\n      </div>\n      <nav className=\"p-4 space-y-2\">\n        {menu.map((item) => {\n          const Icon = item.icon;\n          const isActive = pathname === item.href;\n          return (\n            <Link\n              key={item.href}\n              href={item.href}\n              className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${\n                isActive\n                  ? 'bg-teal-50 text-teal-600 font-medium'\n                  : 'text-gray-700 hover:bg-gray-50'\n              }`}\n            >\n              <Icon className=\"text-xl\" />\n              <span>{item.label}</span>\n            </Link>\n          );\n        })}\n      </nav>\n      <div className=\"absolute bottom-4 left-4 right-4\">\n        <div className=\"p-4 border-t border-gray-200\">\n          <div className=\"mb-3 px-4\">\n            <p className=\"text-sm font-medium text-gray-900\">{user?.name}</p>\n            <p className=\"text-xs text-gray-500 capitalize\">{user?.role}</p>\n          </div>\n          <button\n            onClick={logout}\n            className=\"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-red-600 hover:bg-red-50 transition-colors\"\n          >\n            <FiLogOut className=\"text-xl\" />\n            <span>Logout</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Sidebar;\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAgBA,MAAM,UAAU;;IACd,MAAM,WAAW,IAAA,mMAAW;IAC5B,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,IAAA,oLAAO;IAE5B,MAAM,cAAc;QAClB;YAAE,MAAM;YAAsB,OAAO;YAAa,MAAM,0MAAM;QAAC;QAC/D;YAAE,MAAM;YAAoB,OAAO;YAAW,MAAM,2MAAO;QAAC;QAC5D;YAAE,MAAM;YAAyB,OAAO;YAAgB,MAAM,8MAAU;QAAC;QACzE;YAAE,MAAM;YAAiB,OAAO;YAAS,MAAM,mNAAe;QAAC;QAC/D;YAAE,MAAM;YAA0B,OAAO;YAAiB,MAAM,8MAAU;QAAC;QAC3E;YAAE,MAAM;YAAoB,OAAO;YAAc,MAAM,0MAAM;QAAC;KAC/D;IAEL,MAAM,aAAa;QACjB;YAAE,MAAM;YAAqB,OAAO;YAAa,MAAM,0MAAM;QAAC;QAC9D;YAAE,MAAM;YAAwB,OAAO;YAAgB,MAAM,8MAAU;QAAC;QACxE;YAAE,MAAM;YAAyB,OAAO;YAAiB,MAAM,8MAAU;QAAC;QAC1E;YAAE,MAAM;YAAmB,OAAO;YAAgB,MAAM,0MAAM;QAAC;KAChE;IAED,MAAM,YAAY;QAChB;YAAE,MAAM;YAAoB,OAAO;YAAa,MAAM,0MAAM;QAAC;QAC7D;YAAE,MAAM;YAAkB,OAAO;YAAW,MAAM,2MAAO;QAAC;QAC1D;YAAE,MAAM;YAAuB,OAAO;YAAgB,MAAM,8MAAU;QAAC;QACvE;YAAE,MAAM;YAAwB,OAAO;YAAiB,MAAM,8MAAU;QAAC;QACzE;YAAE,MAAM;YAAU,OAAO;YAAe,MAAM,8MAAU;QAAC;KAC1D;IAED,MAAM,OAAO,MAAM,SAAS,YAAY,cAC3B,MAAM,SAAS,WAAW,aAC1B;IAEb,qBACE,4OAAC;QAAI,WAAU;;0BACb,4OAAC;gBAAI,WAAU;0BACb,cAAA,4OAAC;oBAAG,WAAU;8BAAmC;;;;;;;;;;;0BAEnD,4OAAC;gBAAI,WAAU;0BACZ,KAAK,GAAG,CAAC,CAAC;oBACT,MAAM,OAAO,KAAK,IAAI;oBACtB,MAAM,WAAW,aAAa,KAAK,IAAI;oBACvC,qBACE,4OAAC,yNAAI;wBAEH,MAAM,KAAK,IAAI;wBACf,WAAW,CAAC,+DAA+D,EACzE,WACI,yCACA,kCACJ;;0CAEF,4OAAC;gCAAK,WAAU;;;;;;0CAChB,4OAAC;0CAAM,KAAK,KAAK;;;;;;;uBATZ,KAAK,IAAI;;;;;gBAYpB;;;;;;0BAEF,4OAAC;gBAAI,WAAU;0BACb,cAAA,4OAAC;oBAAI,WAAU;;sCACb,4OAAC;4BAAI,WAAU;;8CACb,4OAAC;oCAAE,WAAU;8CAAqC,MAAM;;;;;;8CACxD,4OAAC;oCAAE,WAAU;8CAAoC,MAAM;;;;;;;;;;;;sCAEzD,4OAAC;4BACC,SAAS;4BACT,WAAU;;8CAEV,4OAAC,4MAAQ;oCAAC,WAAU;;;;;;8CACpB,4OAAC;8CAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMlB;GA1EM;;QACa,mMAAW;QACH,oLAAO;;;KAF5B;uCA4ES","debugId":null}},
    {"offset": {"line": 248, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/components/PatientSidebar.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { useAuth } from '@/context/AuthContext';\nimport { \n  FiChevronRight,\n  FiHome, \n  FiUser, \n  FiCalendar, \n  FiFileText, \n  FiUsers, \n  FiMessageCircle,\n  FiLogOut\n} from 'react-icons/fi';\nimport { useState } from 'react';\n\ninterface PatientSidebarProps {\n  user: any;\n  logout: () => void;\n}\n\nconst PatientSidebar = ({ user, logout }: PatientSidebarProps) => {\n  const pathname = usePathname();\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\n\n  const getInitials = (name: string) => {\n    return name\n      ?.split(' ')\n      ?.map((n: string) => n[0])\n      ?.join('')\n      ?.toUpperCase()\n      ?.slice(0, 2) || 'U';\n  };\n\n  const menu = [\n    { href: '/patient/dashboard', label: 'Dashboard', icon: FiHome },\n    { href: '/patient/doctors', label: 'Doctors', icon: FiUsers },\n    { href: '/patient/appointments', label: 'Appointments', icon: FiCalendar },\n    { href: '/patient/chat', label: 'Chats', icon: FiMessageCircle },\n    { href: '/patient/prescriptions', label: 'Prescriptions', icon: FiFileText },\n    { href: '/patient/profile', label: 'My Profile', icon: FiUser },\n  ];\n\n  return (\n    <div className={`${sidebarCollapsed ? 'w-16' : 'w-64'} bg-teal-600 text-white transition-all duration-300 fixed left-0 top-0 h-full z-20`}>\n      <div className=\"p-4\">\n        {/* Collapse/Expand Button */}\n        <button\n          onClick={() => setSidebarCollapsed(!sidebarCollapsed)}\n          className=\"w-full flex items-center justify-center p-2 hover:bg-teal-700 rounded-lg transition-colors mb-4\"\n        >\n          <FiChevronRight className={`text-xl transform transition-transform ${sidebarCollapsed ? '' : 'rotate-180'}`} />\n        </button>\n\n        {/* Medical Symbol / Logo */}\n        {!sidebarCollapsed && (\n          <div className=\"flex items-center justify-center mb-6\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-2xl\">ü©∫</span>\n              <span className=\"text-xl font-bold\">MediWise</span>\n            </div>\n          </div>\n        )}\n\n        {/* Patient Profile Section */}\n        {!sidebarCollapsed && (\n          <div className=\"mb-6 pb-6 border-b border-teal-500\">\n            <div className=\"flex items-center gap-3 mb-3\">\n              <div className=\"w-10 h-10 rounded-full bg-white bg-opacity-20 flex items-center justify-center text-sm font-semibold\">\n                {getInitials(user?.name || 'P')}\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-semibold truncate\">{user?.name}</p>\n                <p className=\"text-xs text-teal-200 capitalize\">Patient</p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Navigation Links */}\n        <nav className=\"space-y-1\">\n          {menu.map((item) => {\n            const Icon = item.icon;\n            const isActive = pathname === item.href;\n            return (\n              <Link\n                key={item.href}\n                href={item.href}\n                className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${\n                  isActive\n                    ? 'bg-teal-700 text-white font-semibold'\n                    : 'text-teal-100 hover:bg-teal-700 hover:text-white'\n                }`}\n              >\n                <Icon className=\"text-xl flex-shrink-0\" />\n                {!sidebarCollapsed && <span className=\"text-sm\">{item.label}</span>}\n              </Link>\n            );\n          })}\n        </nav>\n\n        {/* Logout Button */}\n        {!sidebarCollapsed && (\n          <div className=\"absolute bottom-4 left-4 right-4\">\n            <button \n              onClick={logout}\n              className=\"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-teal-100 hover:bg-teal-700 transition-colors\"\n            >\n              <FiLogOut className=\"text-xl\" />\n              <span className=\"text-sm\">LOGOUT</span>\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default PatientSidebar;\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AAUA;;;AAfA;;;;;AAsBA,MAAM,iBAAiB,CAAC,EAAE,IAAI,EAAE,MAAM,EAAuB;;IAC3D,MAAM,WAAW,IAAA,mMAAW;IAC5B,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,wNAAQ,EAAC;IAEzD,MAAM,cAAc,CAAC;QACnB,OAAO,MACH,MAAM,MACN,IAAI,CAAC,IAAc,CAAC,CAAC,EAAE,GACvB,KAAK,KACL,eACA,MAAM,GAAG,MAAM;IACrB;IAEA,MAAM,OAAO;QACX;YAAE,MAAM;YAAsB,OAAO;YAAa,MAAM,0MAAM;QAAC;QAC/D;YAAE,MAAM;YAAoB,OAAO;YAAW,MAAM,2MAAO;QAAC;QAC5D;YAAE,MAAM;YAAyB,OAAO;YAAgB,MAAM,8MAAU;QAAC;QACzE;YAAE,MAAM;YAAiB,OAAO;YAAS,MAAM,mNAAe;QAAC;QAC/D;YAAE,MAAM;YAA0B,OAAO;YAAiB,MAAM,8MAAU;QAAC;QAC3E;YAAE,MAAM;YAAoB,OAAO;YAAc,MAAM,0MAAM;QAAC;KAC/D;IAED,qBACE,4OAAC;QAAI,WAAW,GAAG,mBAAmB,SAAS,OAAO,kFAAkF,CAAC;kBACvI,cAAA,4OAAC;YAAI,WAAU;;8BAEb,4OAAC;oBACC,SAAS,IAAM,oBAAoB,CAAC;oBACpC,WAAU;8BAEV,cAAA,4OAAC,kNAAc;wBAAC,WAAW,CAAC,uCAAuC,EAAE,mBAAmB,KAAK,cAAc;;;;;;;;;;;gBAI5G,CAAC,kCACA,4OAAC;oBAAI,WAAU;8BACb,cAAA,4OAAC;wBAAI,WAAU;;0CACb,4OAAC;gCAAK,WAAU;0CAAW;;;;;;0CAC3B,4OAAC;gCAAK,WAAU;0CAAoB;;;;;;;;;;;;;;;;;gBAMzC,CAAC,kCACA,4OAAC;oBAAI,WAAU;8BACb,cAAA,4OAAC;wBAAI,WAAU;;0CACb,4OAAC;gCAAI,WAAU;0CACZ,YAAY,MAAM,QAAQ;;;;;;0CAE7B,4OAAC;gCAAI,WAAU;;kDACb,4OAAC;wCAAE,WAAU;kDAAkC,MAAM;;;;;;kDACrD,4OAAC;wCAAE,WAAU;kDAAmC;;;;;;;;;;;;;;;;;;;;;;;8BAOxD,4OAAC;oBAAI,WAAU;8BACZ,KAAK,GAAG,CAAC,CAAC;wBACT,MAAM,OAAO,KAAK,IAAI;wBACtB,MAAM,WAAW,aAAa,KAAK,IAAI;wBACvC,qBACE,4OAAC,yNAAI;4BAEH,MAAM,KAAK,IAAI;4BACf,WAAW,CAAC,+DAA+D,EACzE,WACI,yCACA,oDACJ;;8CAEF,4OAAC;oCAAK,WAAU;;;;;;gCACf,CAAC,kCAAoB,4OAAC;oCAAK,WAAU;8CAAW,KAAK,KAAK;;;;;;;2BATtD,KAAK,IAAI;;;;;oBAYpB;;;;;;gBAID,CAAC,kCACA,4OAAC;oBAAI,WAAU;8BACb,cAAA,4OAAC;wBACC,SAAS;wBACT,WAAU;;0CAEV,4OAAC,4MAAQ;gCAAC,WAAU;;;;;;0CACpB,4OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOxC;GA/FM;;QACa,mMAAW;;;KADxB;uCAiGS","debugId":null}},
    {"offset": {"line": 500, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/components/Loading.tsx"],"sourcesContent":["const Loading = () => {\r\n  return (\r\n    <div className=\"flex items-center justify-center min-h-screen\">\r\n      <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-600\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loading;\r\n\r\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,UAAU;IACd,qBACE,4OAAC;QAAI,WAAU;kBACb,cAAA,4OAAC;YAAI,WAAU;;;;;;;;;;;AAGrB;KANM;uCAQS","debugId":null}},
    {"offset": {"line": 533, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asif%20Mahamud%20Shaon/OneDrive/Desktop/mediwise/frontend/app/appointments/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useNotification } from '@/context/NotificationContext';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport Sidebar from '@/components/Sidebar';\nimport PatientSidebar from '@/components/PatientSidebar';\nimport Loading from '@/components/Loading';\nimport api from '@/lib/api';\nimport { format, addDays, subDays, parseISO } from 'date-fns';\nimport { FiCalendar, FiMessageCircle, FiPhone, FiChevronRight, FiSearch, FiClock, FiLogOut, FiX, FiBell } from 'react-icons/fi';\n\nexport default function AppointmentsPage() {\n  const { user, loading: authLoading, logout } = useAuth();\n  const { showNotification } = useNotification();\n  const router = useRouter();\n  const [appointments, setAppointments] = useState<any[]>([]);\n  const [doctorProfile, setDoctorProfile] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n  const [selectedDate, setSelectedDate] = useState(new Date());\n  const [currentTime, setCurrentTime] = useState(new Date());\n  const [selectedAppointment, setSelectedAppointment] = useState<any>(null);\n  const [patientPrescriptions, setPatientPrescriptions] = useState<any[]>([]);\n  const [loadingPatientDetails, setLoadingPatientDetails] = useState(false);\n  const [showPrescriptionModal, setShowPrescriptionModal] = useState(false);\n  const [prescriptionForm, setPrescriptionForm] = useState({\n    patientEmail: '',\n    diagnosis: '',\n    medicines: '',\n    tests: '',\n    rules: '',\n    instructions: '',\n  });\n\n  // Update current time every minute\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setCurrentTime(new Date());\n    }, 1000);\n    return () => clearInterval(timer);\n  }, []);\n\n  useEffect(() => {\n    if (!authLoading && !user) {\n      router.push('/login');\n    }\n  }, [user, authLoading, router]);\n\n  useEffect(() => {\n    if (user) {\n      if (user.role === 'doctor') {\n        fetchDoctorProfile();\n      } else {\n        fetchAppointments();\n      }\n    }\n  }, [user]);\n\n  useEffect(() => {\n    if (user && (user.role !== 'doctor' || doctorProfile)) {\n      fetchAppointments();\n    }\n  }, [selectedDate, doctorProfile]);\n\n  const fetchDoctorProfile = async () => {\n    try {\n      const response = await api.get('/doctors/profile/me');\n      setDoctorProfile(response.data.doctor);\n    } catch (error) {\n      console.error('Error fetching doctor profile:', error);\n    }\n  };\n\n  const fetchAppointments = async () => {\n    try {\n      setLoading(true);\n      const dateStr = format(selectedDate, 'yyyy-MM-dd');\n      const params: any = { limit: 100 };\n      if (user?.role === 'doctor') {\n        params.doctorId = doctorProfile?.id;\n      }\n      \n      const response = await api.get('/appointments', { params });\n      const allAppointments = response.data.appointments || [];\n      \n      // Filter appointments for selected date\n      const filteredAppointments = allAppointments.filter((appt: any) => {\n        const apptDate = format(parseISO(appt.appointmentDate), 'yyyy-MM-dd');\n        return apptDate === dateStr && appt.status !== 'cancelled';\n      });\n\n      // Sort by time\n      filteredAppointments.sort((a: any, b: any) => {\n        const timeA = a.appointmentTime || '00:00';\n        const timeB = b.appointmentTime || '00:00';\n        return timeA.localeCompare(timeB);\n      });\n\n      setAppointments(filteredAppointments);\n    } catch (error) {\n      console.error('Error fetching appointments:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Group appointments by time slots for better visualization\n  const groupAppointmentsByTime = () => {\n    const grouped: { [key: string]: any[] } = {};\n    appointments.forEach((appt) => {\n      const time = appt.appointmentTime || '00:00';\n      if (!grouped[time]) {\n        grouped[time] = [];\n      }\n      grouped[time].push(appt);\n    });\n    return grouped;\n  };\n\n  const groupedAppointments = groupAppointmentsByTime();\n  const sortedTimes = Object.keys(groupedAppointments).sort();\n\n  // Get patient initials for avatar\n  const getInitials = (name: string) => {\n    return name\n      .split(' ')\n      .map((n) => n[0])\n      .join('')\n      .toUpperCase()\n      .slice(0, 2);\n  };\n\n  // Get patient age from dateOfBirth\n  const getPatientAge = (patient: any) => {\n    if (!patient?.dateOfBirth) return 'N/A';\n    const birthDate = new Date(patient.dateOfBirth);\n    const today = new Date();\n    let age = today.getFullYear() - birthDate.getFullYear();\n    const monthDiff = today.getMonth() - birthDate.getMonth();\n    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {\n      age--;\n    }\n    return age;\n  };\n\n  const handleAppointmentClick = async (appt: any) => {\n    setSelectedAppointment(appt);\n    setLoadingPatientDetails(true);\n    try {\n      // Fetch patient prescriptions\n      const response = await api.get(`/prescriptions?patientId=${appt.patientId}`);\n      setPatientPrescriptions(response.data.prescriptions || []);\n    } catch (error) {\n      console.error('Error fetching patient prescriptions:', error);\n      setPatientPrescriptions([]);\n    } finally {\n      setLoadingPatientDetails(false);\n    }\n  };\n\n  const calculateAge = (dateOfBirth: string) => {\n    if (!dateOfBirth) return { years: 0, months: 0 };\n    const birthDate = new Date(dateOfBirth);\n    const today = new Date();\n    let years = today.getFullYear() - birthDate.getFullYear();\n    let months = today.getMonth() - birthDate.getMonth();\n    \n    if (months < 0) {\n      years--;\n      months += 12;\n    }\n    if (today.getDate() < birthDate.getDate()) {\n      months--;\n      if (months < 0) {\n        years--;\n        months += 11;\n      }\n    }\n    return { years, months };\n  };\n\n  const formatDateOfBirth = (dob: string) => {\n    if (!dob) return 'N/A';\n    const date = new Date(dob);\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    const year = date.getFullYear();\n    return `${month}/${day}/${year}`;\n  };\n\n  const formatTime = (date: Date) => {\n    return format(date, 'h:mm a');\n  };\n\n  const formatDateDisplay = (date: Date) => {\n    return {\n      day: format(date, 'EEEE'),\n      date: format(date, 'd MMM'),\n      year: format(date, 'yyyy'),\n    };\n  };\n\n  const handleCreatePrescription = async () => {\n    try {\n      const medicinesArray = prescriptionForm.medicines\n        .split('\\n')\n        .map((m) => m.trim())\n        .filter((m) => m.length > 0)\n        .map((m) => {\n          const parts = m.split('-').map((p) => p.trim());\n          return {\n            name: parts[0] || m,\n            dosage: parts[1] || '',\n            frequency: parts[2] || '',\n          };\n        });\n\n      const testsArray = prescriptionForm.tests\n        .split('\\n')\n        .map((t) => t.trim())\n        .filter((t) => t.length > 0)\n        .map((t) => ({ name: t, description: '' }));\n\n      const rulesArray = prescriptionForm.rules\n        .split('\\n')\n        .map((r) => r.trim())\n        .filter((r) => r.length > 0)\n        .map((r) => ({ title: r, description: '' }));\n\n      await api.post('/prescriptions', {\n        patientEmail: prescriptionForm.patientEmail,\n        diagnosis: prescriptionForm.diagnosis,\n        medicines: medicinesArray,\n        tests: testsArray,\n        rules: rulesArray,\n        instructions: prescriptionForm.instructions,\n      });\n\n        showNotification('Prescription created successfully!', 'success');\n        setShowPrescriptionModal(false);\n        setPrescriptionForm({ patientEmail: '', diagnosis: '', medicines: '', tests: '', rules: '', instructions: '' });\n        \n        // Refresh patient prescriptions if modal is shown\n        if (selectedAppointment) {\n          const response = await api.get(`/prescriptions?patientId=${selectedAppointment.patientId}`);\n          setPatientPrescriptions(response.data.prescriptions || []);\n        }\n      } catch (error: any) {\n        console.error('Error creating prescription:', error);\n        showNotification(error.response?.data?.message || 'Failed to create prescription', 'error');\n      }\n  };\n\n  const dateDisplay = formatDateDisplay(selectedDate);\n\n  const navigateDate = (direction: 'prev' | 'next') => {\n    setSelectedDate(direction === 'next' ? addDays(selectedDate, 1) : subDays(selectedDate, 1));\n  };\n\n  if (authLoading || loading) {\n    return <Loading />;\n  }\n\n  if (!user) {\n    return null;\n  }\n\n  // Doctor-specific view with modern design\n  if (user.role === 'doctor') {\n    return (\n      <div className=\"flex min-h-screen bg-gray-50\">\n        {/* Enhanced Sidebar with Doctor Profile */}\n        <div className=\"fixed left-0 top-0 h-full w-72 bg-white shadow-lg z-10\">\n          {/* Doctor Profile Section */}\n          <div className=\"p-6 border-b border-gray-200\">\n            <div className=\"flex flex-col items-center\">\n              {doctorProfile?.profileImage ? (\n                <img\n                  src={`data:${doctorProfile.profileImageMimeType || 'image/jpeg'};base64,${doctorProfile.profileImage}`}\n                  alt={user.name || 'Doctor'}\n                  className=\"w-20 h-20 rounded-full object-cover mb-3 border-2 border-gray-200\"\n                />\n              ) : (\n                <div className=\"w-20 h-20 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white text-2xl font-bold mb-3\">\n                  {getInitials(user.name || 'D')}\n                </div>\n              )}\n              <h2 className=\"text-lg font-bold text-gray-800\">{doctorProfile?.user?.name || user.name}</h2>\n              <p className=\"text-sm text-gray-500 mt-1\">{doctorProfile?.specialization || 'Doctor'}</p>\n            </div>\n          </div>\n\n          {/* Date Navigation */}\n          <div className=\"p-6 border-b border-gray-200\">\n            <div className=\"text-center\">\n              <p className=\"text-xs text-gray-500 uppercase tracking-wide\">{dateDisplay.day}</p>\n              <p className=\"text-3xl font-bold text-gray-800 mt-1\">{dateDisplay.date.split(' ')[0]}</p>\n              <p className=\"text-xs text-gray-500 mt-1\">{dateDisplay.date.split(' ')[1]} {dateDisplay.year}</p>\n              <div className=\"flex items-center justify-center mt-3 gap-2\">\n                <button\n                  onClick={() => navigateDate('prev')}\n                  className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n                >\n                  <FiChevronRight className=\"rotate-180 text-gray-600\" />\n                </button>\n                <button\n                  onClick={() => setSelectedDate(new Date())}\n                  className=\"px-3 py-1 text-xs text-teal-600 hover:bg-teal-50 rounded\"\n                >\n                  Today\n                </button>\n                <button\n                  onClick={() => navigateDate('next')}\n                  className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n                >\n                  <FiChevronRight className=\"text-gray-600\" />\n                </button>\n              </div>\n            </div>\n          </div>\n\n          {/* Navigation Menu */}\n          <nav className=\"p-4 space-y-1\">\n            <Link\n              href=\"/appointments\"\n              className=\"flex items-center gap-3 px-4 py-3 rounded-lg bg-blue-50 text-blue-600 font-medium border-l-4 border-blue-600\"\n            >\n              <FiCalendar className=\"text-xl\" />\n              <span>APPOINTMENTS</span>\n            </Link>\n            <Link\n              href=\"/doctor/patients\"\n              className=\"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors\"\n            >\n              <FiMessageCircle className=\"text-xl\" />\n              <span>MY PATIENTS</span>\n            </Link>\n            <Link\n              href=\"/doctor/chat\"\n              className=\"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors\"\n            >\n              <FiMessageCircle className=\"text-xl\" />\n              <span>CHATS</span>\n            </Link>\n            <Link\n              href=\"/doctor/prescriptions\"\n              className=\"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors\"\n            >\n              <FiCalendar className=\"text-xl\" />\n              <span>PRESCRIPTIONS</span>\n            </Link>\n            <Link\n              href=\"/doctor/profile\"\n              className=\"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors\"\n            >\n              <FiCalendar className=\"text-xl\" />\n              <span>SETTINGS</span>\n            </Link>\n          </nav>\n\n          {/* Logout Button */}\n          <div className=\"absolute bottom-4 left-4 right-4\">\n            <button\n              onClick={() => {\n                if (confirm('Are you sure you want to logout?')) {\n                  logout();\n                }\n              }}\n              className=\"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-red-600 hover:bg-red-50 transition-colors border border-red-200\"\n            >\n              <FiLogOut className=\"text-xl\" />\n              <span>LOGOUT</span>\n            </button>\n          </div>\n        </div>\n\n        {/* Main Content */}\n        <main className=\"ml-72 flex-1 p-8\">\n          {/* Header */}\n          <div className=\"flex justify-between items-start mb-8\">\n            <div>\n              <h1 className=\"text-4xl font-bold text-gray-800 uppercase tracking-tight\">Appointments</h1>\n              <p className=\"text-gray-600 mt-2\">\n                You have {appointments.length} appointment{appointments.length !== 1 ? 's' : ''} {format(selectedDate, 'EEEE')}\n              </p>\n            </div>\n            <div className=\"text-right\">\n              <div className=\"flex items-center gap-4 mb-2\">\n                <button className=\"p-2 hover:bg-gray-100 rounded-lg\">\n                  <FiSearch className=\"text-xl text-gray-600\" />\n                </button>\n                <button className=\"relative p-2 hover:bg-gray-100 rounded-lg\">\n                  <FiMessageCircle className=\"text-xl text-gray-600\" />\n                  <span className=\"absolute top-0 right-0 w-5 h-5 bg-blue-600 text-white text-xs rounded-full flex items-center justify-center\">\n                    2\n                  </span>\n                </button>\n                <button className=\"relative p-2 hover:bg-gray-100 rounded-lg\">\n                  <FiPhone className=\"text-xl text-gray-600\" />\n                  <span className=\"absolute top-0 right-0 w-5 h-5 bg-blue-600 text-white text-xs rounded-full flex items-center justify-center\">\n                    1\n                  </span>\n                </button>\n              </div>\n              <div className=\"text-3xl font-bold text-gray-800 flex items-center gap-2\">\n                <FiClock className=\"text-blue-600\" />\n                {formatTime(currentTime)}\n              </div>\n            </div>\n          </div>\n\n          {/* Appointments Grid */}\n          {appointments.length === 0 ? (\n            <div className=\"bg-white rounded-xl shadow-sm p-12 text-center\">\n              <p className=\"text-gray-500 text-lg\">No appointments scheduled for this date</p>\n            </div>\n          ) : (\n            <div className=\"space-y-6\">\n              {sortedTimes.map((time, timeIndex) => (\n                <div key={time}>\n                  {/* Time Marker */}\n                  <div className=\"flex items-center mb-4\">\n                    <span className=\"text-sm font-medium text-gray-500 bg-gray-100 px-3 py-1 rounded\">\n                      {time}\n                    </span>\n                    <div className=\"flex-1 h-px bg-gray-200 ml-4\"></div>\n                  </div>\n\n                  {/* Appointment Cards for this time */}\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                    {groupedAppointments[time].map((appt) => (\n                      <div\n                        key={appt.id}\n                        onClick={() => handleAppointmentClick(appt)}\n                        className=\"bg-white rounded-xl shadow-sm p-5 hover:shadow-md transition-all border border-gray-100 cursor-pointer\"\n                      >\n                        <div className=\"flex items-start justify-between mb-4\">\n                          <div className=\"flex-1\">\n                            <h3 className=\"text-lg font-semibold text-gray-800\">\n                              {appt.patient?.name || 'Patient'}\n                            </h3>\n                            <p className=\"text-sm text-gray-500 mt-1\">\n                              {getPatientAge(appt.patient)} years\n                            </p>\n                            <p className=\"text-sm text-gray-700 mt-2 font-medium\">\n                              {appt.reason || 'General Consultation'}\n                            </p>\n                          </div>\n                          <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white font-semibold ml-3\">\n                            {getInitials(appt.patient?.name || 'P')}\n                          </div>\n                        </div>\n                        <div className=\"flex gap-2 pt-3 border-t border-gray-100\">\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              router.push('/doctor/chat');\n                            }}\n                            className=\"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors text-sm font-medium\"\n                          >\n                            <FiMessageCircle />\n                            Chat\n                          </button>\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              if (appt.patient?.phone) {\n                                window.location.href = `tel:${appt.patient.phone}`;\n                              }\n                            }}\n                            className=\"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors text-sm font-medium\"\n                          >\n                            <FiPhone />\n                            Call\n                          </button>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {/* Patient Detail Modal */}\n          {selectedAppointment && (\n            <div\n              className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n              onClick={(e) => {\n                if (e.target === e.currentTarget) {\n                  setSelectedAppointment(null);\n                  setPatientPrescriptions([]);\n                }\n              }}\n            >\n              <div className=\"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col\">\n                {loadingPatientDetails ? (\n                  <div className=\"flex items-center justify-center p-12\">\n                    <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600\"></div>\n                  </div>\n                ) : (\n                  <>\n                    {/* Modal Header */}\n                    <div className=\"p-6 border-b border-gray-200 bg-gradient-to-r from-teal-50 to-indigo-50\">\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex items-center gap-4\">\n                          <div className=\"w-20 h-20 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white text-2xl font-bold\">\n                            {getInitials(selectedAppointment.patient?.name || 'P')}\n                          </div>\n                          <div>\n                            <h2 className=\"text-2xl font-bold text-gray-800 uppercase\">\n                              {selectedAppointment.patient?.name || 'Patient'}\n                            </h2>\n                            <div className=\"flex items-center gap-4 mt-2 text-sm text-gray-600\">\n                              <span>\n                                <span className=\"font-semibold\">DOB:</span> {formatDateOfBirth(selectedAppointment.patient?.dateOfBirth)}\n                              </span>\n                              {selectedAppointment.patient?.dateOfBirth && (\n                                <span>\n                                  <span className=\"font-semibold\">AGE:</span> {calculateAge(selectedAppointment.patient.dateOfBirth).years} years {calculateAge(selectedAppointment.patient.dateOfBirth).months} months\n                                </span>\n                              )}\n                            </div>\n                          </div>\n                        </div>\n                        <button\n                          onClick={() => {\n                            setSelectedAppointment(null);\n                            setPatientPrescriptions([]);\n                          }}\n                          className=\"p-2 hover:bg-gray-200 rounded-lg transition-colors\"\n                        >\n                          <FiX className=\"text-xl text-gray-600\" />\n                        </button>\n                      </div>\n                    </div>\n\n                    {/* Modal Body - Scrollable */}\n                    <div className=\"flex-1 overflow-y-auto p-6 space-y-6\">\n                      {/* Contact & Address */}\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                        <div>\n                          <h3 className=\"text-sm font-semibold text-gray-500 uppercase mb-2\">Contact</h3>\n                          <p className=\"text-gray-800\">{selectedAppointment.patient?.email || 'N/A'}</p>\n                          <p className=\"text-gray-800\">{selectedAppointment.patient?.phone || 'N/A'}</p>\n                        </div>\n                        <div>\n                          <h3 className=\"text-sm font-semibold text-gray-500 uppercase mb-2\">Address</h3>\n                          <p className=\"text-gray-800\">{selectedAppointment.patient?.address || 'No address provided'}</p>\n                        </div>\n                      </div>\n\n                      {/* Appointment Agenda */}\n                      <div>\n                        <h3 className=\"text-sm font-semibold text-gray-500 uppercase mb-2\">Appointment Agenda:</h3>\n                        <p className=\"text-gray-800 text-lg\">{selectedAppointment.reason || 'General Consultation'}</p>\n                        <p className=\"text-sm text-gray-600 mt-1\">\n                          {format(parseISO(selectedAppointment.appointmentDate), 'EEEE, MMMM dd, yyyy')} at {selectedAppointment.appointmentTime}\n                        </p>\n                      </div>\n\n                      {/* Prescribed Drugs */}\n                      {patientPrescriptions.length > 0 && (\n                        <div>\n                          <h3 className=\"text-sm font-semibold text-gray-500 uppercase mb-3\">Prescribed Drugs:</h3>\n                          <ul className=\"space-y-2\">\n                            {patientPrescriptions\n                              .flatMap((prescription: any) => prescription.medicines || [])\n                              .filter((med: any, index: number, self: any[]) => \n                                self.findIndex((m: any) => (typeof med === 'string' ? med : med.name) === (typeof m === 'string' ? m : m.name)) === index\n                              )\n                              .map((med: any, idx: number) => (\n                                <li key={idx} className=\"flex items-start gap-2 text-gray-800\">\n                                  <span className=\"text-teal-600 mt-1\">‚Ä¢</span>\n                                  <span>\n                                    <span className=\"font-semibold\">{typeof med === 'string' ? med : med.name || med}</span>\n                                    {typeof med === 'object' && med.dosage && (\n                                      <span className=\"text-gray-600\"> - {med.dosage}</span>\n                                    )}\n                                    {typeof med === 'object' && med.frequency && (\n                                      <span className=\"text-gray-600\"> ({med.frequency})</span>\n                                    )}\n                                  </span>\n                                </li>\n                              ))}\n                          </ul>\n                        </div>\n                      )}\n\n                      {/* Medical Notes from Latest Prescription */}\n                      {patientPrescriptions.length > 0 && patientPrescriptions[0].instructions && (\n                        <div>\n                          <h3 className=\"text-sm font-semibold text-gray-500 uppercase mb-2\">Notes:</h3>\n                          <p className=\"text-gray-800 whitespace-pre-line leading-relaxed\">\n                            {patientPrescriptions[0].instructions}\n                          </p>\n                        </div>\n                      )}\n\n                      {/* Diagnosis from Latest Prescription */}\n                      {patientPrescriptions.length > 0 && patientPrescriptions[0].diagnosis && (\n                        <div>\n                          <h3 className=\"text-sm font-semibold text-gray-500 uppercase mb-2\">Recent Diagnosis:</h3>\n                          <p className=\"text-gray-800\">{patientPrescriptions[0].diagnosis}</p>\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Modal Footer - Action Buttons */}\n                    <div className=\"p-6 border-t border-gray-200 bg-gray-50 flex gap-4\">\n                      <button\n                        onClick={() => {\n                          router.push('/doctor/chat');\n                        }}\n                        className=\"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors font-medium\"\n                      >\n                        <FiMessageCircle className=\"text-xl\" />\n                        Chat\n                      </button>\n                      <button\n                        onClick={() => {\n                          if (selectedAppointment.patient?.phone) {\n                            window.location.href = `tel:${selectedAppointment.patient.phone}`;\n                          }\n                        }}\n                        className=\"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors font-medium\"\n                      >\n                        <FiPhone className=\"text-xl\" />\n                        Call\n                      </button>\n                          <button\n                            onClick={() => {\n                              setPrescriptionForm({\n                                patientEmail: selectedAppointment.patient?.email || '',\n                                diagnosis: patientPrescriptions.length > 0 ? patientPrescriptions[0].diagnosis || '' : '',\n                                medicines: '',\n                                tests: '',\n                                rules: '',\n                                instructions: '',\n                              });\n                              setShowPrescriptionModal(true);\n                            }}\n                            className=\"flex-1 px-6 py-3 bg-gradient-to-r from-teal-600 to-indigo-600 text-white rounded-lg hover:from-teal-700 hover:to-indigo-700 transition-all font-medium shadow-md\"\n                          >\n                            New Prescription\n                          </button>\n                    </div>\n                  </>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Prescription Modal - Higher z-index to appear over patient info modal */}\n          {showPrescriptionModal && (\n            <div \n              className=\"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[60] p-4\"\n              onClick={(e) => {\n                if (e.target === e.currentTarget) {\n                  setShowPrescriptionModal(false);\n                }\n              }}\n            >\n              <div className=\"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col\">\n                {/* Modal Header */}\n                <div className=\"p-6 border-b border-gray-200 bg-gradient-to-r from-teal-50 to-indigo-50 flex items-center justify-between\">\n                  <div>\n                    <h2 className=\"text-2xl font-bold text-gray-800\">Create New Prescription</h2>\n                    <p className=\"text-sm text-gray-600 mt-1\">Fill in all the details for the patient's prescription</p>\n                  </div>\n                  <button\n                    onClick={() => setShowPrescriptionModal(false)}\n                    className=\"p-2 hover:bg-gray-200 rounded-lg transition-colors\"\n                  >\n                    <FiX className=\"text-xl text-gray-600\" />\n                  </button>\n                </div>\n\n                {/* Modal Body - Scrollable */}\n                <div className=\"overflow-y-auto flex-1 p-6\">\n                  <form onSubmit={(e) => {\n                    e.preventDefault();\n                    handleCreatePrescription();\n                  }} className=\"space-y-5\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Patient Email <span className=\"text-red-500\">*</span>\n                      </label>\n                      <input\n                        type=\"email\"\n                        value={prescriptionForm.patientEmail}\n                        onChange={(e) => setPrescriptionForm({ ...prescriptionForm, patientEmail: e.target.value })}\n                        required\n                        className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500\"\n                        placeholder=\"patient@example.com\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Diagnosis\n                      </label>\n                      <textarea\n                        value={prescriptionForm.diagnosis}\n                        onChange={(e) => setPrescriptionForm({ ...prescriptionForm, diagnosis: e.target.value })}\n                        rows={3}\n                        className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500\"\n                        placeholder=\"Enter the diagnosis...\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        üíä Medicines <span className=\"text-xs text-gray-500 font-normal\">(one per line, format: Name - Dosage - Frequency)</span>\n                      </label>\n                      <textarea\n                        value={prescriptionForm.medicines}\n                        onChange={(e) => setPrescriptionForm({ ...prescriptionForm, medicines: e.target.value })}\n                        rows={5}\n                        className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 font-mono text-sm\"\n                        placeholder=\"Paracetamol - 500mg - 2 times daily&#10;Amoxicillin - 250mg - 3 times daily&#10;Vitamin D - 1000IU - Once daily\"\n                      />\n                      <p className=\"text-xs text-gray-500 mt-1\">\n                        Example: Medicine Name - Dosage - Frequency (one per line)\n                      </p>\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        üî¨ Tests / Lab Tests <span className=\"text-xs text-gray-500 font-normal\">(one per line)</span>\n                      </label>\n                      <textarea\n                        value={prescriptionForm.tests}\n                        onChange={(e) => setPrescriptionForm({ ...prescriptionForm, tests: e.target.value })}\n                        rows={4}\n                        className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500\"\n                        placeholder=\"Blood Test&#10;Chest X-Ray&#10;ECG&#10;Urine Analysis\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        üìã Rules & Guidelines <span className=\"text-xs text-gray-500 font-normal\">(one per line)</span>\n                      </label>\n                      <textarea\n                        value={prescriptionForm.rules}\n                        onChange={(e) => setPrescriptionForm({ ...prescriptionForm, rules: e.target.value })}\n                        rows={4}\n                        className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500\"\n                        placeholder=\"Avoid spicy food&#10;Take rest for 3 days&#10;Drink plenty of water&#10;Avoid alcohol\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        üìù Additional Instructions\n                      </label>\n                      <textarea\n                        value={prescriptionForm.instructions}\n                        onChange={(e) => setPrescriptionForm({ ...prescriptionForm, instructions: e.target.value })}\n                        rows={4}\n                        className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500\"\n                        placeholder=\"Enter any additional instructions for the patient...\"\n                      />\n                    </div>\n                  </form>\n                </div>\n\n                {/* Modal Footer */}\n                <div className=\"p-6 border-t border-gray-200 bg-gray-50 flex gap-4\">\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      setShowPrescriptionModal(false);\n                      setPrescriptionForm({ patientEmail: '', diagnosis: '', medicines: '', tests: '', rules: '', instructions: '' });\n                    }}\n                    className=\"flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg hover:bg-gray-100 font-medium text-gray-700 transition-colors\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={handleCreatePrescription}\n                    className=\"flex-1 px-4 py-3 bg-gradient-to-r from-teal-600 to-indigo-600 text-white rounded-lg hover:from-teal-700 hover:to-indigo-700 font-medium transition-all shadow-md hover:shadow-lg\"\n                  >\n                    Create Prescription\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n        </main>\n      </div>\n    );\n  }\n\n  // Patient view with new design\n  if (user.role === 'patient') {\n    return (\n      <div className=\"flex min-h-screen bg-gray-50\">\n        <PatientSidebar user={user} logout={logout} />\n        <main className=\"ml-64 flex-1 transition-all duration-300\">\n          {/* Header */}\n          <header className=\"bg-white border-b border-gray-200 px-8 py-4 flex items-center justify-between\">\n            <h1 className=\"text-2xl font-bold text-gray-800 uppercase tracking-wide\">MY APPOINTMENTS</h1>\n            <div className=\"flex items-center gap-4\">\n              <button className=\"relative p-2 hover:bg-gray-100 rounded-lg transition-colors\">\n                <FiSearch className=\"text-xl text-gray-600\" />\n              </button>\n              <Link href=\"/patient/chat\" className=\"relative p-2 hover:bg-gray-100 rounded-lg transition-colors\">\n                <FiMessageCircle className=\"text-xl text-gray-600\" />\n              </Link>\n              <button className=\"relative p-2 hover:bg-gray-100 rounded-lg transition-colors\">\n                <FiBell className=\"text-xl text-gray-600\" />\n              </button>\n            </div>\n          </header>\n          <div className=\"p-8\">\n            <div className=\"max-w-7xl mx-auto\">\n          {appointments.length === 0 ? (\n            <div className=\"bg-white rounded-lg shadow-md p-12 text-center\">\n              <p className=\"text-gray-500 text-lg\">No appointments found</p>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {appointments.map((appt) => (\n                <div key={appt.id} className=\"bg-white rounded-lg shadow-md p-6\">\n                  <div className=\"flex justify-between items-start\">\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-xl font-semibold text-gray-800 mb-2\">\n                        {user.role === 'patient'\n                          ? `Dr. ${appt.doctor?.user?.name}`\n                          : appt.patient?.name}\n                      </h3>\n                      <p className=\"text-gray-600\">\n                        {format(parseISO(appt.appointmentDate), 'MMMM dd, yyyy')} at {appt.appointmentTime}\n                      </p>\n                      {appt.reason && <p className=\"text-gray-500 mt-2\">{appt.reason}</p>}\n                    </div>\n                    <span\n                      className={`px-3 py-1 rounded-full text-xs font-semibold ${\n                        appt.status === 'confirmed'\n                          ? 'bg-green-100 text-green-800'\n                          : appt.status === 'pending'\n                          ? 'bg-yellow-100 text-yellow-800'\n                          : appt.status === 'completed'\n                          ? 'bg-blue-100 text-blue-800'\n                          : 'bg-red-100 text-red-800'\n                      }`}\n                    >\n                      {appt.status}\n                    </span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n            </div>\n          </div>\n        </main>\n      </div>\n    );\n  }\n\n  // Admin/Other roles view\n  return (\n    <div className=\"flex min-h-screen\">\n      <Sidebar />\n      <main className=\"ml-64 flex-1 p-8\">\n        <div className=\"max-w-7xl mx-auto\">\n          <h1 className=\"text-3xl font-bold text-gray-800 mb-6\">My Appointments</h1>\n          {appointments.length === 0 ? (\n            <div className=\"bg-white rounded-lg shadow-md p-12 text-center\">\n              <p className=\"text-gray-500 text-lg\">No appointments found</p>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {appointments.map((appt) => (\n                <div key={appt.id} className=\"bg-white rounded-lg shadow-md p-6\">\n                  <div className=\"flex justify-between items-start\">\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-xl font-semibold text-gray-800 mb-2\">\n                        {user.role === 'patient'\n                          ? `Dr. ${appt.doctor?.user?.name}`\n                          : appt.patient?.name}\n                      </h3>\n                      <p className=\"text-gray-600\">\n                        {format(parseISO(appt.appointmentDate), 'MMMM dd, yyyy')} at {appt.appointmentTime}\n                      </p>\n                      {appt.reason && <p className=\"text-gray-500 mt-2\">{appt.reason}</p>}\n                    </div>\n                    <span\n                      className={`px-3 py-1 rounded-full text-xs font-semibold ${\n                        appt.status === 'confirmed'\n                          ? 'bg-green-100 text-green-800'\n                          : appt.status === 'pending'\n                          ? 'bg-yellow-100 text-yellow-800'\n                          : appt.status === 'completed'\n                          ? 'bg-blue-100 text-blue-800'\n                          : 'bg-red-100 text-red-800'\n                      }`}\n                    >\n                      {appt.status}\n                    </span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}