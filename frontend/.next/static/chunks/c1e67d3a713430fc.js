(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18820,e=>{"use strict";var t=e.i(44859),a=e.i(52972),r=e.i(66315),s=e.i(55236),l=e.i(72648),i=e.i(33595),d=e.i(42388),n=e.i(51744),o=e.i(81273),c=e.i(90503),x=e.i(16639),g=e.i(17336),m=e.i(65846),p=e.i(15220),u=e.i(78964);function h(){let{user:e,loading:t,logout:m}=(0,s.useAuth)(),{showNotification:h}=(0,l.useNotification)(),{t:k}=(0,i.useLanguage)(),w=(0,d.useRouter)(),C=(0,d.usePathname)(),[A,D]=(0,r.useState)(null),[S,F]=(0,r.useState)(!0),[P,E]=(0,r.useState)("/admin/dashboard"),[M,$]=(0,r.useState)(""),T=(0,r.useRef)(null),I=(0,r.useRef)(null),U=(0,r.useRef)(null);(0,r.useEffect)(()=>{C&&("/admin/dashboard"===C||"/admin/appointments"===C||"/admin/users"===C||"/admin/doctors"===C||"/admin/prescriptions"===C||"/admin/ads"===C||"/admin/chats"===C)?E(C):C&&C.startsWith("/admin/")&&E(C)},[C]),(0,r.useEffect)(()=>{t||e?e&&"admin"!==e.role?"patient"===e.role?w.push("/patient/dashboard"):"doctor"===e.role?w.push("/doctor/dashboard"):w.push("/dashboard"):e&&"admin"===e.role&&J():w.push("/login")},[e,t,w]);let J=async()=>{try{F(!0);let[e,t,a]=await Promise.all([o.default.get("/admin/dashboard"),o.default.get("/doctors/admin/pending"),o.default.get("/admin/top-doctors?limit=5")]);D({...e.data,pendingDoctors:t.data.doctors||[],topDoctors:a.data.topDoctors||[]})}catch(e){console.error("Error fetching dashboard data:",e),D({stats:{totalUsers:0,totalDoctors:0,totalAppointments:0,pendingDoctors:0},appointments:[],prescriptions:[],pendingDoctors:[],topDoctors:[]})}finally{F(!1)}},R=e=>{E(e),w.push(e)};return t||S?(0,a.jsx)(n.default,{}):e&&"admin"===e.role?(0,a.jsxs)("div",{className:"flex min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors",children:[(0,a.jsx)(p.default,{activeSection:P,onSectionChange:R}),(0,a.jsxs)("main",{className:"ml-64 flex-1 bg-gray-50 dark:bg-gray-900 transition-colors",children:[(0,a.jsx)(u.default,{title:(()=>{switch(P){case"/admin/dashboard":default:return"Dashboard";case"/admin/appointments":return"Appointments";case"/admin/users":return"Users";case"/admin/doctors":return"Doctors";case"/admin/prescriptions":return"Prescriptions";case"/admin/ads":return"Advertisements";case"/admin/chats":return"Chats"}})(),onSearch:"/admin/users"===P?e=>{$(e)}:void 0,searchPlaceholder:"/admin/users"===P?"Search users by name, email, or phone...":void 0,onQuickAdd:{onAddUser:()=>{R("/admin/users"),setTimeout(()=>{T.current?.openCreateModal&&T.current.openCreateModal()},100)},onAddDoctor:()=>{R("/admin/doctors"),h("Navigate to Doctors section to review pending doctor applications","info")},onAddAppointment:()=>{R("/admin/appointments"),setTimeout(()=>{I.current?.openCreateModal&&I.current.openCreateModal()},100)},onAddAdvertisement:()=>{R("/admin/ads"),setTimeout(()=>{U.current?.openCreateModal&&U.current.openCreateModal()},100)}}}),(0,a.jsxs)("div",{className:"p-8",children:[("/admin/dashboard"===P||"/dashboard"===P)&&A&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:[k("welcome_back"),", ",e.name,"!"]}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:k("dashboard_overview")||"Here's an overview of your system"})]}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:k("total_users")}),(0,a.jsx)("p",{className:"text-3xl font-bold text-teal-600 dark:text-teal-400 mt-2",children:A.stats?.totalUsers||0})]}),(0,a.jsx)(c.FiUser,{className:"text-4xl text-teal-600 dark:text-teal-400"})]})}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:k("total_doctors")}),(0,a.jsx)("p",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400 mt-2",children:A.stats?.totalDoctors||0})]}),(0,a.jsx)(c.FiUser,{className:"text-4xl text-indigo-600 dark:text-indigo-400"})]})}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:k("total_appointments")}),(0,a.jsx)("p",{className:"text-3xl font-bold text-teal-600 dark:text-teal-400 mt-2",children:A.stats?.totalAppointments||0})]}),(0,a.jsx)(c.FiCalendar,{className:"text-4xl text-teal-600 dark:text-teal-400"})]})}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:k("pending_doctors")}),(0,a.jsx)("p",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400 mt-2",children:A.stats?.pendingDoctors||0})]}),(0,a.jsx)(c.FiClock,{className:"text-4xl text-orange-600 dark:text-orange-400"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[A.recentAppointments&&A.recentAppointments.length>0&&(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:k("recent_appointments")}),(0,a.jsxs)("button",{onClick:()=>R("/admin/appointments"),className:"text-teal-600 dark:text-teal-400 hover:text-teal-700 dark:hover:text-teal-300 text-sm font-medium",children:[k("view_all")," →"]})]}),(0,a.jsx)("div",{className:"space-y-3",children:A.recentAppointments.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-md transition-shadow bg-white dark:bg-gray-700",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:[e.patient?.name||"Patient"," - Dr. ",e.doctor?.user?.name||"Doctor"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[(0,x.format)((0,g.parseISO)(e.appointmentDate),"MM/dd/yyyy")," at ",e.appointmentTime]}),e.reason&&(0,a.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1",children:e.reason})]}),(0,a.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${"confirmed"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"completed"===e.status?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:e.status})]},e.id))})]}),A.topDoctors&&A.topDoctors.length>0&&(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:k("top_doctors")}),(0,a.jsxs)("button",{onClick:()=>R("/admin/doctors"),className:"text-teal-600 dark:text-teal-400 hover:text-teal-700 dark:hover:text-teal-300 text-sm font-medium",children:[k("view_all")," →"]})]}),(0,a.jsx)("div",{className:"space-y-3",children:A.topDoctors.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-md transition-shadow bg-white dark:bg-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white font-bold text-lg",children:t+1}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:["Dr. ",e.name]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.specialization}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:e.email})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-teal-600 dark:text-teal-400",children:e.patientCount}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Patients"})]})]},e.id))})]})]}),A.pendingDoctors&&A.pendingDoctors.length>0&&(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"Pending Doctor Approvals"}),(0,a.jsx)("button",{onClick:()=>E("/admin/doctors"),className:"text-teal-600 hover:text-teal-700 text-sm font-medium",children:"View All →"})]}),(0,a.jsx)("div",{className:"space-y-3",children:A.pendingDoctors.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-md transition-shadow bg-white dark:bg-gray-800",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:e.user?.name||"Doctor"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.specialization||"N/A"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:e.department?.name||"No Department"})]}),(0,a.jsx)("button",{onClick:()=>E("/admin/doctors"),className:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors text-sm font-medium",children:"Review"})]},e.id))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("button",{onClick:()=>E("/admin/doctors"),className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg transition-all flex items-center gap-4 text-left",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center",children:(0,a.jsx)(c.FiUser,{className:"text-2xl text-indigo-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Manage Doctors"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Approve pending doctors"}),A.stats?.pendingDoctors>0&&(0,a.jsxs)("p",{className:"text-xs text-orange-600 mt-1 font-medium",children:[A.stats.pendingDoctors," pending approval"]})]})]}),(0,a.jsxs)("button",{onClick:()=>E("/admin/appointments"),className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg transition-all flex items-center gap-4 text-left",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-teal-100 flex items-center justify-center",children:(0,a.jsx)(c.FiCalendar,{className:"text-2xl text-teal-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"View Appointments"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manage all appointments"})]})]}),(0,a.jsxs)("button",{onClick:()=>E("/admin/users"),className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg transition-all flex items-center gap-4 text-left",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:(0,a.jsx)(c.FiUser,{className:"text-2xl text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Manage Users"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"View all users"})]})]})]})]})]}),"/admin/users"===P&&(0,a.jsx)(y,{ref:T,onSectionChange:E,searchQuery:M}),"/admin/doctors"===P&&(0,a.jsx)(b,{onSectionChange:E}),"/admin/appointments"===P&&(0,a.jsx)(f,{ref:I}),"/admin/chats"===P&&(0,a.jsx)(N,{}),"/admin/prescriptions"===P&&(0,a.jsx)(j,{}),"/admin/ads"===P&&(0,a.jsx)(v,{ref:U})]})]})]}):null}let y=r.default.forwardRef(({onSectionChange:e,searchQuery:t},s)=>{let{showNotification:i}=(0,l.useNotification)(),[d,x]=(0,r.useState)([]),[g,m]=(0,r.useState)([]),[p,u]=(0,r.useState)(!0),[h,y]=(0,r.useState)("all"),b=t||"",[f,j]=(0,r.useState)([]),[v,N]=(0,r.useState)("name"),[k,w]=(0,r.useState)("asc"),[C,A]=(0,r.useState)(null),[D,S]=(0,r.useState)(null),[F,P]=(0,r.useState)(!1),[E,M]=(0,r.useState)(!1),[$,T]=(0,r.useState)(!1),[I,U]=(0,r.useState)({}),[J,R]=(0,r.useState)({name:"",email:"",password:"",phone:"",role:"patient",address:""});(0,r.useImperativeHandle)(s,()=>({openCreateModal:()=>{R({name:"",email:"",password:"",phone:"",role:"patient",address:""}),T(!0),M(!1),S(null),P(!0)}})),(0,r.useEffect)(()=>{L()},[]),(0,r.useEffect)(()=>{z()},[d,h,b,v,k]);let L=async()=>{try{u(!0);let e=await o.default.get("/admin/users?limit=100");x(e.data.users||[]),m(e.data.users||[])}catch(e){console.error("Error fetching users:",e)}finally{u(!1)}},z=()=>{let e=[...d];if("all"!==h&&(e=e.filter(e=>e.role===h.slice(0,-1))),b.trim()){let t=b.toLowerCase();e=e.filter(e=>e.name?.toLowerCase().includes(t)||e.email?.toLowerCase().includes(t)||e.phone?.toLowerCase().includes(t))}e.sort((e,t)=>{let a=e[v]||"",r=t[v]||"";return("string"==typeof a&&(a=a.toLowerCase(),r=r.toLowerCase()),"asc"===k)?a>r?1:-1:a<r?1:-1}),m(e)},O=e=>{v===e?w("asc"===k?"desc":"asc"):(N(e),w("asc"))},_=async(e,t)=>{if(confirm(`Are you sure you want to delete ${t}? This action cannot be undone.`))try{await o.default.delete(`/admin/users/${e}`),i("User deleted successfully","success"),A(null),L()}catch(e){i(e.response?.data?.message||"Failed to delete user","error")}},B=async()=>{if(0===f.length)return void i("Please select users to delete","warning");if(confirm(`Are you sure you want to delete ${f.length} user(s)? This action cannot be undone.`))try{await o.default.delete("/admin/users",{data:{userIds:f}}),i(`${f.length} user(s) deleted successfully`,"success"),j([]),L()}catch(e){i(e.response?.data?.message||"Failed to delete users","error")}},V=async(e,t=!1)=>{try{let a=(await o.default.get(`/users/${e.id}`)).data.user;S(a),U({name:a.name||"",email:a.email||"",phone:a.phone||"",address:a.address||"",role:a.role||"",dateOfBirth:a.dateOfBirth?new Date(a.dateOfBirth).toISOString().split("T")[0]:"",weight:a.weight||"",height:a.height||"",homePhone:a.homePhone||"",workPhone:a.workPhone||"",allergies:Array.isArray(a.allergies)?a.allergies:[],bloodPressure:a.bloodPressure||"",pulse:a.pulse||""}),M(t),P(!0),A(null)}catch(e){i(e.response?.data?.message||"Failed to fetch user details","error")}},q=async()=>{try{if(!J.name||!J.email||!J.password)return void i("Name, email, and password are required","error");await o.default.post("/auth/register",{name:J.name,email:J.email,password:J.password,phone:J.phone||null,role:J.role,address:J.address||null}),i("User created successfully","success"),T(!1),P(!1),R({name:"",email:"",password:"",phone:"",role:"patient",address:""}),L()}catch(e){i(e.response?.data?.message||"Failed to create user","error")}},X=async()=>{try{let e={...I,allergies:Array.isArray(I.allergies)?I.allergies:[]};await o.default.put(`/admin/users/${D.id}`,e),i("User updated successfully","success"),M(!1),P(!1),S(null),L()}catch(e){i(e.response?.data?.message||"Failed to update user","error")}};if(p)return(0,a.jsx)(n.default,{});let H=g.length,Q=d.length;return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-6 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("button",{onClick:()=>y("all"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"all"===h?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["All Users (",Q,")"]}),(0,a.jsxs)("button",{onClick:()=>y("patients"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"patients"===h?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Patients (",d.filter(e=>"patient"===e.role).length,")"]}),(0,a.jsxs)("button",{onClick:()=>y("doctors"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"doctors"===h?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Doctors (",d.filter(e=>"doctor"===e.role).length,")"]}),(0,a.jsxs)("button",{onClick:()=>y("admins"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"admins"===h?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Admins (",d.filter(e=>"admin"===e.role).length,")"]})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[H," users"]}),f.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[f.length," selected"]}),(0,a.jsx)("button",{onClick:B,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Delete Selected"})]})]}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden transition-colors",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left",children:(0,a.jsx)("input",{type:"checkbox",checked:f.length===g.length&&g.length>0,onChange:e=>{e.target.checked?j(g.map(e=>e.id)):j([])},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>O("name"),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["Name","name"===v&&(0,a.jsx)(c.FiChevronDown,{className:`text-xs transform ${"desc"===k?"rotate-180":""}`})]})}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>O("email"),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["Email","email"===v&&(0,a.jsx)(c.FiChevronDown,{className:`text-xs transform ${"desc"===k?"rotate-180":""}`})]})}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Phone"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>O("role"),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["Role","role"===v&&(0,a.jsx)(c.FiChevronDown,{className:`text-xs transform ${"desc"===k?"rotate-180":""}`})]})}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-800",children:0===g.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:"No users found"})}):g.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("input",{type:"checkbox",checked:f.includes(e.id),onChange:()=>{var t;return t=e.id,void(f.includes(t)?j(f.filter(e=>e!==t)):j([...f,t]))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white text-xs font-bold",children:e.name?.charAt(0)?.toUpperCase()||"U"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.name||"N/A"})]})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:e.email||"N/A"}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:e.phone||"-"}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-semibold ${(e=>{switch(e){case"admin":return"bg-purple-100 text-purple-800";case"doctor":return"bg-blue-100 text-blue-800";case"patient":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(e.role)}`,children:e.role||"N/A"})}),(0,a.jsxs)("td",{className:"px-6 py-4 text-right relative",children:[(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),A(C===e.id?null:e.id)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,a.jsx)(c.FiMoreVertical,{className:"text-gray-600"})}),C===e.id&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-2 z-50 transition-colors",children:[(0,a.jsxs)("button",{onClick:t=>{t.stopPropagation(),V(e,!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 transition-colors",children:[(0,a.jsx)(c.FiEye,{className:"text-base"}),"View Details"]}),(0,a.jsxs)("button",{onClick:t=>{t.stopPropagation(),V(e,!0)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 transition-colors",children:[(0,a.jsx)(c.FiEdit,{className:"text-base"}),"Edit"]}),(0,a.jsx)("div",{className:"border-t border-gray-200 my-2"}),(0,a.jsxs)("button",{onClick:t=>{t.stopPropagation(),_(e.id,e.name)},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[(0,a.jsx)(c.FiTrash2,{className:"text-base"}),"Delete"]})]})]})]},e.id))})]})})}),C&&(0,a.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>A(null)}),F&&(D||$)&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col transition-colors",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-teal-50 to-indigo-50 dark:from-gray-800 dark:to-gray-800",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:$?"Create New User":E?"Edit User":"User Details"}),(0,a.jsx)("button",{onClick:()=>{P(!1),S(null),M(!1),T(!1)},className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,a.jsx)(c.FiX,{className:"text-xl text-gray-600 dark:text-gray-300"})})]})}),(0,a.jsx)("div",{className:"overflow-y-auto flex-1 p-6",children:$?(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name *"}),(0,a.jsx)("input",{type:"text",value:J.name,onChange:e=>R({...J,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),(0,a.jsx)("input",{type:"email",value:J.email,onChange:e=>R({...J,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password *"}),(0,a.jsx)("input",{type:"password",value:J.password,onChange:e=>R({...J,password:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone"}),(0,a.jsx)("input",{type:"tel",value:J.phone,onChange:e=>R({...J,phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role *"}),(0,a.jsxs)("select",{value:J.role,onChange:e=>R({...J,role:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors",children:[(0,a.jsx)("option",{value:"patient",children:"Patient"}),(0,a.jsx)("option",{value:"doctor",children:"Doctor"}),(0,a.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Address"}),(0,a.jsx)("textarea",{value:J.address,onChange:e=>R({...J,address:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors",rows:2})]})]}):(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),E?(0,a.jsx)("input",{type:"text",value:I.name,onChange:e=>U({...I,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors"}):(0,a.jsx)("p",{className:"text-gray-800 dark:text-gray-200",children:D?.name||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),E?(0,a.jsx)("input",{type:"email",value:I.email,onChange:e=>U({...I,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors"}):(0,a.jsx)("p",{className:"text-gray-800 dark:text-gray-200",children:D?.email||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone"}),E?(0,a.jsx)("input",{type:"tel",value:I.phone,onChange:e=>U({...I,phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors"}):(0,a.jsx)("p",{className:"text-gray-800 dark:text-gray-200",children:D?.phone||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role"}),E?(0,a.jsxs)("select",{value:I.role,onChange:e=>U({...I,role:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors",children:[(0,a.jsx)("option",{value:"patient",children:"Patient"}),(0,a.jsx)("option",{value:"doctor",children:"Doctor"}),(0,a.jsx)("option",{value:"admin",children:"Admin"})]}):(0,a.jsx)("p",{className:"text-gray-800 dark:text-gray-200",children:D?.role||"N/A"})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Address"}),E?(0,a.jsx)("textarea",{value:I.address,onChange:e=>U({...I,address:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors",rows:2}):(0,a.jsx)("p",{className:"text-gray-800 dark:text-gray-200",children:D?.address||"N/A"})]}),D&&"patient"===D.role&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date of Birth"}),E?(0,a.jsx)("input",{type:"date",value:I.dateOfBirth,onChange:e=>U({...I,dateOfBirth:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}):(0,a.jsx)("p",{className:"text-gray-800",children:D.dateOfBirth?new Date(D.dateOfBirth).toLocaleDateString():"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Weight"}),E?(0,a.jsx)("input",{type:"text",value:I.weight,onChange:e=>U({...I,weight:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}):(0,a.jsx)("p",{className:"text-gray-800",children:D.weight||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Height"}),E?(0,a.jsx)("input",{type:"text",value:I.height,onChange:e=>U({...I,height:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}):(0,a.jsx)("p",{className:"text-gray-800",children:D.height||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Blood Pressure"}),E?(0,a.jsx)("input",{type:"text",value:I.bloodPressure,onChange:e=>U({...I,bloodPressure:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}):(0,a.jsx)("p",{className:"text-gray-800",children:D.bloodPressure||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Pulse"}),E?(0,a.jsx)("input",{type:"text",value:I.pulse,onChange:e=>U({...I,pulse:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}):(0,a.jsx)("p",{className:"text-gray-800",children:D.pulse||"N/A"})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Allergies"}),E?(0,a.jsxs)("div",{className:"space-y-2",children:[I.allergies.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:e,onChange:e=>{let a=[...I.allergies];a[t]=e.target.value,U({...I,allergies:a})},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}),(0,a.jsx)("button",{onClick:()=>{U({...I,allergies:I.allergies.filter((e,a)=>a!==t)})},className:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:(0,a.jsx)(c.FiX,{})})]},t)),(0,a.jsxs)("button",{onClick:()=>{U({...I,allergies:[...I.allergies,""]})},className:"px-3 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 text-sm",children:[(0,a.jsx)(c.FiPlus,{className:"inline mr-1"})," Add Allergy"]})]}):(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:Array.isArray(D.allergies)&&D.allergies.length>0?D.allergies.map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-sm",children:e},t)):(0,a.jsx)("p",{className:"text-gray-800",children:"None"})})]})]})]})}),(0,a.jsx)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex gap-4 transition-colors",children:$?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{P(!1),T(!1),R({name:"",email:"",password:"",phone:"",role:"patient",address:""})},className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 font-medium text-gray-700 dark:text-gray-300 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:q,className:"flex-1 px-4 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 font-medium transition-colors",children:"Create User"})]}):E?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>M(!1),className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 font-medium text-gray-700 dark:text-gray-300 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:X,className:"flex-1 px-4 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 font-medium transition-colors",children:"Save Changes"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{P(!1),S(null)},className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 font-medium text-gray-700 dark:text-gray-300 transition-colors",children:"Close"}),(0,a.jsx)("button",{onClick:()=>M(!0),className:"flex-1 px-4 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 font-medium transition-colors",children:"Edit"})]})})]})})]})});y.displayName="UsersManagementView";let b=({onSectionChange:e})=>{let{showNotification:s}=(0,l.useNotification)(),[i,d]=(0,r.useState)([]),[x,g]=(0,r.useState)([]),[m,p]=(0,r.useState)(!0),[u,h]=(0,r.useState)("approved"),[y,b]=(0,r.useState)(null),[f,j]=(0,r.useState)(!1),[v,N]=(0,r.useState)(""),[k,w]=(0,r.useState)(!1),[C,A]=(0,r.useState)(""),[D,S]=(0,r.useState)(null),[F,P]=(0,r.useState)(!1),[E,M]=(0,r.useState)({}),[$,T]=(0,r.useState)([]);(0,r.useEffect)(()=>{U(),J(),I()},[]),(0,r.useEffect)(()=>{"approved"===u&&J()},[u]);let I=async()=>{try{let e=await o.default.get("/departments");T(e.data.departments||[])}catch(e){console.error("Error fetching departments:",e)}},U=async()=>{try{let e=await o.default.get("/doctors/admin/pending");d(e.data.doctors||[])}catch(e){console.error("Error fetching pending doctors:",e)}},J=async()=>{try{p(!0);let e=await o.default.get("/doctors/admin/approved?limit=100");g(e.data.doctors||[])}catch(e){console.error("Error fetching approved doctors:",e)}finally{p(!1)}},R=async e=>{try{await o.default.put(`/doctors/admin/${e}/approve`,{notes:v}),j(!1),b(null),N(""),A("Doctor approved successfully!"),w(!0),U(),J(),s("Doctor approved successfully!","success"),setTimeout(()=>{w(!1)},3e3)}catch(e){s(e.response?.data?.message||"Failed to approve doctor","error")}},L=async e=>{if(!v.trim())return void s("Please provide a reason for rejection","warning");if(confirm("Are you sure you want to reject this doctor application?"))try{await o.default.put(`/doctors/admin/${e}/reject`,{notes:v}),s("Doctor application rejected","info"),j(!1),b(null),N(""),U()}catch(e){s(e.response?.data?.message||"Failed to reject doctor","error")}},z=(e,t=!1)=>{let a={...e};if(a.availableDays&&"string"==typeof a.availableDays)try{a.availableDays=JSON.parse(a.availableDays)}catch(e){a.availableDays=[]}if(a.previousJobs&&"string"==typeof a.previousJobs)try{a.previousJobs=JSON.parse(a.previousJobs)}catch(e){a.previousJobs=[]}if(a.education&&"string"==typeof a.education)try{a.education=JSON.parse(a.education)}catch(e){a.education=[]}b({...a,_isApproved:t}),t&&M({departmentId:a.departmentId||"",specialization:a.specialization||"",experience:a.experience?.toString()||"",qualification:a.qualification||"",bio:a.bio||"",consultationFee:a.consultationFee?.toString()||"",availableFrom:a.availableFrom||"",availableTo:a.availableTo||"",availableDays:Array.isArray(a.availableDays)?a.availableDays:[],previousJobs:Array.isArray(a.previousJobs)?a.previousJobs:[],education:Array.isArray(a.education)?a.education:[]}),P(!1),j(!0)},O=async()=>{try{let e={...E,availableDays:JSON.stringify(E.availableDays),previousJobs:JSON.stringify(E.previousJobs),education:JSON.stringify(E.education)};await o.default.put(`/doctors/${y.id}`,e),s("Doctor updated successfully","success"),P(!1),j(!1),b(null),J()}catch(e){s(e.response?.data?.message||"Failed to update doctor","error")}};return m&&0===x.length?(0,a.jsx)(n.default,{}):(0,a.jsxs)("div",{className:"relative",children:[k&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-2xl p-8 max-w-md w-full mx-4 transform transition-all",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(c.FiCheck,{className:"text-3xl text-green-600"})}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Success!"}),(0,a.jsx)("p",{className:"text-lg text-gray-600 mb-6",children:C}),(0,a.jsx)("button",{onClick:()=>w(!1),className:"px-6 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors font-medium",children:"OK"})]})})}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-6 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("button",{onClick:()=>h("approved"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"approved"===u?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Approved Doctors (",x.length,")"]}),(0,a.jsxs)("button",{onClick:()=>h("pending"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"pending"===u?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Pending Doctors (",i.length,")"]})]})}),"pending"===u&&0===i.length&&(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center transition-colors",children:(0,a.jsx)("p",{className:"text-gray-600 text-lg",children:"No pending doctor applications"})}),"pending"===u&&i.length>0&&(0,a.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,a.jsx)("div",{onClick:()=>z(e),className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg transition-all cursor-pointer text-gray-900 dark:text-gray-100",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4 flex-1",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white text-xl font-bold overflow-hidden",children:e.profileImage?(0,a.jsx)("img",{src:`data:${e.profileImageMimeType||"image/jpeg"};base64,${e.profileImage}`,alt:e.user?.name,className:"w-full h-full rounded-full object-cover"}):e.user?.name?.charAt(0)?.toUpperCase()||"D"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:e.user?.name}),(0,a.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-semibold",children:"Pending"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:e.specialization}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.department?.name}),(0,a.jsxs)("div",{className:"flex gap-4 mt-3 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:[e.experience||0," years exp"]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:["BDT ",e.consultationFee||0," fee"]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:e.user?.email})]})]})]}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),z(e)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors ml-4",children:"View Details"})]})},e.id))}),"approved"===u&&0===x.length&&(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center transition-colors",children:(0,a.jsx)("p",{className:"text-gray-600 text-lg",children:"No approved doctors yet"})}),"approved"===u&&x.length>0&&(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden transition-colors",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Doctor Name"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Specialization"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Department"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Email"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Phone"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Experience"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Consultation Fee"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-800",children:x.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white text-xs font-bold",children:e.user?.name?.charAt(0)?.toUpperCase()||"D"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.user?.name||"N/A"})]})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.specialization||"N/A"}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.department?.name||"N/A"}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.user?.email||"N/A"}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.user?.phone||"-"}),(0,a.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-600",children:[e.experience||0," years"]}),(0,a.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-600",children:["BDT ",e.consultationFee||0]}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:"Approved"})}),(0,a.jsxs)("td",{className:"px-6 py-4 text-right relative",children:[(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),S(D===e.id?null:e.id)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,a.jsx)(c.FiMoreVertical,{className:"text-gray-600"})}),D===e.id&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-2 z-50 transition-colors",children:[(0,a.jsxs)("button",{onClick:t=>{t.stopPropagation(),z(e,!0),S(null)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 transition-colors",children:[(0,a.jsx)(c.FiEye,{className:"text-base"}),"View Details"]}),(0,a.jsxs)("button",{onClick:t=>{t.stopPropagation();let a={...e};if(a.availableDays&&"string"==typeof a.availableDays)try{a.availableDays=JSON.parse(a.availableDays)}catch(e){a.availableDays=[]}if(a.previousJobs&&"string"==typeof a.previousJobs)try{a.previousJobs=JSON.parse(a.previousJobs)}catch(e){a.previousJobs=[]}if(a.education&&"string"==typeof a.education)try{a.education=JSON.parse(a.education)}catch(e){a.education=[]}z(a,!0),P(!0),S(null)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 transition-colors",children:[(0,a.jsx)(c.FiEdit,{className:"text-base"}),"Edit"]}),(0,a.jsx)("div",{className:"border-t border-gray-200 my-2"}),(0,a.jsxs)("button",{onClick:t=>{t.stopPropagation(),confirm(`Are you sure you want to delete ${e.user?.name}?`)&&s("Delete functionality coming soon","info"),S(null)},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[(0,a.jsx)(c.FiTrash2,{className:"text-base"}),"Delete"]})]})]})]},e.id))})]})})}),D&&(0,a.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>S(null)}),f&&y&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col transition-colors",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-teal-50 to-indigo-50 dark:from-gray-800 dark:to-gray-800",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:F?"Edit Doctor Profile":y._isApproved?"Doctor Details":"Review Doctor Application"}),(0,a.jsx)("button",{onClick:()=>{j(!1),b(null),N("")},className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:(0,a.jsx)(c.FiX,{className:"text-xl text-gray-600"})})]})}),(0,a.jsxs)("div",{className:"overflow-y-auto flex-1 p-6",children:[(0,a.jsxs)("div",{className:"flex items-start gap-6 mb-6 pb-6 border-b border-gray-200",children:[(0,a.jsx)("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white text-3xl font-bold overflow-hidden",children:y.profileImage?(0,a.jsx)("img",{src:`data:${y.profileImageMimeType||"image/jpeg"};base64,${y.profileImage}`,alt:y.user?.name,className:"w-full h-full rounded-full object-cover"}):y.user?.name?.charAt(0)?.toUpperCase()||"D"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h3",{className:"text-3xl font-bold text-gray-800",children:y.user?.name}),y._isApproved?(0,a.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-semibold",children:"Approved"}):(0,a.jsx)("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-semibold",children:"Pending Approval"})]}),(0,a.jsx)("p",{className:"text-lg text-gray-600 mb-1",children:y.specialization}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[y.department?.icon," ",y.department?.name]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6 mb-6 pb-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:y.user?.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Phone"}),(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:y.user?.phone||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-500 mb-1",children:"Department"}),F&&y._isApproved?(0,a.jsxs)("select",{value:E.departmentId,onChange:e=>M({...E,departmentId:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500",children:[(0,a.jsx)("option",{value:"",children:"Select Department"}),$.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.icon," ",e.name]},e.id))]}):(0,a.jsxs)("p",{className:"font-semibold text-gray-800",children:[y.department?.icon," ",y.department?.name||"N/A"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-500 mb-1",children:"Specialization"}),F&&y._isApproved?(0,a.jsx)("input",{type:"text",value:E.specialization,onChange:e=>M({...E,specialization:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}):(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:y.specialization||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-500 mb-1",children:"Experience"}),F&&y._isApproved?(0,a.jsx)("input",{type:"number",value:E.experience,onChange:e=>M({...E,experience:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}):(0,a.jsxs)("p",{className:"font-semibold text-gray-800",children:[y.experience||0," years"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-500 mb-1",children:"Consultation Fee"}),F&&y._isApproved?(0,a.jsx)("input",{type:"number",value:E.consultationFee,onChange:e=>M({...E,consultationFee:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}):(0,a.jsxs)("p",{className:"font-semibold text-gray-800",children:["BDT ",y.consultationFee||0]})]})]}),(0,a.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Qualifications"}),F&&y._isApproved?(0,a.jsx)("textarea",{value:E.qualification,onChange:e=>M({...E,qualification:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500",rows:4}):(0,a.jsx)("p",{className:"text-gray-700 whitespace-pre-line",children:y.qualification||"N/A"})]}),(0,a.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Bio"}),F&&y._isApproved?(0,a.jsx)("textarea",{value:E.bio,onChange:e=>M({...E,bio:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500",rows:4}):(0,a.jsx)("p",{className:"text-gray-700",children:y.bio||"N/A"})]}),(0,a.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Previous Jobs"}),F&&y._isApproved?(0,a.jsxs)("div",{className:"space-y-3",children:[(E.previousJobs||[]).map((e,t)=>(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[(0,a.jsx)("input",{type:"text",value:e.position||"",onChange:e=>{let a=[...E.previousJobs||[]];a[t]={...a[t],position:e.target.value},M({...E,previousJobs:a})},placeholder:"Position",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}),(0,a.jsx)("input",{type:"text",value:e.hospital||"",onChange:e=>{let a=[...E.previousJobs||[]];a[t]={...a[t],hospital:e.target.value},M({...E,previousJobs:a})},placeholder:"Hospital",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}),(0,a.jsx)("input",{type:"text",value:e.years||"",onChange:e=>{let a=[...E.previousJobs||[]];a[t]={...a[t],years:e.target.value},M({...E,previousJobs:a})},placeholder:"Years",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}),(0,a.jsxs)("button",{type:"button",onClick:()=>{M({...E,previousJobs:(E.previousJobs||[]).filter((e,a)=>a!==t)})},className:"text-red-600 hover:text-red-700 text-sm",children:[(0,a.jsx)(c.FiX,{className:"inline mr-1"})," Remove"]})]},t)),(0,a.jsxs)("button",{type:"button",onClick:()=>{M({...E,previousJobs:[...E.previousJobs||[],{position:"",hospital:"",years:""}]})},className:"px-3 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 text-sm",children:[(0,a.jsx)(c.FiPlus,{className:"inline mr-1"})," Add Job"]})]}):(0,a.jsx)("div",{className:"space-y-3",children:y.previousJobs&&Array.isArray(y.previousJobs)&&y.previousJobs.length>0?y.previousJobs.map((e,t)=>(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:e.position}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.hospital}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.years})]},t)):(0,a.jsx)("p",{className:"text-gray-500",children:"No previous jobs listed"})})]}),(0,a.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Education"}),F&&y._isApproved?(0,a.jsxs)("div",{className:"space-y-3",children:[(E.education||[]).map((e,t)=>(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[(0,a.jsx)("input",{type:"text",value:e.degree||"",onChange:e=>{let a=[...E.education||[]];a[t]={...a[t],degree:e.target.value},M({...E,education:a})},placeholder:"Degree",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}),(0,a.jsx)("input",{type:"text",value:e.institution||"",onChange:e=>{let a=[...E.education||[]];a[t]={...a[t],institution:e.target.value},M({...E,education:a})},placeholder:"Institution",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}),(0,a.jsx)("input",{type:"text",value:e.year||"",onChange:e=>{let a=[...E.education||[]];a[t]={...a[t],year:e.target.value},M({...E,education:a})},placeholder:"Year",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"}),(0,a.jsxs)("button",{type:"button",onClick:()=>{M({...E,education:(E.education||[]).filter((e,a)=>a!==t)})},className:"text-red-600 hover:text-red-700 text-sm",children:[(0,a.jsx)(c.FiX,{className:"inline mr-1"})," Remove"]})]},t)),(0,a.jsxs)("button",{type:"button",onClick:()=>{M({...E,education:[...E.education||[],{degree:"",institution:"",year:""}]})},className:"px-3 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 text-sm",children:[(0,a.jsx)(c.FiPlus,{className:"inline mr-1"})," Add Education"]})]}):(0,a.jsx)("div",{className:"space-y-3",children:y.education&&Array.isArray(y.education)&&y.education.length>0?y.education.map((e,t)=>(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:e.degree}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.institution}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.year})]},t)):(0,a.jsx)("p",{className:"text-gray-500",children:"No education listed"})})]}),(0,a.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Availability"}),F&&y._isApproved?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-500 mb-2",children:"Available Days:"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:(E.availableDays||[]).includes(e),onChange:t=>{let a=E.availableDays||[];t.target.checked?M({...E,availableDays:[...a,e]}):M({...E,availableDays:a.filter(t=>t!==e)})},className:"rounded border-gray-300 text-teal-600 focus:ring-teal-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:e})]},e))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-500 mb-1",children:"From"}),(0,a.jsx)("input",{type:"time",value:E.availableFrom||"",onChange:e=>M({...E,availableFrom:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-500 mb-1",children:"To"}),(0,a.jsx)("input",{type:"time",value:E.availableTo||"",onChange:e=>M({...E,availableTo:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"})]})]})]}):(0,a.jsxs)(a.Fragment,{children:[y.availableDays&&Array.isArray(y.availableDays)&&y.availableDays.length>0&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Available Days:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:y.availableDays.map((e,t)=>(0,a.jsx)("span",{className:"px-3 py-1 bg-teal-100 text-teal-800 rounded-full text-sm font-medium",children:e},t))})]}),y.availableFrom&&y.availableTo&&(0,a.jsxs)("p",{className:"font-semibold text-gray-800",children:["Time: ",y.availableFrom," - ",y.availableTo]}),(!y.availableDays||0===y.availableDays.length)&&!y.availableFrom&&(0,a.jsx)("p",{className:"text-gray-500",children:"No availability set"})]})]}),(y.hasCV||y.cvResume)&&(0,a.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"CV/Resume"}),(0,a.jsxs)("a",{href:`${t.default.env.NEXT_PUBLIC_API_URL||"http://localhost:5000"}/api/doctors/${y.id}/cv`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors font-medium",children:[(0,a.jsx)(c.FiFileText,{className:"text-lg"}),"Download CV/Resume ",y.cvResumeFileName&&`(${y.cvResumeFileName})`]})]}),!y._isApproved&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Notes (Optional for approval, Required for rejection)"}),(0,a.jsx)("textarea",{value:v,onChange:e=>N(e.target.value),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"Add any notes or comments about this doctor application..."})]})]}),(0,a.jsx)("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex gap-4",children:y._isApproved?F?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{P(!1)},className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-100 font-medium text-gray-700 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:O,className:"flex-1 px-4 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 font-medium transition-colors",children:"Save Changes"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{j(!1),b(null),N(""),P(!1)},className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-100 font-medium text-gray-700 transition-colors",children:"Close"}),(0,a.jsx)("button",{onClick:()=>P(!0),className:"flex-1 px-4 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 font-medium transition-colors",children:"Edit"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{j(!1),b(null),N("")},className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-100 font-medium text-gray-700 transition-colors",children:"Close"}),(0,a.jsxs)("button",{onClick:()=>L(y.id),className:"flex-1 px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center justify-center gap-2 font-medium transition-colors",children:[(0,a.jsx)(c.FiX,{className:"text-lg"}),"Reject Application"]}),(0,a.jsxs)("button",{onClick:()=>R(y.id),className:"flex-1 px-4 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 flex items-center justify-center gap-2 font-medium transition-colors",children:[(0,a.jsx)(c.FiCheck,{className:"text-lg"}),"Approve Doctor"]})]})})]})})]})},f=r.default.forwardRef((e,t)=>{let{showNotification:s}=(0,l.useNotification)(),[i,d]=(0,r.useState)([]),[m,p]=(0,r.useState)([]),[u,h]=(0,r.useState)(!0),[y,b]=(0,r.useState)("all"),[f,j]=(0,r.useState)(""),[v,N]=(0,r.useState)(null),[k,w]=(0,r.useState)(!1),[C,A]=(0,r.useState)(!1),[D,S]=(0,r.useState)([]),[F,P]=(0,r.useState)([]),[E,M]=(0,r.useState)({patientId:"",doctorId:"",appointmentDate:"",appointmentTime:"",reason:"",status:"pending"});(0,r.useImperativeHandle)(t,()=>({openCreateModal:async()=>{try{let[e,t]=await Promise.all([o.default.get("/admin/users?limit=1000"),o.default.get("/doctors?limit=1000")]);S(e.data.users?.filter(e=>"patient"===e.role)||[]),P(t.data.doctors||[])}catch(e){console.error("Error fetching users/doctors:",e)}M({patientId:"",doctorId:"",appointmentDate:"",appointmentTime:"",reason:"",status:"pending"}),A(!0)}})),(0,r.useEffect)(()=>{$()},[]),(0,r.useEffect)(()=>{T()},[i,y,f]);let $=async()=>{try{h(!0);let e=await o.default.get("/appointments?limit=1000");d(e.data.appointments||[]),p(e.data.appointments||[])}catch(e){console.error("Error fetching appointments:",e),s("Failed to fetch appointments","error")}finally{h(!1)}},T=()=>{let e=[...i];if("all"!==y&&(e=e.filter(e=>e.status===y)),f.trim()){let t=f.toLowerCase();e=e.filter(e=>e.patient?.name?.toLowerCase().includes(t)||e.doctor?.user?.name?.toLowerCase().includes(t)||e.patient?.email?.toLowerCase().includes(t)||e.reason?.toLowerCase().includes(t))}p(e)},I=async(e,t)=>{try{await o.default.put(`/appointments/${e}/status`,{status:t}),s("Appointment status updated successfully","success"),$(),w(!1)}catch(e){s(e.response?.data?.message||"Failed to update appointment status","error")}},U=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return u?(0,a.jsx)(n.default,{}):(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-6 flex gap-4",children:(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("input",{type:"text",placeholder:"Search by patient name, doctor name, or email...",value:f,onChange:e=>j(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"})})}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-6 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("button",{onClick:()=>b("all"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"all"===y?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["All (",i.length,")"]}),(0,a.jsxs)("button",{onClick:()=>b("pending"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"pending"===y?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Pending (",i.filter(e=>"pending"===e.status).length,")"]}),(0,a.jsxs)("button",{onClick:()=>b("confirmed"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"confirmed"===y?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Confirmed (",i.filter(e=>"confirmed"===e.status).length,")"]}),(0,a.jsxs)("button",{onClick:()=>b("completed"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"completed"===y?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Completed (",i.filter(e=>"completed"===e.status).length,")"]}),(0,a.jsxs)("button",{onClick:()=>b("cancelled"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"cancelled"===y?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Cancelled (",i.filter(e=>"cancelled"===e.status).length,")"]})]})}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden transition-colors",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Patient"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Doctor"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Date & Time"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Reason"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-800",children:0===m.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:"No appointments found"})}):m.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.patient?.name||"N/A"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.patient?.email||"N/A"})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("p",{className:"text-sm text-gray-900",children:["Dr. ",e.doctor?.user?.name||"N/A"]})}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-900",children:(0,x.format)((0,g.parseISO)(e.appointmentDate),"MMM dd, yyyy")}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.appointmentTime})]}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("p",{className:"text-sm text-gray-900",children:e.reason||"-"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-semibold ${U(e.status)}`,children:e.status||"N/A"})}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:(0,a.jsx)("button",{onClick:()=>{N(e),w(!0)},className:"px-3 py-1 text-sm text-teal-600 hover:text-teal-700 font-medium",children:"View Details"})})]},e.id))})]})})}),k&&v&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col transition-colors",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-teal-50 to-indigo-50 dark:from-gray-800 dark:to-gray-800",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Appointment Details"}),(0,a.jsx)("button",{onClick:()=>{w(!1),N(null)},className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:(0,a.jsx)(c.FiX,{className:"text-xl text-gray-600"})})]})}),(0,a.jsx)("div",{className:"overflow-y-auto flex-1 p-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Patient Name"}),(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:v.patient?.name||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Patient Email"}),(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:v.patient?.email||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Doctor Name"}),(0,a.jsxs)("p",{className:"font-semibold text-gray-800",children:["Dr. ",v.doctor?.user?.name||"N/A"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Date"}),(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:(0,x.format)((0,g.parseISO)(v.appointmentDate),"MMMM dd, yyyy")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Time"}),(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:v.appointmentTime||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),(0,a.jsx)("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-semibold ${U(v.status)}`,children:v.status||"N/A"})]})]}),v.reason&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Reason"}),(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:v.reason})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Update Status"}),(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:["pending","confirmed","completed","cancelled"].map(e=>(0,a.jsx)("button",{onClick:()=>I(v.id,e),disabled:v.status===e,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${v.status===e?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-teal-600 text-white hover:bg-teal-700"}`,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]})}),(0,a.jsx)("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:(0,a.jsx)("button",{onClick:()=>{w(!1),N(null)},className:"w-full px-4 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 font-medium transition-colors",children:"Close"})})]})})]})});f.displayName="AppointmentsManagementView";let j=()=>{let{showNotification:e}=(0,l.useNotification)(),[t,s]=(0,r.useState)([]),[i,d]=(0,r.useState)([]),[m,p]=(0,r.useState)(!0),[u,h]=(0,r.useState)(""),[y,b]=(0,r.useState)(null),[f,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{v()},[]),(0,r.useEffect)(()=>{N()},[t,u]);let v=async()=>{try{p(!0);let e=await o.default.get("/prescriptions?limit=1000");s(e.data.prescriptions||[]),d(e.data.prescriptions||[])}catch(t){console.error("Error fetching prescriptions:",t),e("Failed to fetch prescriptions","error")}finally{p(!1)}},N=()=>{let e=[...t];if(u.trim()){let t=u.toLowerCase();e=e.filter(e=>e.patient?.name?.toLowerCase().includes(t)||e.patient?.email?.toLowerCase().includes(t)||e.doctor?.user?.name?.toLowerCase().includes(t)||e.diagnosis?.toLowerCase().includes(t))}d(e)};return m?(0,a.jsx)(n.default,{}):(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("input",{type:"text",placeholder:"Search by patient name, doctor name, email, or diagnosis...",value:u,onChange:e=>h(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"})}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden transition-colors",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Patient"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Doctor"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Diagnosis"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Medicines"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-800",children:0===i.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:"No prescriptions found"})}):i.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.patient?.name||"N/A"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.patient?.email||"N/A"})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("p",{className:"text-sm text-gray-900",children:["Dr. ",e.doctor?.user?.name||"N/A"]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("p",{className:"text-sm text-gray-900",children:e.diagnosis||"-"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.medicines&&Array.isArray(e.medicines)?`${e.medicines.length} medicine(s)`:"N/A"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("p",{className:"text-sm text-gray-900",children:e.createdAt?(0,x.format)((0,g.parseISO)(e.createdAt),"MMM dd, yyyy"):"N/A"})}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:(0,a.jsx)("button",{onClick:()=>{b(e),j(!0)},className:"px-3 py-1 text-sm text-teal-600 hover:text-teal-700 font-medium",children:"View Details"})})]},e.id))})]})})}),f&&y&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col transition-colors",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-teal-50 to-indigo-50 dark:from-gray-800 dark:to-gray-800",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Prescription Details"}),(0,a.jsx)("button",{onClick:()=>{j(!1),b(null)},className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:(0,a.jsx)(c.FiX,{className:"text-xl text-gray-600"})})]})}),(0,a.jsx)("div",{className:"overflow-y-auto flex-1 p-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Patient Name"}),(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:y.patient?.name||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Patient Email"}),(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:y.patient?.email||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Doctor Name"}),(0,a.jsxs)("p",{className:"font-semibold text-gray-800",children:["Dr. ",y.doctor?.user?.name||"N/A"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Date"}),(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:y.createdAt?(0,x.format)((0,g.parseISO)(y.createdAt),"MMMM dd, yyyy"):"N/A"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Diagnosis"}),(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:y.diagnosis||"N/A"})]}),y.medicines&&Array.isArray(y.medicines)&&y.medicines.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Medicines"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:y.medicines.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsxs)("span",{className:"text-teal-600 font-semibold",children:[t+1,"."]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-800",children:e.name||"N/A"}),(e.dosage||e.frequency)&&(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:[e.dosage&&`Dosage: ${e.dosage}`,e.dosage&&e.frequency&&" • ",e.frequency&&`Frequency: ${e.frequency}`]})]})]},t))})]}),y.tests&&Array.isArray(y.tests)&&y.tests.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Tests"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:y.tests.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsxs)("span",{className:"text-teal-600 font-semibold",children:[t+1,"."]}),(0,a.jsx)("p",{className:"text-sm text-gray-800",children:e.name||"N/A"})]},t))})]}),y.rules&&Array.isArray(y.rules)&&y.rules.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Rules"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:y.rules.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsxs)("span",{className:"text-teal-600 font-semibold",children:[t+1,"."]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-800",children:e.title||"N/A"}),e.description&&(0,a.jsx)("p",{className:"text-xs text-gray-600",children:e.description})]})]},t))})]}),y.instructions&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Instructions"}),(0,a.jsx)("p",{className:"text-sm text-gray-800 whitespace-pre-line",children:y.instructions})]})]})}),(0,a.jsx)("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:(0,a.jsx)("button",{onClick:()=>{j(!1),b(null)},className:"w-full px-4 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 font-medium transition-colors",children:"Close"})})]})})]})},v=r.default.forwardRef((e,t)=>{let{showNotification:s}=(0,l.useNotification)(),[i,d]=(0,r.useState)([]),[m,p]=(0,r.useState)([]),[u,h]=(0,r.useState)(!0),[y,b]=(0,r.useState)(""),[f,j]=(0,r.useState)("all"),[v,N]=(0,r.useState)(null),[k,w]=(0,r.useState)(!1),[C,A]=(0,r.useState)(!1),[D,S]=(0,r.useState)(!1),[F,P]=(0,r.useState)({title:"",description:"",imageUrl:"",link:"",targetAudience:"all",isActive:!0,startDate:"",endDate:""});(0,r.useImperativeHandle)(t,()=>({openCreateModal:()=>{P({title:"",description:"",imageUrl:"",link:"",targetAudience:"all",isActive:!0,startDate:"",endDate:""}),S(!1),N(null),A(!0)}})),(0,r.useEffect)(()=>{E()},[]),(0,r.useEffect)(()=>{M()},[i,f,y]);let E=async()=>{try{h(!0);let e=await o.default.get("/admin/ads?limit=1000");d(e.data.ads||[]),p(e.data.ads||[])}catch(e){console.error("Error fetching ads:",e),s("Failed to fetch advertisements","error")}finally{h(!1)}},M=()=>{let e=[...i];if("active"===f?e=e.filter(e=>!0===e.isActive):"inactive"===f&&(e=e.filter(e=>!1===e.isActive)),y.trim()){let t=y.toLowerCase();e=e.filter(e=>e.title?.toLowerCase().includes(t)||e.description?.toLowerCase().includes(t))}p(e)},$=async()=>{try{await o.default.post("/ads",F),s("Advertisement created successfully","success"),A(!1),P({title:"",description:"",imageUrl:"",link:"",targetAudience:"all",isActive:!0,startDate:"",endDate:""}),E()}catch(e){s(e.response?.data?.message||"Failed to create advertisement","error")}},T=async()=>{try{await o.default.put(`/ads/${v.id}`,F),s("Advertisement updated successfully","success"),w(!1),S(!1),N(null),E()}catch(e){s(e.response?.data?.message||"Failed to update advertisement","error")}},I=async e=>{if(confirm("Are you sure you want to delete this advertisement?"))try{await o.default.delete(`/ads/${e}`),s("Advertisement deleted successfully","success"),E()}catch(e){s(e.response?.data?.message||"Failed to delete advertisement","error")}};return u?(0,a.jsx)(n.default,{}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("input",{type:"text",placeholder:"Search advertisements by title or description...",value:y,onChange:e=>b(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"})}),(0,a.jsxs)("button",{onClick:()=>{P({title:"",description:"",imageUrl:"",link:"",targetAudience:"all",isActive:!0,startDate:"",endDate:""}),A(!0)},className:"ml-4 px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors font-medium flex items-center gap-2",children:[(0,a.jsx)(c.FiPlus,{className:"text-lg"}),"Create Ad"]})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-6 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("button",{onClick:()=>j("all"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"all"===f?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["All (",i.length,")"]}),(0,a.jsxs)("button",{onClick:()=>j("active"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"active"===f?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Active (",i.filter(e=>e.isActive).length,")"]}),(0,a.jsxs)("button",{onClick:()=>j("inactive"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"inactive"===f?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Inactive (",i.filter(e=>!e.isActive).length,")"]})]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:0===m.length?(0,a.jsx)("div",{className:"col-span-full bg-white rounded-lg shadow-md p-8 text-center",children:(0,a.jsx)("p",{className:"text-gray-600 text-lg",children:"No advertisements found"})}):m.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[e.imageUrl&&(0,a.jsx)("div",{className:"w-full h-48 bg-gray-200 overflow-hidden",children:(0,a.jsx)("img",{src:e.imageUrl,alt:e.title,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none"}})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 flex-1",children:e.title}),(0,a.jsx)("span",{className:`ml-2 px-2 py-1 rounded-full text-xs font-semibold ${e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.isActive?"Active":"Inactive"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-3",children:[(0,a.jsxs)("span",{children:["Target: ",e.targetAudience||"all"]}),(0,a.jsxs)("span",{children:["Clicks: ",e.clickCount||0]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>{N(e),P({title:e.title||"",description:e.description||"",imageUrl:e.imageUrl||"",link:e.link||"",targetAudience:e.targetAudience||"all",isActive:void 0===e.isActive||e.isActive,startDate:e.startDate?(0,x.format)((0,g.parseISO)(e.startDate),"yyyy-MM-dd"):"",endDate:e.endDate?(0,x.format)((0,g.parseISO)(e.endDate),"yyyy-MM-dd"):""}),S(!0),w(!0)},className:"flex-1 px-3 py-2 text-sm bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>I(e.id),className:"px-3 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:(0,a.jsx)(c.FiTrash2,{})})]})]})]},e.id))}),(C||k)&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col transition-colors",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-teal-50 to-indigo-50 dark:from-gray-800 dark:to-gray-800",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:D?"Edit Advertisement":"Create Advertisement"}),(0,a.jsx)("button",{onClick:()=>{w(!1),A(!1),S(!1),N(null)},className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:(0,a.jsx)(c.FiX,{className:"text-xl text-gray-600"})})]})}),(0,a.jsx)("div",{className:"overflow-y-auto flex-1 p-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title *"}),(0,a.jsx)("input",{type:"text",value:F.title,onChange:e=>P({...F,title:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500",placeholder:"Enter advertisement title"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),(0,a.jsx)("textarea",{value:F.description,onChange:e=>P({...F,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500",rows:3,placeholder:"Enter advertisement description"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Image URL"}),(0,a.jsx)("input",{type:"url",value:F.imageUrl,onChange:e=>P({...F,imageUrl:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500",placeholder:"https://example.com/image.jpg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Link URL"}),(0,a.jsx)("input",{type:"url",value:F.link,onChange:e=>P({...F,link:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500",placeholder:"https://example.com"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Target Audience"}),(0,a.jsxs)("select",{value:F.targetAudience,onChange:e=>P({...F,targetAudience:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500",children:[(0,a.jsx)("option",{value:"all",children:"All"}),(0,a.jsx)("option",{value:"patient",children:"Patients"}),(0,a.jsx)("option",{value:"doctor",children:"Doctors"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),(0,a.jsxs)("select",{value:F.isActive?"true":"false",onChange:e=>P({...F,isActive:"true"===e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500",children:[(0,a.jsx)("option",{value:"true",children:"Active"}),(0,a.jsx)("option",{value:"false",children:"Inactive"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Date"}),(0,a.jsx)("input",{type:"date",value:F.startDate,onChange:e=>P({...F,startDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"End Date"}),(0,a.jsx)("input",{type:"date",value:F.endDate,onChange:e=>P({...F,endDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"})]})]})]})}),(0,a.jsxs)("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex gap-4",children:[(0,a.jsx)("button",{onClick:()=>{w(!1),A(!1),S(!1),N(null)},className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-100 font-medium text-gray-700 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>{D?T():$()},disabled:!F.title.trim(),className:`flex-1 px-4 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 font-medium transition-colors ${!F.title.trim()?"opacity-50 cursor-not-allowed":""}`,children:D?"Update":"Create"})]})]})})]})});v.displayName="AdsManagementView";let N=()=>{let{user:e}=(0,s.useAuth)(),{showNotification:t}=(0,l.useNotification)(),[i,d]=(0,r.useState)([]),[g,p]=(0,r.useState)([]),[u,h]=(0,r.useState)(null),[y,b]=(0,r.useState)([]),[f,j]=(0,r.useState)(""),[v,N]=(0,r.useState)(!0),[k,w]=(0,r.useState)(0),[C,A]=(0,r.useState)(""),[D,S]=(0,r.useState)(!1),F=(0,r.useRef)(null),P=(0,r.useRef)(null);(0,r.useEffect)(()=>{e&&"admin"===e.role&&(E(),M(),T())},[e]),(0,r.useEffect)(()=>{if(e&&"admin"===e.role){let e=setInterval(()=>{E(),M(),u&&$(u.id),T()},2e3);return()=>clearInterval(e)}},[e,u]),(0,r.useEffect)(()=>(u&&(P.current&&clearInterval(P.current),P.current=setInterval(()=>{$(u.id),M(),T()},2e3)),()=>{P.current&&clearInterval(P.current)}),[u]),(0,r.useEffect)(()=>{F.current?.scrollIntoView({behavior:"smooth"})},[y]);let E=async()=>{try{let e=await o.default.get("/chat/users");d(e.data.users||[])}catch(e){console.error("Error fetching chat users:",e)}},M=async()=>{try{let e=await o.default.get("/chat/conversations");p(e.data.conversations||[])}catch(e){console.error("Error fetching conversations:",e)}},$=async e=>{try{let t=await o.default.get(`/chat/messages/${e}`);b(t.data.messages||[])}catch(e){console.error("Error fetching messages:",e)}},T=async()=>{try{let e=await o.default.get("/chat/unread-count");w(e.data.unreadCount||0)}catch(e){console.error("Error fetching unread count:",e)}finally{N(!1)}},I=e=>{let t=g.find(t=>t.id===e.id);if(t)h(t),$(t.id),A(""),S(!1);else h({id:e.id,name:e.name,email:e.email,role:e.role,phone:e.phone,lastMessage:e.lastMessage||"No messages yet",lastMessageTime:e.lastMessageTime||new Date,unreadCount:e.unreadCount||0}),b([]);A(""),S(!1)},U=i.filter(e=>{let t=C.toLowerCase();return e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.id.toLowerCase().includes(t)||e.phone&&e.phone.includes(t)||e.role.toLowerCase().includes(t)}),J=async e=>{if(e.preventDefault(),f.trim()&&u)try{await o.default.post("/chat/send",{receiverId:u.id,content:f.trim()}),j(""),setTimeout(()=>{$(u.id),M(),E(),T()},100)}catch(e){console.error("Error sending message:",e),t(e.response?.data?.message||"Failed to send message","error")}},R=e=>e?.split(" ")?.map(e=>e[0])?.join("")?.toUpperCase()?.slice(0,2)||"U";return v?(0,a.jsx)(n.default,{}):(0,a.jsx)("div",{className:"flex flex-col h-[calc(100vh-200px)] bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden transition-colors",children:(0,a.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,a.jsxs)("div",{className:"w-1/3 border-r border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 flex flex-col transition-colors",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-3",children:["All Users ",k>0&&`(${k})`]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.FiSearch,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,a.jsx)("input",{type:"text",value:C,onChange:e=>{A(e.target.value),S(e.target.value.length>0)},onFocus:()=>{C.length>0&&S(!0)},onBlur:()=>{setTimeout(()=>S(!1),200)},placeholder:"Search by ID, name, email...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors"}),D&&U.length>0&&(0,a.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-60 overflow-y-auto transition-colors",children:U.slice(0,5).map(e=>(0,a.jsx)("div",{onMouseDown:t=>{t.preventDefault(),I(e)},className:"px-4 py-3 hover:bg-teal-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-0 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white font-bold text-sm",children:R(e.name)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 capitalize",children:e.role}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["ID: ",e.id.slice(0,8),"..."]})]}),e.unreadCount>0&&(0,a.jsx)("span",{className:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full",children:e.unreadCount})]})},e.id))})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===i.length?(0,a.jsx)("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:(0,a.jsx)("p",{children:"No users available"})}):U.map(e=>{let t=g.find(t=>t.id===e.id),r=u?.id===e.id,s=t||e;return(0,a.jsx)("div",{onClick:()=>I(e),className:`p-4 border-b border-gray-100 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${r?"bg-teal-50 dark:bg-gray-700 border-l-4 border-teal-600":""}`,children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white font-bold",children:R(e.name)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-100 truncate",children:e.name}),s.lastMessageTime&&(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:(0,m.formatDistanceToNow)(new Date(s.lastMessageTime),{addSuffix:!0})})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate mt-1",children:s.lastMessage||"No messages yet"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["ID: ",e.id.slice(0,8),"..."]}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"•"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:e.role})]})]}),e.unreadCount>0&&(0,a.jsx)("span",{className:"bg-teal-600 text-white text-xs px-2 py-1 rounded-full",children:e.unreadCount})]})},e.id)})})]}),(0,a.jsx)("div",{className:"flex-1 flex flex-col bg-gray-50 dark:bg-gray-900 transition-colors",children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 flex items-center justify-between transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white font-bold",children:R(u.name)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-100",children:u.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:u.role}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["ID: ",u.id.slice(0,8),"..."]})]})]})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[y.map(t=>{let r=t.senderId===e?.id;return(0,a.jsx)("div",{className:`flex ${r?"justify-end":"justify-start"}`,children:(0,a.jsxs)("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-2xl ${r?"bg-teal-600 text-white":"bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 border border-gray-200 dark:border-gray-600"} transition-colors`,children:[!r&&(0,a.jsx)("p",{className:"text-xs font-semibold mb-1 opacity-75",children:t.sender.name}),(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:t.content}),(0,a.jsxs)("div",{className:`flex items-center gap-1 mt-1 ${r?"justify-end":"justify-start"}`,children:[(0,a.jsx)("p",{className:`text-xs ${r?"text-blue-100":"text-gray-500 dark:text-gray-400"}`,children:(0,x.format)(new Date(t.createdAt),"h:mm a")}),r&&(0,a.jsx)("div",{className:"flex items-center",children:t.isRead?(0,a.jsxs)("span",{className:"text-blue-300 text-xs ml-1 flex items-center gap-0.5",children:[(0,a.jsxs)("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}),(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})]}),(0,a.jsx)("span",{className:"text-[10px]",children:"Seen"})]}):(0,a.jsx)("span",{className:"text-gray-300 text-xs ml-1",children:(0,a.jsx)("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})]})]})},t.id)}),(0,a.jsx)("div",{ref:F})]}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-4 transition-colors",children:(0,a.jsxs)("form",{onSubmit:J,className:"flex items-center gap-2",children:[(0,a.jsx)("button",{type:"button",className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,a.jsx)(c.FiPaperclip,{className:"text-xl text-gray-600 dark:text-gray-300"})}),(0,a.jsx)("input",{type:"text",value:f,onChange:e=>j(e.target.value),placeholder:"Type a message...",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-full focus:ring-2 focus:ring-teal-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors"}),(0,a.jsx)("button",{type:"submit",disabled:!f.trim(),className:"p-2 bg-teal-600 text-white rounded-full hover:bg-teal-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(c.FiSend,{className:"text-xl"})})]})})]}):(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(c.FiMessageCircle,{className:"text-6xl text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"Select a user to start chatting"}),(0,a.jsx)("p",{className:"text-gray-400 dark:text-gray-500 text-sm mt-2",children:"Search by ID, name, email, or phone"})]})})})]})})};e.s(["default",()=>h])}]);