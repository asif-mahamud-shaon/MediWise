(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15220,78964,e=>{"use strict";var t=e.i(52972),r=e.i(93661),a=e.i(42388),s=e.i(55236),l=e.i(33595),n=e.i(90503);e.s(["default",0,({activeSection:e,onSectionChange:i})=>{let d,o=(0,a.usePathname)(),{user:c,logout:x}=(0,s.useAuth)(),{t:g}=(0,l.useLanguage)(),m=[{href:"/admin/dashboard",label:g("dashboard"),icon:n.FiHome},{href:"/admin/appointments",label:g("appointments"),icon:n.FiCalendar},{href:"/admin/users",label:g("users"),icon:n.FiUsers},{href:"/admin/doctors",label:g("doctors"),icon:n.FiUser},{href:"/admin/prescriptions",label:g("prescriptions"),icon:n.FiFileText},{href:"/admin/chats",label:g("chats"),icon:n.FiMessageCircle}],h=[{href:"/admin/ads",label:g("advertisements"),icon:n.FiShoppingBag}];return(0,t.jsxs)("div",{className:"fixed left-0 top-0 h-full w-64 bg-white dark:bg-gray-800 shadow-lg z-10 border-r border-gray-200 dark:border-gray-700 transition-colors",children:[(0,t.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-teal-500 to-indigo-600 flex items-center justify-center text-white font-bold text-lg",children:"ðŸ©º"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"MediWise"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Healthcare Management"})]})]})}),(0,t.jsx)("nav",{className:"p-4 space-y-6 overflow-y-auto h-[calc(100vh-200px)]",children:[{title:"CLINIC",items:m},{title:"FINANCE",items:h}].map(a=>(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 px-4",children:a.title}),(0,t.jsx)("div",{className:"space-y-1",children:a.items.map(a=>{let s=a.icon,l=e?e===a.href:o===a.href||o?.startsWith(a.href+"/")||o?.includes(a.href);return(0,t.jsxs)(r.default,{href:a.href,onClick:e=>{i&&(e.preventDefault(),i(a.href))},className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${l?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 font-medium":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[(0,t.jsx)(s,{className:"text-xl"}),(0,t.jsx)("span",{className:"text-sm",children:a.label})]},a.href)})})]},a.title))}),(0,t.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 transition-colors",children:[(0,t.jsx)("div",{className:"mb-3 px-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white text-xs font-bold",children:(d=c?.name||"Admin",d?.split(" ")?.map(e=>e[0])?.join("")?.toUpperCase()?.slice(0,2)||"A")}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:c?.name||"Admin"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Super admin"})]})]})}),(0,t.jsxs)("button",{onClick:x,className:"w-full flex items-center gap-3 px-4 py-2 rounded-lg text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors text-sm",children:[(0,t.jsx)(n.FiLogOut,{className:"text-lg"}),(0,t.jsx)("span",{children:"Logout"})]})]})]})}],15220);var i=e.i(66315),d=e.i(72648),o=e.i(83937);e.s(["default",0,({title:e,backButton:r=!1,onBack:c,searchPlaceholder:x="Search for anything here...",onSearch:g,actionButton:m,filterButton:h,onQuickAdd:u})=>{let y,{user:b,logout:f}=(0,s.useAuth)(),{showNotification:p}=(0,d.useNotification)(),{theme:j,toggleTheme:v}=(0,o.useTheme)(),{language:N,setLanguage:k,t:w}=(0,l.useLanguage)(),D=(0,a.useRouter)(),[C,S]=(0,i.useState)(""),[M,F]=(0,i.useState)(!1),[A,I]=(0,i.useState)(!1),[L,T]=(0,i.useState)(!1),[z,E]=(0,i.useState)(!1),[R]=(0,i.useState)([{id:1,title:"New appointment request",message:"Dr. Smith has a new appointment",time:"2 min ago",read:!1},{id:2,title:"System update",message:"Scheduled maintenance tonight",time:"1 hour ago",read:!1}]),[$]=(0,i.useState)(4),[_]=(0,i.useState)(1),[U,X]=(0,i.useState)(new Date),B=(0,i.useRef)(null),Y=(0,i.useRef)(null),P=(0,i.useRef)(null),H=(0,i.useRef)(null);(0,i.useEffect)(()=>{let e=e=>{B.current&&!B.current.contains(e.target)&&F(!1),Y.current&&!Y.current.contains(e.target)&&I(!1),P.current&&!P.current.contains(e.target)&&T(!1),H.current&&!H.current.contains(e.target)&&E(!1)};return(M||A||L||z)&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[M,A,L,z]);let O=R.filter(e=>!e.read).length,[W,V]=(0,i.useState)(!1),K=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let e=e=>{K.current&&!K.current.contains(e.target)&&V(!1)};return W&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[W]),(0,t.jsx)("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-8 py-4 sticky top-0 z-20 transition-colors",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[r&&(0,t.jsx)("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:w(e.toLowerCase().replace(/\s+/g,"_"))||e})]}),(0,t.jsx)("div",{className:"flex-1 max-w-md mx-8",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(n.FiSearch,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500"}),(0,t.jsx)("input",{type:"text",placeholder:x,value:C,onChange:e=>{let t=e.target.value;S(t),g&&g(t)},className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[m&&(0,t.jsxs)("button",{onClick:m.onClick,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[m.icon||(0,t.jsx)(n.FiPlus,{className:"text-lg"}),m.label]}),h&&(0,t.jsxs)("button",{onClick:h.onClick,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-sm font-medium text-gray-700 dark:text-gray-300",children:[(0,t.jsx)(n.FiFilter,{className:"text-lg"}),"Filters"]}),(0,t.jsxs)("div",{className:"relative",ref:K,children:[(0,t.jsx)("button",{onClick:()=>V(!W),className:"relative p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,t.jsx)(n.FiPlus,{className:"text-xl text-gray-600 dark:text-gray-300"})}),W&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-2 z-50",children:[(0,t.jsx)("button",{onClick:()=>{V(!1),u?.onAddUser?u.onAddUser():(D.push("/admin/users"),p("Navigate to Users section","info"))},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Add User"}),(0,t.jsx)("button",{onClick:()=>{V(!1),u?.onAddDoctor?u.onAddDoctor():(D.push("/admin/doctors"),p("Navigate to Doctors section","info"))},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Add Doctor"}),(0,t.jsx)("button",{onClick:()=>{V(!1),u?.onAddAppointment?u.onAddAppointment():(D.push("/admin/appointments"),p("Navigate to Appointments section","info"))},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Add Appointment"}),(0,t.jsx)("button",{onClick:()=>{V(!1),u?.onAddAdvertisement?u.onAddAdvertisement():(D.push("/admin/ads"),p("Navigate to Advertisements section","info"))},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Add Advertisement"})]})]}),(0,t.jsxs)("div",{className:"relative",ref:Y,children:[(0,t.jsxs)("button",{onClick:()=>I(!A),className:"relative p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[(0,t.jsx)(n.FiBell,{className:"text-xl text-gray-600 dark:text-gray-300"}),O>0&&(0,t.jsx)("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),A&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-80 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-2 z-50 max-h-96 overflow-y-auto",children:[(0,t.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Notifications"}),(0,t.jsx)("button",{className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Mark all as read"})]}),(0,t.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:R.map(e=>(0,t.jsxs)("div",{className:"px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-100",children:e.title}),(0,t.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:e.message}),(0,t.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:e.time})]},e.id))}),(0,t.jsx)("div",{className:"px-4 py-2 border-t border-gray-200 dark:border-gray-700",children:(0,t.jsx)("button",{className:"w-full text-center text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"View all notifications"})})]})]}),(0,t.jsxs)("div",{className:"relative",ref:P,children:[(0,t.jsx)("button",{onClick:()=>T(!L),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,t.jsx)(n.FiSettings,{className:"text-xl text-gray-600 dark:text-gray-300"})}),L&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-96 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:[(0,t.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Settings"}),(0,t.jsx)("button",{onClick:()=>T(!1),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:(0,t.jsx)(n.FiX,{className:"text-gray-600 dark:text-gray-300"})})]})}),(0,t.jsxs)("div",{className:"p-4 space-y-4 max-h-96 overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:["dark"===j?(0,t.jsx)(n.FiMoon,{className:"text-xl text-gray-600 dark:text-gray-300"}):(0,t.jsx)(n.FiSun,{className:"text-xl text-gray-600 dark:text-gray-300"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-100",children:w("dark_mode")}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:w("toggle_dark_theme")})]})]}),(0,t.jsx)("button",{onClick:v,className:`relative w-12 h-6 rounded-full transition-colors ${"dark"===j?"bg-blue-600":"bg-gray-300"}`,children:(0,t.jsx)("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${"dark"===j?"translate-x-6":"translate-x-0"}`})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(n.FiGlobe,{className:"text-xl text-gray-600 dark:text-gray-300"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-100",children:w("language")}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:w("choose_language")})]})]}),(0,t.jsxs)("select",{value:N,onChange:e=>k(e.target.value),className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 text-sm",children:[(0,t.jsx)("option",{value:"en",children:"English"}),(0,t.jsx)("option",{value:"bn",children:"à¦¬à¦¾à¦‚à¦²à¦¾"}),(0,t.jsx)("option",{value:"hi",children:"Hindi"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(n.FiVolume2,{className:"text-xl text-gray-600 dark:text-gray-300"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-100",children:w("notification_sound")}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:w("enable_sound_alerts")})]})]}),(0,t.jsx)("button",{className:"w-12 h-6 rounded-full bg-blue-600 relative",children:(0,t.jsx)("span",{className:"absolute top-1 right-1 w-4 h-4 bg-white rounded-full"})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-100",children:w("auto_refresh")}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:w("auto_refresh_desc")})]}),(0,t.jsx)("button",{className:"w-12 h-6 rounded-full bg-blue-600 relative",children:(0,t.jsx)("span",{className:"absolute top-1 right-1 w-4 h-4 bg-white rounded-full"})})]}),(0,t.jsxs)("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-100 mb-2",children:w("data_preferences")}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",className:"rounded"}),(0,t.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:w("save_search_history")})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",className:"rounded"}),(0,t.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:w("enable_analytics")})]})]})]})]})]})]}),(0,t.jsxs)("div",{className:"relative",ref:H,children:[(0,t.jsx)("button",{onClick:()=>E(!z),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,t.jsx)(n.FiCalendar,{className:"text-xl text-gray-600 dark:text-gray-300"})}),z&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-80 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-4 z-50",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-100",children:w("calendar")}),(0,t.jsx)("button",{onClick:()=>E(!1),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:(0,t.jsx)(n.FiX,{className:"text-gray-600 dark:text-gray-300"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("button",{onClick:()=>X(new Date(U.getFullYear(),U.getMonth()-1,1)),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:(0,t.jsx)(n.FiChevronLeft,{className:"text-gray-600 dark:text-gray-300"})}),(0,t.jsx)("h4",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100",children:U.toLocaleDateString("bn"===N?"bn-BD":"hi"===N?"hi-IN":"en-US",{month:"long",year:"numeric"})}),(0,t.jsx)("button",{onClick:()=>X(new Date(U.getFullYear(),U.getMonth()+1,1)),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:(0,t.jsx)(n.FiChevronRight,{className:"text-gray-600 dark:text-gray-300"})})]}),(0,t.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["S","M","T","W","T","F","S"].map((e,r)=>(0,t.jsx)("div",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 text-center py-1",children:e},r))}),(0,t.jsx)("div",{className:"grid grid-cols-7 gap-1",children:(()=>{let e=U.getFullYear(),r=U.getMonth(),a=new Date(e,r,1).getDay(),s=new Date(e,r+1,0).getDate(),l=new Date,n=[];for(let e=0;e<a;e++)n.push((0,t.jsx)("div",{className:"h-8"},`empty-${e}`));for(let a=1;a<=s;a++){let s=new Date(e,r,a),i=s.toDateString()===l.toDateString(),d=s.getMonth()===r;n.push((0,t.jsx)("button",{className:`h-8 w-8 rounded text-xs font-medium transition-colors ${i?"bg-blue-600 text-white dark:bg-blue-500":d?"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700":"text-gray-400 dark:text-gray-600"}`,children:a},a))}return n})()}),(0,t.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,t.jsx)("button",{onClick:()=>{X(new Date),p(w("calendar_today"),"info")},className:"w-full px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:w("today")})}),(0,t.jsx)("div",{className:"mt-3 text-center",children:(0,t.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[w("today"),": ",new Date().toLocaleDateString("bn"===N?"bn-BD":"hi"===N?"hi-IN":"en-US",{weekday:"short",month:"short",day:"numeric"})]})})]})]})]}),(0,t.jsxs)("button",{onClick:()=>p(`${w("flagged_items")||"Flagged items"}: ${_}/${$}`,"info"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors flex items-center gap-1",children:[(0,t.jsx)(n.FiFlag,{className:"text-xl text-gray-600 dark:text-gray-300"}),(0,t.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[_,"/",$]})]}),(0,t.jsxs)("div",{className:"relative",ref:B,children:[(0,t.jsxs)("button",{onClick:()=>F(!M),className:"flex items-center gap-3 px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white text-xs font-bold",children:(y=b?.name||"Admin",y?.split(" ")?.map(e=>e[0])?.join("")?.toUpperCase()?.slice(0,2)||"A")}),(0,t.jsxs)("div",{className:"text-left hidden md:block",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:b?.name||"Admin User"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Super admin"})]}),(0,t.jsx)(n.FiChevronDown,{className:`text-gray-600 dark:text-gray-300 hidden md:block transition-transform ${M?"rotate-180":""}`})]}),M&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-2 z-50",children:[(0,t.jsx)("button",{onClick:()=>{(F(!1),b?.role==="admin")?p("Admin profile settings are available in the dashboard","info"):b?.role==="patient"?D.push("/profile"):b?.role==="doctor"?D.push("/doctor/profile"):D.push("/dashboard")},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Profile Settings"}),(0,t.jsx)("button",{onClick:()=>{(F(!1),b?.role==="admin")?p("Account settings are available in the dashboard","info"):p("Settings page coming soon","info")},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Account Settings"}),(0,t.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700 my-2"}),(0,t.jsx)("button",{onClick:()=>{F(!1),window.confirm("Are you sure you want to logout?")&&(p("Logging out...","info",1e3),setTimeout(()=>{f()},500))},className:"w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Logout"})]})]})]})]})})}],78964)},65846,e=>{"use strict";var t=e.i(21055),r=e.i(49693),a=e.i(81294),s=e.i(56601),l=e.i(68808),n=e.i(1822);function i(e,t){let r=(0,n.toDate)(e)-(0,n.toDate)(t);return r<0?-1:r>0?1:r}var d=e.i(82746);function o(e,o){return function(e,t,o){var c;let x,g=(0,a.getDefaultOptions)(),m=o?.locale??g.locale??r.defaultLocale,h=i(e,t);if(isNaN(h))throw RangeError("Invalid time value");let u=Object.assign({},o,{addSuffix:o?.addSuffix,comparison:h}),[y,b]=(0,l.normalizeDates)(o?.in,...h>0?[t,e]:[e,t]),f=(c=void 0,e=>{let t=(c?Math[c]:Math.trunc)(e);return 0===t?0:t})(((0,n.toDate)(b)-(0,n.toDate)(y))/1e3),p=Math.round((f-((0,s.getTimezoneOffsetInMilliseconds)(b)-(0,s.getTimezoneOffsetInMilliseconds)(y))/1e3)/60);if(p<2)if(o?.includeSeconds)if(f<5)return m.formatDistance("lessThanXSeconds",5,u);else if(f<10)return m.formatDistance("lessThanXSeconds",10,u);else if(f<20)return m.formatDistance("lessThanXSeconds",20,u);else if(f<40)return m.formatDistance("halfAMinute",0,u);else if(f<60)return m.formatDistance("lessThanXMinutes",1,u);else return m.formatDistance("xMinutes",1,u);else if(0===p)return m.formatDistance("lessThanXMinutes",1,u);else return m.formatDistance("xMinutes",p,u);if(p<45)return m.formatDistance("xMinutes",p,u);if(p<90)return m.formatDistance("aboutXHours",1,u);if(p<d.minutesInDay){let e=Math.round(p/60);return m.formatDistance("aboutXHours",e,u)}if(p<2520)return m.formatDistance("xDays",1,u);else if(p<d.minutesInMonth){let e=Math.round(p/d.minutesInDay);return m.formatDistance("xDays",e,u)}else if(p<2*d.minutesInMonth)return x=Math.round(p/d.minutesInMonth),m.formatDistance("aboutXMonths",x,u);if((x=function(e,t,r){var a,s;let d,o,c,x,[g,m,h]=(0,l.normalizeDates)(void 0,e,e,t),u=i(m,h),y=Math.abs(function(e,t,r){let[a,s]=(0,l.normalizeDates)(void 0,e,t);return 12*(a.getFullYear()-s.getFullYear())+(a.getMonth()-s.getMonth())}(m,h));if(y<1)return 0;1===m.getMonth()&&m.getDate()>27&&m.setDate(30),m.setMonth(m.getMonth()-u*y);let b=i(m,h)===-u;+(d=(0,n.toDate)(g,void 0),a=void 0,(o=(0,n.toDate)(d,a?.in)).setHours(23,59,59,999),o)==+(s=void 0,x=(c=(0,n.toDate)(d,s?.in)).getMonth(),c.setFullYear(c.getFullYear(),x+1,0),c.setHours(23,59,59,999),c)&&1===y&&1===i(g,h)&&(b=!1);let f=u*(y-b);return 0===f?0:f}(b,y))<12){let e=Math.round(p/d.minutesInMonth);return m.formatDistance("xMonths",e,u)}{let e=x%12,t=Math.trunc(x/12);return e<3?m.formatDistance("aboutXYears",t,u):e<9?m.formatDistance("overXYears",t,u):m.formatDistance("almostXYears",t+1,u)}}(e,(0,t.constructFrom)(e,Date.now()),o)}e.s(["formatDistanceToNow",()=>o],65846)},6022,e=>{"use strict";var t=e.i(52972),r=e.i(66315),a=e.i(55236),s=e.i(72648),l=e.i(42388),n=e.i(15220),i=e.i(78964),d=e.i(51744),o=e.i(81273),c=e.i(16639),x=e.i(65846),g=e.i(90503);function m(){let{user:e,loading:m,logout:h}=(0,a.useAuth)(),{showNotification:u}=(0,s.useNotification)(),y=(0,l.useRouter)(),[b,f]=(0,r.useState)([]),[p,j]=(0,r.useState)([]),[v,N]=(0,r.useState)(null),[k,w]=(0,r.useState)([]),[D,C]=(0,r.useState)(""),[S,M]=(0,r.useState)(!0),[F,A]=(0,r.useState)(0),[I,L]=(0,r.useState)(""),[T,z]=(0,r.useState)(!1),E=(0,r.useRef)(null),R=(0,r.useRef)(null);(0,r.useEffect)(()=>{m||e?e&&"admin"!==e.role?"patient"===e.role?y.push("/patient/dashboard"):"doctor"===e.role?y.push("/doctor/dashboard"):y.push("/dashboard"):e&&"admin"===e.role&&($(),_(),X()):y.push("/login")},[e,m,y]),(0,r.useEffect)(()=>{if(e&&"admin"===e.role){let e=setInterval(()=>{$(),_(),v&&U(v.id),X()},2e3);return()=>clearInterval(e)}},[e,v]),(0,r.useEffect)(()=>(v&&(R.current&&clearInterval(R.current),R.current=setInterval(()=>{U(v.id),_(),X()},2e3)),()=>{R.current&&clearInterval(R.current)}),[v]),(0,r.useEffect)(()=>{E.current?.scrollIntoView({behavior:"smooth"})},[k]);let $=async()=>{try{let e=await o.default.get("/chat/users");f(e.data.users||[])}catch(e){console.error("Error fetching chat users:",e)}},_=async()=>{try{let e=await o.default.get("/chat/conversations");j(e.data.conversations||[])}catch(e){console.error("Error fetching conversations:",e)}},U=async e=>{try{let t=await o.default.get(`/chat/messages/${e}`);w(t.data.messages||[])}catch(e){console.error("Error fetching messages:",e)}},X=async()=>{try{let e=await o.default.get("/chat/unread-count");A(e.data.unreadCount||0)}catch(e){console.error("Error fetching unread count:",e)}finally{M(!1)}},B=e=>{let t=p.find(t=>t.id===e.id);if(t)N(t),U(t.id),L(""),z(!1);else N({id:e.id,name:e.name,email:e.email,role:e.role,phone:e.phone,lastMessage:e.lastMessage||"No messages yet",lastMessageTime:e.lastMessageTime||new Date,unreadCount:e.unreadCount||0}),w([]);L(""),z(!1)},Y=b.filter(e=>{let t=I.toLowerCase();return e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.id.toLowerCase().includes(t)||e.phone&&e.phone.includes(t)||e.role.toLowerCase().includes(t)}),P=async e=>{if(e.preventDefault(),D.trim()&&v)try{await o.default.post("/chat/send",{receiverId:v.id,content:D.trim()}),C(""),setTimeout(()=>{U(v.id),_(),$(),X()},100)}catch(e){console.error("Error sending message:",e),u(e.response?.data?.message||"Failed to send message","error")}},H=e=>e?.split(" ")?.map(e=>e[0])?.join("")?.toUpperCase()?.slice(0,2)||"U";return m||S?(0,t.jsx)(d.default,{}):e&&"admin"===e.role?(0,t.jsxs)("div",{className:"flex min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,t.jsx)(n.default,{}),(0,t.jsxs)("main",{className:"ml-64 flex-1 transition-all duration-300",children:[(0,t.jsx)(i.default,{title:`Chats ${F>0?`(${F})`:""}`,searchPlaceholder:"Search by ID, name, email...",onSearch:e=>{L(e),z(e.length>0)}}),(0,t.jsx)("div",{className:"p-8",children:(0,t.jsx)("div",{className:"flex flex-col h-[calc(100vh-200px)] bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden transition-colors",children:(0,t.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,t.jsxs)("div",{className:"w-1/3 border-r border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 flex flex-col transition-colors",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-3",children:["All Users ",F>0&&`(${F})`]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(g.FiSearch,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500"}),(0,t.jsx)("input",{type:"text",value:I,onChange:e=>{L(e.target.value),z(e.target.value.length>0)},onFocus:()=>{I.length>0&&z(!0)},onBlur:()=>{setTimeout(()=>z(!1),200)},placeholder:"Search by ID, name, email...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors"}),T&&Y.length>0&&(0,t.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-60 overflow-y-auto transition-colors",children:Y.slice(0,5).map(e=>(0,t.jsx)("div",{onMouseDown:t=>{t.preventDefault(),B(e)},className:"px-4 py-3 hover:bg-teal-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-0 transition-colors",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white font-bold text-sm",children:H(e.name)}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 capitalize",children:e.role}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["ID: ",e.id.slice(0,8),"..."]})]}),e.unreadCount>0&&(0,t.jsx)("span",{className:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full",children:e.unreadCount})]})},e.id))})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===b.length?(0,t.jsx)("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:(0,t.jsx)("p",{children:"No users available"})}):Y.map(e=>{let r=p.find(t=>t.id===e.id),a=v?.id===e.id,s=r||e;return(0,t.jsx)("div",{onClick:()=>B(e),className:`p-4 border-b border-gray-100 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${a?"bg-teal-50 dark:bg-gray-700 border-l-4 border-teal-600":""}`,children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white font-bold",children:H(e.name)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-100 truncate",children:e.name}),s.lastMessageTime&&(0,t.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:(0,x.formatDistanceToNow)(new Date(s.lastMessageTime),{addSuffix:!0})})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate mt-1",children:s.lastMessage||"No messages yet"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["ID: ",e.id.slice(0,8),"..."]}),(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"â€¢"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:e.role})]})]}),e.unreadCount>0&&(0,t.jsx)("span",{className:"bg-teal-600 text-white text-xs px-2 py-1 rounded-full",children:e.unreadCount})]})},e.id)})})]}),(0,t.jsx)("div",{className:"flex-1 flex flex-col bg-gray-50 dark:bg-gray-900 transition-colors",children:v?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 flex items-center justify-between transition-colors",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-teal-400 to-indigo-500 flex items-center justify-center text-white font-bold",children:H(v.name)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-100",children:v.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:v.role}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["ID: ",v.id.slice(0,8),"..."]})]})]})}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[k.map(r=>{let a=r.senderId===e?.id;return(0,t.jsx)("div",{className:`flex ${a?"justify-end":"justify-start"}`,children:(0,t.jsxs)("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-2xl ${a?"bg-teal-600 text-white":"bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 border border-gray-200 dark:border-gray-600"} transition-colors`,children:[!a&&(0,t.jsx)("p",{className:"text-xs font-semibold mb-1 opacity-75",children:r.sender.name}),(0,t.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:r.content}),(0,t.jsxs)("div",{className:`flex items-center gap-1 mt-1 ${a?"justify-end":"justify-start"}`,children:[(0,t.jsx)("p",{className:`text-xs ${a?"text-blue-100":"text-gray-500 dark:text-gray-400"}`,children:(0,c.format)(new Date(r.createdAt),"h:mm a")}),a&&(0,t.jsx)("div",{className:"flex items-center",children:r.isRead?(0,t.jsxs)("span",{className:"text-blue-300 text-xs ml-1 flex items-center gap-0.5",children:[(0,t.jsx)("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,t.jsx)("span",{className:"text-[10px]",children:"Seen"})]}):(0,t.jsx)("span",{className:"text-gray-300 text-xs ml-1",children:(0,t.jsx)("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})]})]})},r.id)}),(0,t.jsx)("div",{ref:E})]}),(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-4 transition-colors",children:(0,t.jsxs)("form",{onSubmit:P,className:"flex items-center gap-2",children:[(0,t.jsx)("button",{type:"button",className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,t.jsx)(g.FiPaperclip,{className:"text-xl text-gray-600 dark:text-gray-300"})}),(0,t.jsx)("input",{type:"text",value:D,onChange:e=>C(e.target.value),placeholder:"Type a message...",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-full focus:ring-2 focus:ring-teal-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors"}),(0,t.jsx)("button",{type:"submit",disabled:!D.trim(),className:"p-2 bg-teal-600 text-white rounded-full hover:bg-teal-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,t.jsx)(g.FiSend,{className:"text-xl"})})]})})]}):(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(g.FiMessageCircle,{className:"text-6xl text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"Select a user to start chatting"}),(0,t.jsx)("p",{className:"text-gray-400 dark:text-gray-500 text-sm mt-2",children:"Search by ID, name, email, or phone"})]})})})]})})})]})]}):null}e.s(["default",()=>m])}]);